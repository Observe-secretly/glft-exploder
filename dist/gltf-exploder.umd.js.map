{"version":3,"file":"gltf-exploder.umd.js","sources":["../node_modules/three/examples/jsm/controls/ArcballControls.js","../src/core/types.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/core/utils.ts","../src/core/index.ts","../src/core/InteractionManager.ts","../src/ui/LiquidGlass.ts","../src/ui/ExploderPanel.ts","../src/ui/styles.ts","../src/ui/ExploderHUD.ts","../src/ui/ExploderInfoHUD.ts","../src/ui/index.ts","../src/ui/ExploderZoomControls.ts","../src/index.ts"],"sourcesContent":["import {\n\tControls,\n\tGridHelper,\n\tEllipseCurve,\n\tBufferGeometry,\n\tLine,\n\tLineBasicMaterial,\n\tRaycaster,\n\tGroup,\n\tBox3,\n\tSphere,\n\tQuaternion,\n\tVector2,\n\tVector3,\n\tMatrix4,\n\tMathUtils\n} from 'three';\n\n//trackball state\nconst STATE = {\n\n\tIDLE: Symbol(),\n\tROTATE: Symbol(),\n\tPAN: Symbol(),\n\tSCALE: Symbol(),\n\tFOV: Symbol(),\n\tFOCUS: Symbol(),\n\tZROTATE: Symbol(),\n\tTOUCH_MULTI: Symbol(),\n\tANIMATION_FOCUS: Symbol(),\n\tANIMATION_ROTATE: Symbol()\n\n};\n\nconst INPUT = {\n\n\tNONE: Symbol(),\n\tONE_FINGER: Symbol(),\n\tONE_FINGER_SWITCHED: Symbol(),\n\tTWO_FINGER: Symbol(),\n\tMULT_FINGER: Symbol(),\n\tCURSOR: Symbol()\n\n};\n\n//cursor center coordinates\nconst _center = {\n\n\tx: 0,\n\ty: 0\n\n};\n\n//transformation matrices for gizmos and camera\nconst _transformation = {\n\n\tcamera: new Matrix4(),\n\tgizmos: new Matrix4()\n\n};\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event ArcballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event ArcballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event ArcballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _raycaster = new Raycaster();\nconst _offset = new Vector3();\n\nconst _gizmoMatrixStateTemp = new Matrix4();\nconst _cameraMatrixStateTemp = new Matrix4();\nconst _scalePointTemp = new Vector3();\n\nconst _EPS = 0.000001;\n\n/**\n * Arcball controls allow the camera to be controlled by a virtual trackball with full touch support and advanced navigation functionality.\n * Cursor/finger positions and movements are mapped over a virtual trackball surface represented by a gizmo and mapped in intuitive and\n * consistent camera movements. Dragging cursor/fingers will cause camera to orbit around the center of the trackball in a conservative\n * way (returning to the starting point will make the camera return to its starting orientation).\n *\n * In addition to supporting pan, zoom and pinch gestures, Arcball controls provide focus< functionality with a double click/tap for intuitively\n * moving the object's point of interest in the center of the virtual trackball. Focus allows a much better inspection and navigation in complex\n * environment. Moreover Arcball controls allow FOV manipulation (in a vertigo-style method) and z-rotation. Saving and restoring of Camera State\n * is supported also through clipboard (use ctrl+c and ctrl+v shortcuts for copy and paste the state).\n *\n * Unlike {@link OrbitControls} and {@link TrackballControls}, `ArcballControls` doesn't require `update()` to be called externally in an\n * animation loop when animations are on.\n *\n * @augments Controls\n * @three_import import { ArcballControls } from 'three/addons/controls/ArcballControls.js';\n */\nclass ArcballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera to be controlled. The camera must not be a child of another object, unless that object is the scene itself.\n\t * @param {?HTMLElement} [domElement=null] - The HTML element used for event listeners.\n\t * @param {?Scene} [scene=null] The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t */\n\tconstructor( camera, domElement = null, scene = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t\t *\n\t\t * @type {?Scene}\n\t\t * @default null\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The control's focus point.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\t\tthis._currentTarget = new Vector3();\n\n\t\t/**\n\t\t * The size of the gizmo relative to the screen width and height.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.67\n\t\t */\n\t\tthis.radiusFactor = 0.67;\n\n\t\t/**\n\t\t * Holds the mouse actions of this controls. This property is maintained by the methods\n\t\t * `setMouseAction()` and `unsetMouseAction()`.\n\t\t *\n\t\t * @type {Array<Object>}\n\t\t */\n\t\tthis.mouseActions = [];\n\t\tthis._mouseOp = null;\n\n\n\t\t//global vectors and matrices that are used in some operations to avoid creating new objects every time (e.g. every time cursor moves)\n\t\tthis._v2_1 = new Vector2();\n\t\tthis._v3_1 = new Vector3();\n\t\tthis._v3_2 = new Vector3();\n\n\t\tthis._m4_1 = new Matrix4();\n\t\tthis._m4_2 = new Matrix4();\n\n\t\tthis._quat = new Quaternion();\n\n\t\t//transformation matrices\n\t\tthis._translationMatrix = new Matrix4(); //matrix for translation operation\n\t\tthis._rotationMatrix = new Matrix4(); //matrix for rotation operation\n\t\tthis._scaleMatrix = new Matrix4(); //matrix for scaling operation\n\n\t\tthis._rotationAxis = new Vector3(); //axis for rotate operation\n\n\n\t\t//camera state\n\t\tthis._cameraMatrixState = new Matrix4();\n\t\tthis._cameraProjectionState = new Matrix4();\n\n\t\tthis._fovState = 1;\n\t\tthis._upState = new Vector3();\n\t\tthis._zoomState = 1;\n\t\tthis._nearPos = 0;\n\t\tthis._farPos = 0;\n\n\t\tthis._gizmoMatrixState = new Matrix4();\n\n\t\t//initial values\n\t\tthis._up0 = new Vector3();\n\t\tthis._zoom0 = 1;\n\t\tthis._fov0 = 0;\n\t\tthis._initialNear = 0;\n\t\tthis._nearPos0 = 0;\n\t\tthis._initialFar = 0;\n\t\tthis._farPos0 = 0;\n\t\tthis._cameraMatrixState0 = new Matrix4();\n\t\tthis._gizmoMatrixState0 = new Matrix4();\n\t\tthis._target0 = new Vector3();\n\n\t\t//pointers array\n\t\tthis._button = - 1;\n\t\tthis._touchStart = [];\n\t\tthis._touchCurrent = [];\n\t\tthis._input = INPUT.NONE;\n\n\t\t//two fingers touch interaction\n\t\tthis._switchSensibility = 32;\t//minimum movement to be performed to fire single pan start after the second finger has been released\n\t\tthis._startFingerDistance = 0; //distance between two fingers\n\t\tthis._currentFingerDistance = 0;\n\t\tthis._startFingerRotation = 0; //amount of rotation performed with two fingers\n\t\tthis._currentFingerRotation = 0;\n\n\t\t//double tap\n\t\tthis._devPxRatio = 0;\n\t\tthis._downValid = true;\n\t\tthis._nclicks = 0;\n\t\tthis._downEvents = [];\n\t\tthis._downStart = 0;\t//pointerDown time\n\t\tthis._clickStart = 0;\t//first click time\n\t\tthis._maxDownTime = 250;\n\t\tthis._maxInterval = 300;\n\t\tthis._posThreshold = 24;\n\t\tthis._movementThreshold = 24;\n\n\t\t//cursor positions\n\t\tthis._currentCursorPosition = new Vector3();\n\t\tthis._startCursorPosition = new Vector3();\n\n\t\t//grid\n\t\tthis._grid = null; //grid to be visualized during pan operation\n\t\tthis._gridPosition = new Vector3();\n\n\t\t//gizmos\n\t\tthis._gizmos = new Group();\n\t\tthis._curvePts = 128;\n\n\n\t\t//animations\n\t\tthis._timeStart = - 1; //initial time\n\t\tthis._animationId = - 1;\n\n\t\t/**\n\t\t * Duration of focus animations in ms.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 500\n\t\t */\n\t\tthis.focusAnimationTime = 500;\n\n\t\t//rotate animation\n\t\tthis._timePrev = 0; //time at which previous rotate operation has been detected\n\t\tthis._timeCurrent = 0; //time at which current rotate operation has been detected\n\t\tthis._anglePrev = 0; //angle of previous rotation\n\t\tthis._angleCurrent = 0; //angle of current rotation\n\t\tthis._cursorPosPrev = new Vector3();\t//cursor position when previous rotate operation has been detected\n\t\tthis._cursorPosCurr = new Vector3();//cursor position when current rotate operation has been detected\n\t\tthis._wPrev = 0; //angular velocity of the previous rotate operation\n\t\tthis._wCurr = 0; //angular velocity of the current rotate operation\n\n\t\t//parameters\n\n\t\t/**\n\t\t * If set to `true`, the camera's near and far values will be adjusted every time zoom is\n\t\t * performed trying to maintain the same visible portion given by initial near and far\n\t\t * values. Only works with perspective cameras.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.adjustNearFar = false;\n\n\t\t/**\n\t\t * The scaling factor used when performing zoom operation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.1\n\t\t */\n\t\tthis.scaleFactor = 1.1;\n\n\t\t/**\n\t\t * The damping inertia used if 'enableAnimations` is set to `true`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 25\n\t\t */\n\t\tthis.dampingFactor = 25;\n\n\t\t/**\n\t\t * Maximum angular velocity allowed on rotation animation start.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 20\n\t\t */\n\t\tthis.wMax = 20;\n\n\t\t/**\n\t\t * Set to `true` to enable animations for rotation (damping) and focus operation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableAnimations = true;\n\n\t\t/**\n\t\t * If set to `true`, a grid will appear when panning operation is being performed\n\t\t * (desktop interaction only).\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableGrid = false;\n\n\t\t/**\n\t\t * Set to `true` to make zoom become cursor centered.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.cursorZoom = false;\n\n\t\t/**\n\t\t * The minimum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 5\n\t\t */\n\t\tthis.minFov = 5;\n\n\t\t/**\n\t\t * The maximum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 90\n\t\t */\n\t\tthis.maxFov = 90;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Enable or disable camera rotation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Enable or disable camera zoom.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Enable or disable gizmos.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableGizmos = true;\n\n\t\t/**\n\t\t * Enable or disable camera focusing on double-tap (or click) operations.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableFocus = true;\n\n\t\t/**\n\t\t * How far you can dolly in. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t//trackball parameters\n\t\tthis._tbRadius = 1;\n\n\t\t//FSA\n\t\tthis._state = STATE.IDLE;\n\n\t\tthis.setCamera( camera );\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tthis.scene.add( this._gizmos );\n\n\t\t}\n\n\t\tthis.initializeMouseActions();\n\n\t\t// event listeners\n\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onWheel = onWheel.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onWindowResize = onWindowResize.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.style.touchAction = 'none';\n\t\tthis._devPxRatio = window.devicePixelRatio;\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\n\t\twindow.addEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\twindow.removeEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tonSinglePanStart( event, operation ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( operation ) {\n\n\t\t\t\tcase 'PAN':\n\n\t\t\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\tthis.drawGrid();\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ROTATE':\n\n\t\t\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.ROTATE, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\t\t\t\t\tthis.activateGizmos( true );\n\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\tthis._timePrev = this._timeCurrent = performance.now();\n\t\t\t\t\t\tthis._angleCurrent = this._anglePrev = 0;\n\t\t\t\t\t\tthis._cursorPosPrev.copy( this._startCursorPosition );\n\t\t\t\t\t\tthis._cursorPosCurr.copy( this._cursorPosPrev );\n\t\t\t\t\t\tthis._wCurr = 0;\n\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( ! this.object.isPerspectiveCamera || ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tif ( ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonSinglePanMove( event, opState ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tconst restart = opState != this._state;\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( opState ) {\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to pan operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with pan operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to rotate operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with rotate operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tconst distance = this._startCursorPosition.distanceTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst angle = this._startCursorPosition.angleTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst amount = Math.max( distance / this._tbRadius, angle ) * this.rotateSpeed; //effective rotation angle\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.rotate( this.calculateRotationAxis( this._startCursorPosition, this._currentCursorPosition ), amount ) );\n\n\t\t\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\t\t\tthis._timePrev = this._timeCurrent;\n\t\t\t\t\t\t\t\tthis._timeCurrent = performance.now();\n\t\t\t\t\t\t\t\tthis._anglePrev = this._angleCurrent;\n\t\t\t\t\t\t\t\tthis._angleCurrent = amount;\n\t\t\t\t\t\t\t\tthis._cursorPosPrev.copy( this._cursorPosCurr );\n\t\t\t\t\t\t\t\tthis._cursorPosCurr.copy( this._currentCursorPosition );\n\t\t\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\t\t\t\t\t\t\t\tthis._wCurr = this.calculateAngularSpeed( this._anglePrev, this._angleCurrent, this._timePrev, this._timeCurrent );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.SCALE:\n\n\t\t\t\t\tif ( this.enableZoom ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to zoom operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with zoom operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_1 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.FOV:\n\n\t\t\t\t\tif ( this.enableZoom && this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to fov operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with fov operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\t\tsize = x / newDistance;\n\t\t\t\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t\t\t\t\t//adjusting distance\n\t\t\t\t\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\t\t\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonSinglePanEnd() {\n\n\t\tif ( this._state == STATE.ROTATE ) {\n\n\n\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t//perform rotation animation\n\t\t\t\tconst deltaTime = ( performance.now() - this._timeCurrent );\n\t\t\t\tif ( deltaTime < 120 ) {\n\n\t\t\t\t\tconst w = Math.abs( ( this._wPrev + this._wCurr ) / 2 );\n\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\t\tself.updateTbState( STATE.ANIMATION_ROTATE, true );\n\t\t\t\t\t\tconst rotationAxis = self.calculateRotationAxis( self._cursorPosPrev, self._cursorPosCurr );\n\n\t\t\t\t\t\tself.onRotationAnim( t, rotationAxis, Math.min( w, self.wMax ) );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//cursor has been standing still for over 120 ms since last movement\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else if ( this._state == STATE.PAN || this._state == STATE.IDLE ) {\n\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\tthis.disposeGrid();\n\n\t\t\t}\n\n\t\t\tthis.activateGizmos( false );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoubleTap( event ) {\n\n\t\tif ( this.enabled && this.enablePan && this.enableFocus && this.scene != null ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\t\t\tconst hitP = this.unprojectOnObj( this.getCursorNDC( _center.x, _center.y, this.domElement ), this.object );\n\n\t\t\tif ( hitP != null && this.enableAnimations ) {\n\n\t\t\t\tconst self = this;\n\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t\t\t}\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.updateTbState( STATE.ANIMATION_FOCUS, true );\n\t\t\t\t\tself.onFocusAnim( t, hitP, self._cameraMatrixState, self._gizmoMatrixState );\n\n\t\t\t\t} );\n\n\t\t\t} else if ( hitP != null && ! this.enableAnimations ) {\n\n\t\t\t\tthis.updateTbState( STATE.FOCUS, true );\n\t\t\t\tthis.focus( hitP, this.scaleFactor );\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoublePanStart() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.PAN, true );\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonDoublePanMove() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\n\t\t\tif ( this._state != STATE.PAN ) {\n\n\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\tthis._startCursorPosition.copy( this._currentCursorPosition );\n\n\t\t\t}\n\n\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition, true ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonDoublePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonRotateStart() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\n\t\t\t//this._startFingerRotation = event.rotation;\n\n\t\t\tthis._startFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\t\t\tthis._currentFingerRotation = this._startFingerRotation;\n\n\t\t\tthis.object.getWorldDirection( this._rotationAxis ); //rotation axis\n\n\t\t\tif ( ! this.enablePan && ! this.enableZoom ) {\n\n\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonRotateMove() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tlet rotationPoint;\n\n\t\t\tif ( this._state != STATE.ZROTATE ) {\n\n\t\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\t\t\t\tthis._startFingerRotation = this._currentFingerRotation;\n\n\t\t\t}\n\n\t\t\t//this._currentFingerRotation = event.rotation;\n\t\t\tthis._currentFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\trotationPoint = new Vector3().setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t} else {\n\n\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\t\t\t\trotationPoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._v3_2 );\n\n\t\t\t}\n\n\t\t\tconst amount = MathUtils.DEG2RAD * ( this._startFingerRotation - this._currentFingerRotation );\n\n\t\t\tthis.applyTransformMatrix( this.zRotate( rotationPoint, amount ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonRotateEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.activateGizmos( false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonPinchStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\tthis._startFingerDistance = this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] );\n\t\t\tthis._currentFingerDistance = this._startFingerDistance;\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonPinchMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tconst minDistance = 12; //minimum distance between fingers (in css pixels)\n\n\t\t\tif ( this._state != STATE.SCALE ) {\n\n\t\t\t\tthis._startFingerDistance = this._currentFingerDistance;\n\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t}\n\n\t\t\tthis._currentFingerDistance = Math.max( this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] ), minDistance * this._devPxRatio );\n\t\t\tconst amount = this._currentFingerDistance / this._startFingerDistance;\n\n\t\t\tlet scalePoint;\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\tscalePoint = this._gizmos.position;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.multiplyScalar( 1 / this.object.zoom )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.applyTransformMatrix( this.scale( amount, scalePoint ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonPinchEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonTriplePanStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t}\n\n\t}\n\n\tonTriplePanMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\t//\t  fov / 2\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\tx\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t\t| _ _ _\\\n\t\t\t//\t\t\ty\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( movement < 0 ) {\n\n\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t}\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t//check min and max distance\n\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t//calculate new fov\n\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t//check min and max fov\n\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\tsize = x / newDistance;\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\tthis.setFov( newFov );\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t//adjusting distance\n\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonTriplePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\t\t//this.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Set _center's x/y coordinates.\n\t *\n\t * @private\n\t * @param {number} clientX - The x coordinate.\n\t * @param {number} clientY - The y coordinate.\n\t */\n\tsetCenter( clientX, clientY ) {\n\n\t\t_center.x = clientX;\n\t\t_center.y = clientY;\n\n\t}\n\n\t/**\n\t * Set default mouse actions.\n\t *\n\t * @private\n\t */\n\tinitializeMouseActions() {\n\n\t\tthis.setMouseAction( 'PAN', 0, 'CTRL' );\n\t\tthis.setMouseAction( 'PAN', 2 );\n\n\t\tthis.setMouseAction( 'ROTATE', 0 );\n\n\t\tthis.setMouseAction( 'ZOOM', 'WHEEL' );\n\t\tthis.setMouseAction( 'ZOOM', 1 );\n\n\t\tthis.setMouseAction( 'FOV', 'WHEEL', 'SHIFT' );\n\t\tthis.setMouseAction( 'FOV', 1, 'SHIFT' );\n\n\n\t}\n\n\t/**\n\t * Compare two mouse actions.\n\t *\n\t * @private\n\t * @param {Object} action1 - The first mouse action.\n\t * @param {Object} action2 - The second mouse action.\n\t * @returns {boolean} `true` if action1 and action 2 are the same mouse action, `false` otherwise.\n\t */\n\tcompareMouseAction( action1, action2 ) {\n\n\t\tif ( action1.operation == action2.operation ) {\n\n\t\t\tif ( action1.mouse == action2.mouse && action1.key == action2.key ) {\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Set a new mouse action by specifying the operation to be performed and a mouse/key combination. In case of conflict, replaces the existing one.\n\t *\n\t * @param {'PAN'|'ROTATE'|'ZOOM'|'FOV'} operation - The operation to be performed ('PAN', 'ROTATE', 'ZOOM', 'FOV').\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} [key=null] - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the mouse action has been successfully added, `false` otherwise.\n\t */\n\tsetMouseAction( operation, mouse, key = null ) {\n\n\t\tconst operationInput = [ 'PAN', 'ROTATE', 'ZOOM', 'FOV' ];\n\t\tconst mouseInput = [ 0, 1, 2, 'WHEEL' ];\n\t\tconst keyInput = [ 'CTRL', 'SHIFT', null ];\n\t\tlet state;\n\n\t\tif ( ! operationInput.includes( operation ) || ! mouseInput.includes( mouse ) || ! keyInput.includes( key ) ) {\n\n\t\t\t//invalid parameters\n\t\t\treturn false;\n\n\t\t}\n\n\t\tif ( mouse == 'WHEEL' ) {\n\n\t\t\tif ( operation != 'ZOOM' && operation != 'FOV' ) {\n\n\t\t\t\t//cannot associate 2D operation to 1D input\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( operation ) {\n\n\t\t\tcase 'PAN':\n\n\t\t\t\tstate = STATE.PAN;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ROTATE':\n\n\t\t\t\tstate = STATE.ROTATE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZOOM':\n\n\t\t\t\tstate = STATE.SCALE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'FOV':\n\n\t\t\t\tstate = STATE.FOV;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst action = {\n\n\t\t\toperation: operation,\n\t\t\tmouse: mouse,\n\t\t\tkey: key,\n\t\t\tstate: state\n\n\t\t};\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == action.mouse && this.mouseActions[ i ].key == action.key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1, action );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseActions.push( action );\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Remove a mouse action by specifying its mouse/key combination.\n\t *\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the operation has been successfully removed, `false` otherwise.\n\t */\n\tunsetMouseAction( mouse, key = null ) {\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == mouse && this.mouseActions[ i ].key == key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1 );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Return the operation associated to a mouse/keyboard combination.\n\t *\n\t * @private\n\t * @param {0|1|2|'WHEEL'} mouse - Mouse button index (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier.\n\t * @returns {?('PAN'|'ROTATE'|'ZOOM'|'FOV')} The operation if it has been found, `null` otherwise.\n\t */\n\tgetOpFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.operation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.operation;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Get the operation associated to mouse and key combination and returns the corresponding FSA state.\n\t *\n\t * @private\n\t * @param {0|1|2} mouse - Mouse button index (0, 1, 2)\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier\n\t * @returns {?STATE} The FSA state obtained from the operation associated to mouse/keyboard combination.\n\t */\n\tgetOpStateFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.state;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.state;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculate the angle between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p1 - The first pointer event.\n\t * @param {PointerEvent} p2 - The second pointer event.\n\t * @returns {number} The angle between two pointers in degrees.\n\t */\n\tgetAngle( p1, p2 ) {\n\n\t\treturn Math.atan2( p2.clientY - p1.clientY, p2.clientX - p1.clientX ) * 180 / Math.PI;\n\n\t}\n\n\t/**\n\t * Updates a PointerEvent inside current pointerevents array.\n\t *\n\t * @private\n\t * @param {PointerEvent} event - The pointer event.\n\t */\n\tupdateTouchEvent( event ) {\n\n\t\tfor ( let i = 0; i < this._touchCurrent.length; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1, event );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies a transformation matrix, to the camera and gizmos.\n\t *\n\t * @private\n\t * @param {Object} transformation - Object containing matrices to apply to camera and gizmos.\n\t */\n\tapplyTransformMatrix( transformation ) {\n\n\t\tif ( transformation.camera != null ) {\n\n\t\t\tthis._m4_1.copy( this._cameraMatrixState ).premultiply( transformation.camera );\n\t\t\tthis._m4_1.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\t\tthis.object.updateMatrix();\n\n\t\t\t//update camera up vector\n\t\t\tif ( this._state == STATE.ROTATE || this._state == STATE.ZROTATE || this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t\tthis.object.up.copy( this._upState ).applyQuaternion( this.object.quaternion );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( transformation.gizmos != null ) {\n\n\t\t\tthis._m4_1.copy( this._gizmoMatrixState ).premultiply( transformation.gizmos );\n\t\t\tthis._m4_1.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t}\n\n\t\tif ( this._state == STATE.SCALE || this._state == STATE.FOCUS || this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( this.adjustNearFar ) {\n\n\t\t\t\tconst cameraDistance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\t\tconst bb = new Box3();\n\t\t\t\tbb.setFromObject( this._gizmos );\n\t\t\t\tconst sphere = new Sphere();\n\t\t\t\tbb.getBoundingSphere( sphere );\n\n\t\t\t\tconst adjustedNearPosition = Math.max( this._nearPos0, sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularNearPosition = cameraDistance - this._initialNear;\n\n\t\t\t\tconst minNearPos = Math.min( adjustedNearPosition, regularNearPosition );\n\t\t\t\tthis.object.near = cameraDistance - minNearPos;\n\n\n\t\t\t\tconst adjustedFarPosition = Math.min( this._farPos0, - sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularFarPosition = cameraDistance - this._initialFar;\n\n\t\t\t\tconst minFarPos = Math.min( adjustedFarPosition, regularFarPosition );\n\t\t\t\tthis.object.far = cameraDistance - minFarPos;\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tlet update = false;\n\n\t\t\t\tif ( this.object.near != this._initialNear ) {\n\n\t\t\t\t\tthis.object.near = this._initialNear;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.object.far != this._initialFar ) {\n\n\t\t\t\t\tthis.object.far = this._initialFar;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( update ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the angular speed.\n\t *\n\t * @private\n\t * @param {number} p0 - Position at t0.\n\t * @param {number} p1 - Position at t1.\n\t * @param {number} t0 - Initial time in milliseconds.\n\t * @param {number} t1 - Ending time in milliseconds.\n\t * @returns {number} The angular speed.\n\t */\n\tcalculateAngularSpeed( p0, p1, t0, t1 ) {\n\n\t\tconst s = p1 - p0;\n\t\tconst t = ( t1 - t0 ) / 1000;\n\t\tif ( t == 0 ) {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\treturn s / t;\n\n\t}\n\n\t/**\n\t * Calculates the distance between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p0 - The first pointer.\n\t * @param {PointerEvent} p1 - The second pointer.\n\t * @returns {number} The distance between the two pointers.\n\t */\n\tcalculatePointersDistance( p0, p1 ) {\n\n\t\treturn Math.sqrt( Math.pow( p1.clientX - p0.clientX, 2 ) + Math.pow( p1.clientY - p0.clientY, 2 ) );\n\n\t}\n\n\t/**\n\t * Calculates the rotation axis as the vector perpendicular between two vectors.\n\t *\n\t * @private\n\t * @param {Vector3} vec1 - The first vector.\n\t * @param {Vector3} vec2 - The second vector.\n\t * @returns {Vector3} The normalized rotation axis.\n\t */\n\tcalculateRotationAxis( vec1, vec2 ) {\n\n\t\tthis._rotationMatrix.extractRotation( this._cameraMatrixState );\n\t\tthis._quat.setFromRotationMatrix( this._rotationMatrix );\n\n\t\tthis._rotationAxis.crossVectors( vec1, vec2 ).applyQuaternion( this._quat );\n\t\treturn this._rotationAxis.normalize().clone();\n\n\t}\n\n\t/**\n\t * Calculates the trackball radius so that gizmo's diameter will be 2/3 of the minimum side of the camera frustum.\n\t *\n\t * @private\n\t * @param {Camera} camera - The camera.\n\t * @returns {number} The trackball radius.\n\t */\n\tcalculateTbRadius( camera ) {\n\n\t\tconst distance = camera.position.distanceTo( this._gizmos.position );\n\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tconst halfFovV = MathUtils.DEG2RAD * camera.fov * 0.5; //vertical fov/2 in radians\n\t\t\tconst halfFovH = Math.atan( ( camera.aspect ) * Math.tan( halfFovV ) ); //horizontal fov/2 in radians\n\t\t\treturn Math.tan( Math.min( halfFovV, halfFovH ) ) * distance * this.radiusFactor;\n\n\t\t} else if ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\treturn Math.min( camera.top, camera.right ) * this.radiusFactor;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Focus operation consist of positioning the point of interest in front of the camera and a slightly zoom in.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point of interest.\n\t * @param {number} size - Scale factor.\n\t * @param {number} [amount=1] - Amount of operation to be completed (used for focus animations, default is complete full operation).\n\t */\n\tfocus( point, size, amount = 1 ) {\n\n\t\t//move center of camera (along with gizmos) towards point of interest\n\t\t_offset.copy( point ).sub( this._gizmos.position ).multiplyScalar( amount );\n\t\tthis._translationMatrix.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t_gizmoMatrixStateTemp.copy( this._gizmoMatrixState );\n\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t_cameraMatrixStateTemp.copy( this._cameraMatrixState );\n\t\tthis._cameraMatrixState.premultiply( this._translationMatrix );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t//apply zoom\n\t\tif ( this.enableZoom ) {\n\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.copy( _gizmoMatrixStateTemp );\n\t\tthis._cameraMatrixState.copy( _cameraMatrixStateTemp );\n\n\t}\n\n\t/**\n\t * Creates a grid if necessary and adds it to the scene.\n\t *\n\t * @private\n\t */\n\tdrawGrid() {\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tconst color = 0x888888;\n\t\t\tconst multiplier = 3;\n\t\t\tlet size, divisions, maxLength, tick;\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst width = this.object.right - this.object.left;\n\t\t\t\tconst height = this.object.bottom - this.object.top;\n\n\t\t\t\tmaxLength = Math.max( width, height );\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength / this.object.zoom * multiplier;\n\t\t\t\tdivisions = size / tick * this.object.zoom;\n\n\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\t\t\t\tconst halfFovV = MathUtils.DEG2RAD * this.object.fov * 0.5;\n\t\t\t\tconst halfFovH = Math.atan( ( this.object.aspect ) * Math.tan( halfFovV ) );\n\n\t\t\t\tmaxLength = Math.tan( Math.max( halfFovV, halfFovH ) ) * distance * 2;\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength * multiplier;\n\t\t\t\tdivisions = size / tick;\n\n\t\t\t}\n\n\t\t\tif ( this._grid == null ) {\n\n\t\t\t\tthis._grid = new GridHelper( size, divisions, color, color );\n\t\t\t\tthis._grid.position.copy( this._gizmos.position );\n\t\t\t\tthis._gridPosition.copy( this._grid.position );\n\t\t\t\tthis._grid.quaternion.copy( this.object.quaternion );\n\t\t\t\tthis._grid.rotateX( Math.PI * 0.5 );\n\n\t\t\t\tthis.scene.add( this._grid );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this._animationId != - 1 ) {\n\n\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t}\n\n\t\tthis.disconnect();\n\n\t\tif ( this.scene !== null ) this.scene.remove( this._gizmos );\n\t\tthis.disposeGrid();\n\n\t}\n\n\t/**\n\t * Removes the grid from the scene.\n\t */\n\tdisposeGrid() {\n\n\t\tif ( this._grid != null && this.scene != null ) {\n\n\t\t\tthis.scene.remove( this._grid );\n\t\t\tthis._grid = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Computes the easing out cubic function for ease out effect in animation.\n\t *\n\t * @private\n\t * @param {number} t - The absolute progress of the animation in the bound of `0` (beginning of the) and `1` (ending of animation).\n\t * @returns {number} Result of easing out cubic at time `t`.\n\t */\n\teaseOutCubic( t ) {\n\n\t\treturn 1 - Math.pow( 1 - t, 3 );\n\n\t}\n\n\t/**\n\t * Makes rotation gizmos more or less visible.\n\t *\n\t * @param {boolean} isActive - If set to `true`, gizmos are more visible.\n\t */\n\tactivateGizmos( isActive ) {\n\n\t\tconst gizmoX = this._gizmos.children[ 0 ];\n\t\tconst gizmoY = this._gizmos.children[ 1 ];\n\t\tconst gizmoZ = this._gizmos.children[ 2 ];\n\n\t\tif ( isActive ) {\n\n\t\t\tgizmoX.material.setValues( { opacity: 1 } );\n\t\t\tgizmoY.material.setValues( { opacity: 1 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 1 } );\n\n\t\t} else {\n\n\t\t\tgizmoX.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoY.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 0.6 } );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the cursor position in NDC.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor normalized position inside the canvas.\n\t */\n\tgetCursorNDC( cursorX, cursorY, canvas ) {\n\n\t\tconst canvasRect = canvas.getBoundingClientRect();\n\t\tthis._v2_1.setX( ( ( cursorX - canvasRect.left ) / canvasRect.width ) * 2 - 1 );\n\t\tthis._v2_1.setY( ( ( canvasRect.bottom - cursorY ) / canvasRect.height ) * 2 - 1 );\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Calculates the cursor position inside the canvas x/y coordinates with the origin being in the center of the canvas.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor position inside the canvas.\n\t */\n\tgetCursorPosition( cursorX, cursorY, canvas ) {\n\n\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\t\tthis._v2_1.x *= ( this.object.right - this.object.left ) * 0.5;\n\t\tthis._v2_1.y *= ( this.object.top - this.object.bottom ) * 0.5;\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Sets the camera to be controlled.  Must be called in order to set a new camera to be controlled.\n\t *\n\t * @param {Camera} camera - The camera to be controlled.\n\t */\n\tsetCamera( camera ) {\n\n\t\tcamera.lookAt( this.target );\n\t\tcamera.updateMatrix();\n\n\t\t//setting state\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._fov0 = camera.fov;\n\t\t\tthis._fovState = camera.fov;\n\n\t\t}\n\n\t\tthis._cameraMatrixState0.copy( camera.matrix );\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraProjectionState.copy( camera.projectionMatrix );\n\t\tthis._zoom0 = camera.zoom;\n\t\tthis._zoomState = this._zoom0;\n\n\t\tthis._initialNear = camera.near;\n\t\tthis._nearPos0 = camera.position.distanceTo( this.target ) - camera.near;\n\t\tthis._nearPos = this._initialNear;\n\n\t\tthis._initialFar = camera.far;\n\t\tthis._farPos0 = camera.position.distanceTo( this.target ) - camera.far;\n\t\tthis._farPos = this._initialFar;\n\n\t\tthis._up0.copy( camera.up );\n\t\tthis._upState.copy( camera.up );\n\n\t\tthis.object = camera;\n\t\tthis.object.updateProjectionMatrix();\n\n\t\t//making gizmos\n\t\tthis._tbRadius = this.calculateTbRadius( camera );\n\t\tthis.makeGizmos( this.target, this._tbRadius );\n\n\t}\n\n\t/**\n\t * Sets gizmos visibility.\n\t *\n\t * @param {boolean} value - Value of gizmos visibility.\n\t */\n\tsetGizmosVisible( value ) {\n\n\t\tthis._gizmos.visible = value;\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Sets gizmos radius factor and redraws gizmos.\n\t *\n\t * @param {number} value - Value of radius factor.\n\t */\n\tsetTbRadius( value ) {\n\n\t\tthis.radiusFactor = value;\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\tconst curve = new EllipseCurve( 0, 0, this._tbRadius, this._tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Creates the rotation gizmos matching trackball center and radius.\n\t *\n\t * @private\n\t * @param {Vector3} tbCenter - The trackball center.\n\t * @param {number} tbRadius - The trackball radius.\n\t */\n\tmakeGizmos( tbCenter, tbRadius ) {\n\n\t\tconst curve = new EllipseCurve( 0, 0, tbRadius, tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\n\t\t//geometry\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t//material\n\t\tconst curveMaterialX = new LineBasicMaterial( { color: 0xff8080, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialY = new LineBasicMaterial( { color: 0x80ff80, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialZ = new LineBasicMaterial( { color: 0x8080ff, fog: false, transparent: true, opacity: 0.6 } );\n\n\t\t//line\n\t\tconst gizmoX = new Line( curveGeometry, curveMaterialX );\n\t\tconst gizmoY = new Line( curveGeometry, curveMaterialY );\n\t\tconst gizmoZ = new Line( curveGeometry, curveMaterialZ );\n\n\t\tconst rotation = Math.PI * 0.5;\n\t\tgizmoX.rotation.x = rotation;\n\t\tgizmoY.rotation.y = rotation;\n\n\n\t\t//setting state\n\t\tthis._gizmoMatrixState0.identity().setPosition( tbCenter );\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\n\t\tif ( this.object.zoom !== 1 ) {\n\n\t\t\t//adapt gizmos size to camera zoom\n\t\t\tconst size = 1 / this.object.zoom;\n\t\t\tthis._scaleMatrix.makeScale( size, size, size );\n\t\t\tthis._translationMatrix.makeTranslation( - tbCenter.x, - tbCenter.y, - tbCenter.z );\n\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix ).premultiply( this._scaleMatrix );\n\t\t\tthis._translationMatrix.makeTranslation( tbCenter.x, tbCenter.y, tbCenter.z );\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t//\n\n\t\tthis._gizmos.traverse( function ( object ) {\n\n\t\t\tif ( object.isLine ) {\n\n\t\t\t\tobject.geometry.dispose();\n\t\t\t\tobject.material.dispose();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis._gizmos.clear();\n\n\t\t//\n\n\t\tthis._gizmos.add( gizmoX );\n\t\tthis._gizmos.add( gizmoY );\n\t\tthis._gizmos.add( gizmoZ );\n\n\t}\n\n\t/**\n\t * Performs animation for focus operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} point - Point of interest for focus operation.\n\t * @param {Matrix4} cameraMatrix - Camera matrix.\n\t * @param {Matrix4} gizmoMatrix - Gizmos matrix.\n\t */\n\tonFocusAnim( time, point, cameraMatrix, gizmoMatrix ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tconst deltaTime = time - this._timeStart;\n\t\t\tconst animTime = deltaTime / this.focusAnimationTime;\n\n\t\t\tthis._gizmoMatrixState.copy( gizmoMatrix );\n\n\t\t\tif ( animTime >= 1 ) {\n\n\t\t\t\t//animation end\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\t\tthis.focus( point, this.scaleFactor );\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t} else {\n\n\t\t\t\tconst amount = this.easeOutCubic( animTime );\n\t\t\t\tconst size = ( ( 1 - amount ) + ( this.scaleFactor * amount ) );\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\t\tthis.focus( point, size, amount );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onFocusAnim( t, point, cameraMatrix, gizmoMatrix.clone() );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs animation for rotation operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} rotationAxis - Rotation axis.\n\t * @param {number} w0 - Initial angular velocity.\n\t */\n\tonRotationAnim( time, rotationAxis, w0 ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._anglePrev = 0;\n\t\t\tthis._angleCurrent = 0;\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t//w = w0 + alpha * t\n\t\t\tconst deltaTime = ( time - this._timeStart ) / 1000;\n\t\t\tconst w = w0 + ( ( - this.dampingFactor ) * deltaTime );\n\n\t\t\tif ( w > 0 ) {\n\n\t\t\t\t//tetha = 0.5 * alpha * t^2 + w0 * t + tetha0\n\t\t\t\tthis._angleCurrent = 0.5 * ( - this.dampingFactor ) * Math.pow( deltaTime, 2 ) + w0 * deltaTime + 0;\n\t\t\t\tthis.applyTransformMatrix( this.rotate( rotationAxis, this._angleCurrent ) );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onRotationAnim( t, rotationAxis, w0 );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tthis._animationId = - 1;\n\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t\tif ( this._state != STATE.ROTATE ) {\n\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Performs pan operation moving camera between two points.\n\t *\n\t * @private\n\t * @param {Vector3} p0 - Initial point.\n\t * @param {Vector3} p1 - Ending point.\n\t * @param {boolean} [adjust=false] - If movement should be adjusted considering camera distance (Perspective only).\n\t * @returns {Object}\n\t */\n\tpan( p0, p1, adjust = false ) {\n\n\t\tconst movement = p0.clone().sub( p1 );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//adjust movement amount\n\t\t\tmovement.multiplyScalar( 1 / this.object.zoom );\n\n\t\t} else if ( this.object.isPerspectiveCamera && adjust ) {\n\n\t\t\t//adjust movement amount\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState0 );\t//camera's initial position\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 );\t//gizmo's initial position\n\t\t\tconst distanceFactor = this._v3_1.distanceTo( this._v3_2 ) / this.object.position.distanceTo( this._gizmos.position );\n\t\t\tmovement.multiplyScalar( 1 / distanceFactor );\n\n\t\t}\n\n\t\tthis._v3_1.set( movement.x, movement.y, 0 ).applyQuaternion( this.object.quaternion );\n\n\t\tthis._m4_1.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_1 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Resets the controls.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = this._fov0;\n\n\t\t}\n\n\t\tthis.object.near = this._nearPos;\n\t\tthis.object.far = this._farPos;\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\tthis.object.up.copy( this._up0 );\n\n\t\tthis.object.updateMatrix();\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\t\tthis._gizmoMatrixState0.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Rotates the camera around an axis passing by trackball's center.\n\t *\n\t * @private\n\t * @param {Vector3} axis - Rotation axis.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} Object with 'camera' field containing transformation matrix resulting from the operation to be applied to the camera.\n\t */\n\trotate( axis, angle ) {\n\n\t\tconst point = this._gizmos.position; //rotation center\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\t\tthis._rotationMatrix.makeRotationAxis( axis, - angle );\n\n\t\t//rotate camera\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Copy the current state to clipboard (as a readable JSON text).\n\t */\n\tcopyState() {\n\n\t\tlet state;\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraFov: this.object.fov,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tnavigator.clipboard.writeText( state );\n\n\t}\n\n\t/**\n\t * Set the controls state from the clipboard, assumes that the clipboard stores a JSON\n\t * text as saved from `copyState()`.\n\t */\n\tpasteState() {\n\n\t\tconst self = this;\n\t\tnavigator.clipboard.readText().then( function resolved( value ) {\n\n\t\t\tself.setStateFromJSON( value );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Saves the current state of the control. This can later be recover with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.object.updateMatrix();\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._target0.copy( this.target );\n\t\tthis._cameraMatrixState0.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState0.copy( this._gizmos.matrix );\n\t\tthis._nearPos = this.object.near;\n\t\tthis._farPos = this.object.far;\n\t\tthis._zoom0 = this.object.zoom;\n\t\tthis._up0.copy( this.object.up );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fov0 = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs uniform scale operation around a given point.\n\t *\n\t * @private\n\t * @param {number} size - Scale factor.\n\t * @param {Vector3} point - Point around which scale.\n\t * @param {boolean} scaleGizmos - If gizmos should be scaled (Perspective only).\n\t * @returns {Object} Object with 'camera' and 'gizmo' fields containing transformation matrices resulting from the operation to be applied to the camera and gizmos.\n\t */\n\tscale( size, point, scaleGizmos = true ) {\n\n\t\t_scalePointTemp.copy( point );\n\t\tlet sizeInverse = 1 / size;\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//camera zoom\n\t\t\tthis.object.zoom = this._zoomState;\n\t\t\tthis.object.zoom *= size;\n\n\t\t\t//check min and max zoom\n\t\t\tif ( this.object.zoom > this.maxZoom ) {\n\n\t\t\t\tthis.object.zoom = this.maxZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.maxZoom;\n\n\t\t\t} else if ( this.object.zoom < this.minZoom ) {\n\n\t\t\t\tthis.object.zoom = this.minZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.minZoom;\n\n\t\t\t}\n\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\t//gizmos position\n\n\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\t\t\tthis._translationMatrix.makeTranslation( - this._v3_1.x, - this._v3_1.y, - this._v3_1.z );\n\n\t\t\tthis._m4_2.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z ).multiply( this._scaleMatrix );\n\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\n\n\t\t\t//move camera and gizmos to obtain pinch effect\n\t\t\t_scalePointTemp.sub( this._v3_1 );\n\n\t\t\tconst amount = _scalePointTemp.clone().multiplyScalar( sizeInverse );\n\t\t\t_scalePointTemp.sub( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _scalePointTemp.x, _scalePointTemp.y, _scalePointTemp.z );\n\t\t\tthis._m4_2.premultiply( this._m4_1 );\n\n\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\t\treturn _transformation;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t//move camera\n\t\t\tlet distance = this._v3_1.distanceTo( _scalePointTemp );\n\t\t\tlet amount = distance - ( distance * sizeInverse );\n\n\t\t\t//check min and max distance\n\t\t\tconst newDistance = distance - amount;\n\t\t\tif ( newDistance < this.minDistance ) {\n\n\t\t\t\tsizeInverse = this.minDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t} else if ( newDistance > this.maxDistance ) {\n\n\t\t\t\tsizeInverse = this.maxDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t}\n\n\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_1 ).normalize().multiplyScalar( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\n\t\t\tif ( scaleGizmos ) {\n\n\t\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\t\tconst pos = this._v3_2;\n\n\t\t\t\tdistance = pos.distanceTo( _scalePointTemp );\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\t\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_2 ).normalize().multiplyScalar( amount );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( pos.x, pos.y, pos.z );\n\t\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\n\t\t\t\tthis._m4_2.makeTranslation( _offset.x, _offset.y, _offset.z ).multiply( this._translationMatrix );\n\t\t\t\tthis._m4_2.multiply( this._scaleMatrix );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( - pos.x, - pos.y, - pos.z );\n\n\t\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\t\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\t\t}\n\n\t\t\treturn _transformation;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets camera fov.\n\t *\n\t * @private\n\t * @param {number} value - The FOV to be set.\n\t */\n\tsetFov( value ) {\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = MathUtils.clamp( value, this.minFov, this.maxFov );\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets values in transformation object.\n\t *\n\t * @private\n\t * @param {?Matrix4} [camera=null] - Transformation to be applied to the camera.\n\t * @param {?Matrix4} [gizmos=null] - Transformation to be applied to gizmos.\n\t */\n\tsetTransformationMatrices( camera = null, gizmos = null ) {\n\n\t\tif ( camera != null ) {\n\n\t\t\tif ( _transformation.camera != null ) {\n\n\t\t\t\t_transformation.camera.copy( camera );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.camera = camera.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.camera = null;\n\n\t\t}\n\n\t\tif ( gizmos != null ) {\n\n\t\t\tif ( _transformation.gizmos != null ) {\n\n\t\t\t\t_transformation.gizmos.copy( gizmos );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.gizmos = gizmos.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.gizmos = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Rotates camera around its direction axis passing by a given point by a given angle.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point where the rotation axis is passing trough.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} The computed transformation matrix.\n\t */\n\tzRotate( point, angle ) {\n\n\t\tthis._rotationMatrix.makeRotationAxis( this._rotationAxis, angle );\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState ).sub( point );\t//vector from rotation center to gizmos position\n\t\tthis._v3_2.copy( this._v3_1 ).applyAxisAngle( this._rotationAxis, angle );\t//apply rotation\n\t\tthis._v3_2.sub( this._v3_1 );\n\n\t\tthis._m4_2.makeTranslation( this._v3_2.x, this._v3_2.y, this._v3_2.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `ArcballControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the 3D object surface.\n\t *\n\t * @private\n\t * @param {Vector2} cursor - Cursor coordinates in NDC.\n\t * @param {Camera} camera - Virtual camera.\n\t * @returns {?Vector3} The point of intersection with the model, if exist, null otherwise.\n\t */\n\tunprojectOnObj( cursor, camera ) {\n\n\t\tconst raycaster = this.getRaycaster();\n\t\traycaster.near = camera.near;\n\t\traycaster.far = camera.far;\n\t\traycaster.setFromCamera( cursor, camera );\n\n\t\tconst intersect = raycaster.intersectObjects( this.scene.children, true );\n\n\t\tfor ( let i = 0; i < intersect.length; i ++ ) {\n\n\t\t\tif ( intersect[ i ].object.uuid != this._gizmos.uuid && intersect[ i ].face != null ) {\n\n\t\t\t\treturn intersect[ i ].point.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Unproject the cursor on the trackball surface.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {number} tbRadius - The trackball radius.\n\t * @returns {Vector3} The unprojected point on the trackball surface.\n\t */\n\tunprojectOnTbSurface( camera, cursorX, cursorY, canvas, tbRadius ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\tconst x2 = Math.pow( this._v2_1.x, 2 );\n\t\t\tconst y2 = Math.pow( this._v2_1.y, 2 );\n\t\t\tconst r2 = Math.pow( this._tbRadius, 2 );\n\n\t\t\tif ( x2 + y2 <= r2 * 0.5 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v3_1.setZ( Math.sqrt( r2 - ( x2 + y2 ) ) );\n\n\t\t\t} else {\n\n\t\t\t\t//intersection with hyperboloid\n\t\t\t\tthis._v3_1.setZ( ( r2 * 0.5 ) / ( Math.sqrt( x2 + y2 ) ) );\n\n\t\t\t}\n\n\t\t\treturn this._v3_1;\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\t\t\tconst cameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\t\t\tconst radius2 = Math.pow( tbRadius, 2 );\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( this._v3_1.x, this._v3_1.y, tbRadius );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and trackball surface\n\t\t\t *|y = m * x + q\n\t\t\t *|x^2 + y^2 = r^2\n\t\t\t *\n\t\t\t * (m^2 + 1) * x^2 + (2 * m * q) * x + q^2 - r^2 = 0\n\t\t\t */\n\t\t\tlet a = Math.pow( m, 2 ) + 1;\n\t\t\tlet b = 2 * m * q;\n\t\t\tlet c = Math.pow( q, 2 ) - radius2;\n\t\t\tlet delta = Math.pow( b, 2 ) - ( 4 * a * c );\n\n\t\t\tif ( delta >= 0 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\t\tconst angle = MathUtils.RAD2DEG * this._v2_1.angle();\n\n\t\t\t\tif ( angle >= 45 ) {\n\n\t\t\t\t\t//if angle between intersection point and X' axis is >= 45, return that point\n\t\t\t\t\t//otherwise, calculate intersection point with hyperboloid\n\n\t\t\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\t\t\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\t\t\treturn rayDir;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//intersection with hyperboloid\n\t\t\t/*\n\t\t\t *|y = m * x + q\n\t\t\t *|y = (1 / x) * (r^2 / 2)\n\t\t\t *\n\t\t\t * m * x^2 + q * x - r^2 / 2 = 0\n\t\t\t */\n\n\t\t\ta = m;\n\t\t\tb = q;\n\t\t\tc = - radius2 * 0.5;\n\t\t\tdelta = Math.pow( b, 2 ) - ( 4 * a * c );\n\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the plane passing through the center of the trackball orthogonal to the camera.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {boolean} [initialDistance=false] - If initial distance between camera and gizmos should be used for calculations instead of current (Perspective only).\n\t * @returns {Vector3} The unprojected point on the trackball plane.\n\t */\n\tunprojectOnTbPlane( camera, cursorX, cursorY, canvas, initialDistance = false ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\treturn this._v3_1.clone();\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\t\t\tlet cameraGizmoDistance;\n\n\t\t\tif ( initialDistance ) {\n\n\t\t\t\tcameraGizmoDistance = this._v3_1.setFromMatrixPosition( this._cameraMatrixState0 ).distanceTo( this._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 ) );\n\n\t\t\t} else {\n\n\t\t\t\tcameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and the plane\n\t\t\t *|y = mx + q\n\t\t\t *|y = 0\n\t\t\t *\n\t\t\t * x = -q/m\n\t\t\t*/\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( 0, 0, 0 );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\t\t\tconst x = - q / m;\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( q, 2 ) + Math.pow( x, 2 ) );\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z = 0;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates camera and gizmos state.\n\t *\n\t * @private\n\t */\n\tupdateMatrixState() {\n\n\t\t//update camera and gizmos state\n\t\tthis._cameraMatrixState.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState.copy( this._gizmos.matrix );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis._cameraProjectionState.copy( this.object.projectionMatrix );\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis._zoomState = this.object.zoom;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fovState = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the trackball FSA.\n\t *\n\t * @private\n\t * @param {STATE} newState - New state of the FSA.\n\t * @param {boolean} updateMatrices - If matrices state should be updated.\n\t */\n\tupdateTbState( newState, updateMatrices ) {\n\n\t\tthis._state = newState;\n\t\tif ( updateMatrices ) {\n\n\t\t\tthis.updateMatrixState();\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tif ( this.target.equals( this._currentTarget ) === false ) {\n\n\t\t\tthis._gizmos.position.copy( this.target );\t//for correct radius calculation\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tthis.makeGizmos( this.target, this._tbRadius );\n\t\t\tthis._currentTarget.copy( this.target );\n\n\t\t}\n\n\t\t//check min/max parameters\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//check zoom\n\t\t\tif ( this.object.zoom > this.maxZoom || this.object.zoom < this.minZoom ) {\n\n\t\t\t\tconst newZoom = MathUtils.clamp( this.object.zoom, this.minZoom, this.maxZoom );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newZoom / this.object.zoom, this._gizmos.position, true ) );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t//check distance\n\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\tif ( distance > this.maxDistance + _EPS || distance < this.minDistance - _EPS ) {\n\n\t\t\t\tconst newDistance = MathUtils.clamp( distance, this.minDistance, this.maxDistance );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newDistance / distance, this._gizmos.position ) );\n\t\t\t\tthis.updateMatrixState();\n\n\t\t\t}\n\n\t\t\t//check fov\n\t\t\tif ( this.object.fov < this.minFov || this.object.fov > this.maxFov ) {\n\n\t\t\t\tthis.object.fov = MathUtils.clamp( this.object.fov, this.minFov, this.maxFov );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tconst oldRadius = this._tbRadius;\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( oldRadius < this._tbRadius - _EPS || oldRadius > this._tbRadius + _EPS ) {\n\n\t\t\t\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\t\t\t\tconst newRadius = this._tbRadius / scale;\n\t\t\t\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\t\t\t\tconst points = curve.getPoints( this._curvePts );\n\t\t\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t}\n\n\tsetStateFromJSON( json ) {\n\n\t\tconst state = JSON.parse( json );\n\n\t\tif ( state.arcballState != undefined ) {\n\n\t\t\tthis.target.fromArray( state.arcballState.target );\n\n\t\t\tthis._cameraMatrixState.fromArray( state.arcballState.cameraMatrix.elements );\n\t\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t\tthis.object.up.copy( state.arcballState.cameraUp );\n\t\t\tthis.object.near = state.arcballState.cameraNear;\n\t\t\tthis.object.far = state.arcballState.cameraFar;\n\n\t\t\tthis.object.zoom = state.arcballState.cameraZoom;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis.object.fov = state.arcballState.cameraFov;\n\n\t\t\t}\n\n\t\t\tthis._gizmoMatrixState.fromArray( state.arcballState.gizmoMatrix.elements );\n\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\tthis.object.updateMatrix();\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tconst gizmoTmp = new Matrix4().copy( this._gizmoMatrixState0 );\n\t\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\t\t\tthis._gizmoMatrixState0.copy( gizmoTmp );\n\n\t\t\tthis.object.lookAt( this._gizmos.position );\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n}\n\n//listeners\n\nfunction onWindowResize() {\n\n\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\tconst newRadius = this._tbRadius / scale;\n\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\tconst points = curve.getPoints( this._curvePts );\n\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t}\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( ! this.enabled ) {\n\n\t\treturn;\n\n\t}\n\n\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\tif ( this.mouseActions[ i ].mouse == 2 ) {\n\n\t\t\t//prevent only if button 2 is actually used\n\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerCancel() {\n\n\tthis._touchStart.splice( 0, this._touchStart.length );\n\tthis._touchCurrent.splice( 0, this._touchCurrent.length );\n\tthis._input = INPUT.NONE;\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( event.button == 0 && event.isPrimary ) {\n\n\t\tthis._downValid = true;\n\t\tthis._downEvents.push( event );\n\t\tthis._downStart = performance.now();\n\n\t} else {\n\n\t\tthis._downValid = false;\n\n\t}\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tthis._touchStart.push( event );\n\t\tthis._touchCurrent.push( event );\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.NONE:\n\n\t\t\t\t//singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\n\t\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//doubleStart\n\t\t\t\tthis._input = INPUT.TWO_FINGER;\n\n\t\t\t\tthis.onRotateStart();\n\t\t\t\tthis.onPinchStart();\n\t\t\t\tthis.onDoublePanStart();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//multipleStart\n\t\t\t\tthis._input = INPUT.MULT_FINGER;\n\t\t\t\tthis.onTriplePanStart( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.NONE ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tthis._mouseOp = this.getOpFromAction( event.button, modifier );\n\t\tif ( this._mouseOp != null ) {\n\n\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t//singleStart\n\t\t\tthis._input = INPUT.CURSOR;\n\t\t\tthis._button = event.button;\n\t\t\tthis.onSinglePanStart( event, this._mouseOp );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\n\t\t\t\t//singleMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onSinglePanMove( event, STATE.ROTATE );\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\tconst movement = this.calculatePointersDistance( this._touchCurrent[ 0 ], event ) * this._devPxRatio;\n\n\t\t\t\tif ( movement >= this._switchSensibility ) {\n\n\t\t\t\t\t//singleMove\n\t\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//rotate/pan/pinchMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onRotateMove();\n\t\t\t\tthis.onPinchMove();\n\t\t\t\tthis.onDoublePanMove();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\t//multMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onTriplePanMove( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOpState = this.getOpStateFromAction( this._button, modifier );\n\n\t\tif ( mouseOpState != null ) {\n\n\t\t\tthis.onSinglePanMove( event, mouseOpState );\n\n\t\t}\n\n\t}\n\n\t//checkDistance\n\tif ( this._downValid ) {\n\n\t\tconst movement = this.calculatePointersDistance( this._downEvents[ this._downEvents.length - 1 ], event ) * this._devPxRatio;\n\t\tif ( movement > this._movementThreshold ) {\n\n\t\t\tthis._downValid = false;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tconst nTouch = this._touchCurrent.length;\n\n\t\tfor ( let i = 0; i < nTouch; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1 );\n\t\t\t\tthis._touchStart.splice( i, 1 );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//singleEnd\n\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\tthis.onSinglePanEnd();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//doubleEnd\n\t\t\t\tthis.onDoublePanEnd( event );\n\t\t\t\tthis.onPinchEnd( event );\n\t\t\t\tthis.onRotateEnd( event );\n\n\t\t\t\t//switching to singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER_SWITCHED;\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\tif ( this._touchCurrent.length == 0 ) {\n\n\t\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\t\t//multCancel\n\t\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\t\tthis.onTriplePanEnd();\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis._input = INPUT.NONE;\n\t\tthis.onSinglePanEnd();\n\t\tthis._button = - 1;\n\n\t}\n\n\tif ( event.isPrimary ) {\n\n\t\tif ( this._downValid ) {\n\n\t\t\tconst downTime = event.timeStamp - this._downEvents[ this._downEvents.length - 1 ].timeStamp;\n\n\t\t\tif ( downTime <= this._maxDownTime ) {\n\n\t\t\t\tif ( this._nclicks == 0 ) {\n\n\t\t\t\t\t//first valid click detected\n\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst clickInterval = event.timeStamp - this._clickStart;\n\t\t\t\t\tconst movement = this.calculatePointersDistance( this._downEvents[ 1 ], this._downEvents[ 0 ] ) * this._devPxRatio;\n\n\t\t\t\t\tif ( clickInterval <= this._maxInterval && movement <= this._posThreshold ) {\n\n\t\t\t\t\t\t//second valid click detected\n\t\t\t\t\t\t//fire double tap and reset values\n\t\t\t\t\t\tthis._nclicks = 0;\n\t\t\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\t\t\t\t\t\tthis.onDoubleTap( event );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//new 'first click'\n\t\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\t\tthis._downEvents.shift();\n\t\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis._downValid = false;\n\t\t\t\tthis._nclicks = 0;\n\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis._nclicks = 0;\n\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onWheel( event ) {\n\n\tif ( this.enabled && this.enableZoom ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOp = this.getOpFromAction( 'WHEEL', modifier );\n\n\t\tif ( mouseOp != null ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tconst notchDeltaY = 125; //distance of one notch of mouse wheel\n\t\t\tlet sgn = event.deltaY / notchDeltaY;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\tsize = 1 / this.scaleFactor;\n\n\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\tsize = this.scaleFactor;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseOp ) {\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.cursorZoom && this.enablePan ) {\n\n\t\t\t\t\t\tlet scalePoint;\n\n\t\t\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._gizmos.position );\n\n\t\t\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).add( this._gizmos.position );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, scalePoint ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\n\n\t\t\t\t\t\t//Vertigo effect\n\n\t\t\t\t\t\t//\t  fov / 2\n\t\t\t\t\t\t//\t\t|\\\n\t\t\t\t\t\t//\t\t| \\\n\t\t\t\t\t\t//\t\t|  \\\n\t\t\t\t\t\t//\tx\t|\t\\\n\t\t\t\t\t\t//\t\t| \t \\\n\t\t\t\t\t\t//\t\t| \t  \\\n\t\t\t\t\t\t//\t\t| _ _ _\\\n\t\t\t\t\t\t//\t\t\ty\n\n\t\t\t\t\t\t//check for iOs shift shortcut\n\t\t\t\t\t\tif ( event.deltaX != 0 ) {\n\n\t\t\t\t\t\t\tsgn = event.deltaX / notchDeltaY;\n\n\t\t\t\t\t\t\tsize = 1;\n\n\t\t\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\tlet xNew = x / size;\t//distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this.object.fov * 0.5 );\n\n\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\tif ( newFov > this.maxFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.maxFov;\n\n\t\t\t\t\t\t} else if ( newFov < this.minFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.minFov;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\tsize = x / newDistance;\n\n\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position, false ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { ArcballControls };\n",null,"function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null,null,null,null,null,null],"names":["STATE","IDLE","Symbol","ROTATE","PAN","SCALE","FOV","FOCUS","ZROTATE","TOUCH_MULTI","ANIMATION_FOCUS","ANIMATION_ROTATE","INPUT","NONE","ONE_FINGER","ONE_FINGER_SWITCHED","TWO_FINGER","MULT_FINGER","CURSOR","_center","x","y","_transformation","camera","Matrix4","gizmos","_changeEvent","type","_startEvent","_endEvent","_raycaster","Raycaster","_offset","Vector3","_gizmoMatrixStateTemp","_cameraMatrixStateTemp","_scalePointTemp","_EPS","ArcballControls","Controls","constructor","domElement","scene","super","this","target","_currentTarget","radiusFactor","mouseActions","_mouseOp","_v2_1","Vector2","_v3_1","_v3_2","_m4_1","_m4_2","_quat","Quaternion","_translationMatrix","_rotationMatrix","_scaleMatrix","_rotationAxis","_cameraMatrixState","_cameraProjectionState","_fovState","_upState","_zoomState","_nearPos","_farPos","_gizmoMatrixState","_up0","_zoom0","_fov0","_initialNear","_nearPos0","_initialFar","_farPos0","_cameraMatrixState0","_gizmoMatrixState0","_target0","_button","_touchStart","_touchCurrent","_input","_switchSensibility","_startFingerDistance","_currentFingerDistance","_startFingerRotation","_currentFingerRotation","_devPxRatio","_downValid","_nclicks","_downEvents","_downStart","_clickStart","_maxDownTime","_maxInterval","_posThreshold","_movementThreshold","_currentCursorPosition","_startCursorPosition","_grid","_gridPosition","_gizmos","Group","_curvePts","_timeStart","_animationId","focusAnimationTime","_timePrev","_timeCurrent","_anglePrev","_angleCurrent","_cursorPosPrev","_cursorPosCurr","_wPrev","_wCurr","adjustNearFar","scaleFactor","dampingFactor","wMax","enableAnimations","enableGrid","cursorZoom","minFov","maxFov","rotateSpeed","enablePan","enableRotate","enableZoom","enableGizmos","enableFocus","minDistance","maxDistance","Infinity","minZoom","maxZoom","_tbRadius","_state","setCamera","add","initializeMouseActions","_onContextMenu","onContextMenu","bind","_onWheel","onWheel","_onPointerUp","onPointerUp","_onPointerMove","onPointerMove","_onPointerDown","onPointerDown","_onPointerCancel","onPointerCancel","_onWindowResize","onWindowResize","connect","element","style","touchAction","window","devicePixelRatio","addEventListener","passive","disconnect","removeEventListener","onSinglePanStart","event","operation","enabled","dispatchEvent","setCenter","clientX","clientY","cancelAnimationFrame","activateGizmos","updateTbState","copy","unprojectOnTbPlane","object","drawGrid","unprojectOnTbSurface","performance","now","isPerspectiveCamera","setY","getCursorNDC","onSinglePanMove","opState","restart","applyTransformMatrix","pan","disposeGrid","distance","distanceTo","angle","angleTo","amount","Math","max","rotate","calculateRotationAxis","calculateAngularSpeed","screenNotches","movement","size","pow","setFromMatrixPosition","scale","position","xNew","MathUtils","clamp","tan","DEG2RAD","newFov","RAD2DEG","atan","newDistance","setFov","sub","normalize","multiplyScalar","makeTranslation","z","onSinglePanEnd","w","abs","self","requestAnimationFrame","t","rotationAxis","onRotationAnim","min","onDoubleTap","hitP","unprojectOnObj","onFocusAnim","focus","onDoublePanStart","onDoublePanMove","onDoublePanEnd","onRotateStart","getAngle","getWorldDirection","onRotateMove","rotationPoint","applyQuaternion","quaternion","zoom","zRotate","onRotateEnd","onPinchStart","calculatePointersDistance","onPinchMove","scalePoint","isOrthographicCamera","onPinchEnd","onTriplePanStart","nFingers","length","i","onTriplePanMove","onTriplePanEnd","setMouseAction","compareMouseAction","action1","action2","mouse","key","state","includes","action","splice","push","unsetMouseAction","getOpFromAction","getOpStateFromAction","p1","p2","atan2","PI","updateTouchEvent","pointerId","transformation","premultiply","decompose","updateMatrix","up","calculateTbRadius","cameraDistance","bb","Box3","setFromObject","sphere","Sphere","getBoundingSphere","adjustedNearPosition","radius","center","regularNearPosition","minNearPos","near","adjustedFarPosition","regularFarPosition","minFarPos","far","updateProjectionMatrix","update","p0","t0","t1","sqrt","vec1","vec2","extractRotation","setFromRotationMatrix","crossVectors","clone","halfFovV","fov","halfFovH","top","right","point","color","multiplier","divisions","maxLength","tick","width","left","height","bottom","GridHelper","rotateX","dispose","remove","easeOutCubic","isActive","gizmoX","children","gizmoY","gizmoZ","material","setValues","opacity","cursorX","cursorY","canvas","canvasRect","getBoundingClientRect","setX","getCursorPosition","lookAt","matrix","projectionMatrix","makeGizmos","setGizmosVisible","value","visible","setTbRadius","points","EllipseCurve","getPoints","curveGeometry","BufferGeometry","setFromPoints","gizmo","geometry","tbCenter","tbRadius","curveMaterialX","LineBasicMaterial","fog","transparent","curveMaterialY","curveMaterialZ","Line","rotation","identity","setPosition","makeScale","traverse","isLine","clear","time","cameraMatrix","gizmoMatrix","animTime","w0","deltaTime","adjust","distanceFactor","set","setTransformationMatrices","reset","axis","makeRotationAxis","multiply","copyState","JSON","stringify","arcballState","cameraFar","cameraNear","cameraUp","cameraZoom","cameraFov","navigator","clipboard","writeText","pasteState","readText","then","setStateFromJSON","saveState","scaleGizmos","sizeInverse","pos","applyAxisAngle","getRaycaster","cursor","raycaster","setFromCamera","intersect","intersectObjects","uuid","face","x2","y2","r2","setZ","applyMatrix4","projectionMatrixInverse","rayDir","cameraGizmoDistance","radius2","h","l","m","q","a","b","c","delta","rayLength","initialDistance","updateMatrixState","newState","updateMatrices","equals","newZoom","oldRadius","newRadius","json","parse","undefined","fromArray","elements","gizmoTmp","preventDefault","button","isPrimary","pointerType","modifier","ctrlKey","metaKey","shiftKey","mouseOpState","nTouch","timeStamp","clickInterval","shift","mouseOp","notchDeltaY","sgn","deltaY","deltaX","ExplosionMode","css","ref","insertAt","document","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","EXPLODER_CONSTANTS","PROGRESS","DEFAULT","MIN","MAX","STEP","MULTIPLIER","EXPOSURE","DEFAULT_DURATION","DEFAULT_MAX_DISTANCE","DEFAULT_ADAPT_SIZE","WEIGHTS","BASE","FORCE_FIELD_OFFSET","LIGHTS","SCENE","AMBIENT","HEMISPHERE","MAIN_DIRECTIONAL","BACK_DIRECTIONAL","SIDE_DIRECTIONAL","INTERNAL","DIRECTIONAL","INTERACTION","HIGHLIGHT_COLOR","HOVER_OPACITY","SELECT_OPACITY","EMISSIVE_INTENSITY","DIRECTION","MIN_LENGTH","ANGLE_FACTOR","Z_FACTOR","INDEX_ANGLE","XY_OFFSET","Z_OFFSET","createTextSprite","text","ctx","getContext","beginPath","arc","fillStyle","fill","font","textAlign","textBaseline","fillText","texture","CanvasTexture","SpriteMaterial","map","sprite","Sprite","calculateDirection","objectPosition","getWorldPosition","direction","subVectors","hash","str","charCodeAt","hashString","cos","sin","parent","index","indexOf","calculateFaceCount","model","count","child","isMesh","attributes","floor","getFileName","path","parts","split","isMobile","test","userAgent","innerWidth","ExploderCore","renderer","options","progress","mode","RADIAL","originalPositions","Map","originalRotations","originalScales","explodeDirections","axialDistances","sizeWeights","hierarchicalDepths","modelRadius","onProgressChangeCallback","explodableMeshes","internalLights","duration","createUI","viewport","body","uiStyle","directionStrategy","axialVector","adaptModel","modelUrl","showUpload","showHelpers","showPanel","showProgress","wheelControlExplosion","models","initialModel","adaptModelToScene","box","modelCenter","getCenter","saveOriginalTransforms","setupInternalLighting","getSize","maxDim","newCenter","ambientLight","AmbientLight","hemisphereLight","HemisphereLight","lightGroup","Object3D","light","DirectionalLight","fillLightIntensity","topRightFill","fillTarget","setInternalLightingVisible","forEach","render","setInternalLightingExposure","exposure","intensity","calculateAxialDistances","axialDir","dot","axialSize","mesh","originalPosition","get","dist","traverseAndSave","calculateSizeWeights","calculateHierarchicalDepths","maxDepth","depths","depth","maxVolume","volumes","Mesh","boundingBox","computeBoundingBox","volume","vol","setModel","updateInternalLighting","lightDist","directions","dirLights","filter","setProgress","updateExplodedPositions","baseDistance","targetWorldPosition","AXIAL","axialDistance","NORMALIZED_RADIAL","relativePos","SIZE_WEIGHTED","weight","HIERARCHICAL","depthWeight","FORCE_FIELD","originalPos","forceMagnitude","worldToLocal","setMode","getMode","setAxialVector","vector","getAxialVector","resetToOriginalPositions","originalRotation","originalScale","targetPosition","setProgressChangeCallback","callback","setMultiplier","getMultiplier","getProgress","getModelCenter","getOptions","InteractionManager","mouseDownPos","dragThreshold","gridHelper","axesHelper","axisLabels","selectedMesh","hoveredMesh","originalMaterialState","onSelect","onMouseDown","onClick","onDoubleClick","onMouseMove","initEventListeners","initHelpers","setOnSelect","AxesHelper","labelX","labelY","labelZ","setHelperVisibility","rect","meshIntersect","find","toggleMeshVisibility","deselectMesh","showAllMeshes","obj","unhoverMesh","hoverMesh","key0","has","Array","isArray","mat","MeshStandardMaterial","emissive","emissiveIntensity","restoreMesh","selectMesh","highlightMesh","original","delete","label","smoothStep","roundedRectSDF","qx","qy","LiquidGlass","targetElement","mouseUsed","canvasDPI","id","random","toString","substr","fragment","uv","ix","iy","displacement","scaled","init","svg","createElementNS","setAttribute","defs","feImage","feDisplacementMap","context","updateSize","backdropFilter","webkitBackdropFilter","e","mouseProxy","Proxy","prop","data","Uint8ClampedArray","maxScale","rawValues","dx","dy","r","g","putImageData","ImageData","setAttributeNS","toDataURL","ExploderPanel","container","onMultiplierChange","onExposureChange","onModeChange","onAxialChange","onModelChange","onHelperVisibilityChange","onReset","initialMultiplier","initialExposure","initialMode","initialAxial","initialHelperVisible","modeButtons","styles","section","sectionHeader","title","labelContainer","slider","hint","grid","select","buttonReset","buttonResetHover","buttonResetActive","zoomContainer","zoomButton","zoomButtonHover","zoomButtonActive","className","applyStyle","header","innerHTML","contentWrapper","hasModels","modelSection","createSection","modelSelect","option","modelPath","textContent","pop","selected","uploadBtn","fileInput","querySelector","onclick","click","onchange","file","files","url","URL","createObjectURL","multiplierSection","multiplierLabelWrap","createLabelWrapper","multiplierDisplay","toFixed","multiplierSlider","step","exposureSection","exposureLabelWrap","exposureDisplay","exposureSlider","modeSection","modeGrid","icon","btn","handleModeClick","axialContainer","axialSelect","v","opt","helperSection","helperRow","helperToggle","checked","accentColor","helperText","footer","resetButton","onmouseenter","onmouseleave","onmousedown","onmouseup","oninput","parseFloat","updateMultiplier","updateExposure","Number","liquidGlass","offsetHeight","ResizeObserver","observe","sec","hintEl","wrap","updateMode","el","existing","getAttribute","show","display","hide","_progress","classList","updateHelperVisibility","updateAxialVector","parentNode","removeChild","ExploderHUD","onProgressChange","initialProgress","card","progressContainer","valueDisplay","round","old","ExploderInfoHUD","initialModelName","initialFaceCount","nameCard","content","modelNameDisplay","faceCountDisplay","toLocaleString","statusLabel","statusText","liquidGlass1","liquidGlass2","name","faceCount","setModelName","setFaceCount","CompositeUI","modelName","panel","hud","infoHUD","createScrollGuide","updateResponsiveState","resizeHandler","scrollGuide","innerText","stopPropagation","updateModel","updateInfo","Error","getContainer","HTMLElement","getComputedStyle","ExploderZoomControls","controls","zoomStep","zoomInBtn","zoomOutBtn","applyLiquidGlass","addHoverEffects","factor","currentStyle","replace","arg1","core","ui","zoomControls","interactionManager","boundOnWheel","initCore","initializeAutoMode","containerElement","console","warn","Scene","background","Color","PerspectiveCamera","clientWidth","clientHeight","WebGLRenderer","antialias","alpha","logarithmicDepthBuffer","setSize","setPixelRatio","toneMapping","ACESFilmicToneMapping","toneMappingExposure","shadowMap","cameraLightGroup","mainSun","castShadow","mainTarget","fillLight","extraFillLight","extraTarget","finalUrl","GLTFLoader","load","gltf","loadedModel","node","receiveShadow","animate","onResize","aspect","initialHelperVisibility","handleHelperVisibilityChange","setExposure","handleModelChange","currentProgress","newProgress","onModelChangeCallback","loadModelAuto","oldModel","newModel","startsWith","setTimeout","revokeObjectURL","onHelperVisibilityChangeCallback","setModelChangeCallback","setHelperVisibilityChangeCallback","getInteractionManager","showUI","hideUI"],"mappings":"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"}