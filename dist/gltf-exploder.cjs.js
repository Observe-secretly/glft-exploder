/*!
 * gltf-exploder v0.1.0
 * (c) 2026 Your Name
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("three");!function(e){e.RADIAL="radial",e.AXIAL="axial",e.NORMALIZED_RADIAL="normalized_radial",e.SIZE_WEIGHTED="size_weighted",e.HIERARCHICAL="hierarchical",e.FORCE_FIELD="force_field"}(e||(e={}));const i={PROGRESS:{DEFAULT:0,MIN:0,MAX:1,STEP:.01},MULTIPLIER:{DEFAULT:1,MIN:.1,MAX:5,STEP:.1},EXPOSURE:{DEFAULT:2,MIN:.1,MAX:6,STEP:.1},DEFAULT_DURATION:1e3,DEFAULT_MAX_DISTANCE:2,WEIGHTS:{BASE:.5,SCALE:1.5,FORCE_FIELD_OFFSET:.2}};function s(e,i){const s=new t.Vector3;e.getWorldPosition(s);const n=(new t.Vector3).subVectors(s,i);if(n.length()<.001){const t=function(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t%360)}(e.uuid||"");if(n.set(Math.cos(.017453292519943295*t),Math.sin(.017453292519943295*t),Math.cos(.1*t)),e.parent){const t=e.parent.children.indexOf(e);t>=0&&(n.x+=.2*Math.cos(.7*t),n.y+=.2*Math.sin(.7*t),n.z+=.1*(t%3-1))}}return n.normalize()}function n(e,t,i){return Math.max(t,Math.min(i,e))}class l{constructor(n,l,a,o,r={}){this.progress=i.PROGRESS.DEFAULT,this.multiplier=i.MULTIPLIER.DEFAULT,this.mode=e.RADIAL,this.originalPositions=new Map,this.originalRotations=new Map,this.originalScales=new Map,this.explodeDirections=new Map,this.axialDistances=new Map,this.sizeWeights=new Map,this.hierarchicalDepths=new Map,this.modelRadius=1,this.onProgressChangeCallback=null,this.explodableMeshes=[],this.internalLights=[],this.model=n,this.scene=l,this.camera=a,this.renderer=o,this.options={maxDistance:r.maxDistance??i.DEFAULT_MAX_DISTANCE,duration:r.duration??i.DEFAULT_DURATION,createUI:r.createUI??!0,container:r.container??document.body,uiType:r.uiType??"slider",uiStyle:r.uiStyle??{width:"200px",height:"30px",position:"bottom"},directionStrategy:r.directionStrategy??s,mode:r.mode??e.RADIAL,axialVector:r.axialVector??new t.Vector3(0,1,0),models:r.models??[],initialModel:r.initialModel??""},this.mode=this.options.mode;const h=(new t.Box3).setFromObject(this.model);this.modelCenter=h.getCenter(new t.Vector3);const d=h.getBoundingSphere(new t.Sphere);this.modelRadius=d.radius||1,this.saveOriginalTransforms(this.model),this.setupInternalLighting()}setupInternalLighting(){const e=new t.AmbientLight(16777215,.4);this.scene.add(e),this.internalLights.push(e);const i=new t.HemisphereLight(16777215,4473924,.4);this.scene.add(i),this.internalLights.push(i);const s=3*this.modelRadius;[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].forEach(([e,i,n])=>{const l=new t.DirectionalLight(16777215,.8);l.position.set(this.modelCenter.x+e*s,this.modelCenter.y+i*s,this.modelCenter.z+n*s),l.target=this.model,this.scene.add(l),this.internalLights.push(l)})}calculateAxialDistances(){const e=this.options.axialVector.clone().normalize(),i=(new t.Box3).setFromObject(this.model),s=i.min.dot(e),n=i.max.dot(e),l=Math.abs(n-s),a=l>1e-4?1/l:1;for(const t of this.explodableMeshes){const i=this.originalPositions.get(t);if(i){const s=i.clone().sub(this.modelCenter).dot(e);this.axialDistances.set(t,s*a)}}}saveOriginalTransforms(e){this.traverseAndSave(e),this.calculateAxialDistances(),this.calculateSizeWeights(),this.calculateHierarchicalDepths()}calculateHierarchicalDepths(){let e=0;const t=new Map;for(const i of this.explodableMeshes){let s=0,n=i.parent;for(;n&&n!==this.model;)s++,n=n.parent;t.set(i,s),e=Math.max(e,s)}const s=e>0?1/e:1;for(const[e,n]of t)this.hierarchicalDepths.set(e,i.WEIGHTS.BASE+n*s*i.WEIGHTS.SCALE)}calculateSizeWeights(){let e=0;const s=new Map;for(const i of this.explodableMeshes)if(i instanceof t.Mesh){const n=i.geometry;n.boundingBox||n.computeBoundingBox();const l=n.boundingBox;if(l){const n=new t.Vector3;l.getSize(n);const a=n.x*n.y*n.z;s.set(i,a),e=Math.max(e,a)}}const n=e>0?1/e:1;for(const[e,t]of s)this.sizeWeights.set(e,i.WEIGHTS.BASE+t*n*i.WEIGHTS.SCALE)}traverseAndSave(e){if(!e.visible)return;const i=new t.Vector3;if(e.getWorldPosition(i),this.originalPositions.set(e,i.clone()),e.rotation&&this.originalRotations.set(e,e.rotation.clone()),e.scale&&this.originalScales.set(e,e.scale.clone()),"isMesh"in e&&!0===e.isMesh){this.explodableMeshes.push(e);const t=this.options.directionStrategy(e,this.modelCenter);this.explodeDirections.set(e,t)}e.children.forEach(e=>{this.traverseAndSave(e)})}setProgress(e){this.progress=n(e,i.PROGRESS.MIN,i.PROGRESS.MAX),this.updateExplodedPositions(),this.onProgressChangeCallback&&this.onProgressChangeCallback(this.progress),this.renderer.render(this.scene,this.camera)}updateExplodedPositions(){for(const t of this.explodableMeshes){const s=this.originalPositions.get(t),n=this.explodeDirections.get(t);if(s&&n){const l=this.options.maxDistance*this.progress*this.multiplier,a=s.clone();switch(this.mode){case e.RADIAL:a.add(n.clone().multiplyScalar(l));break;case e.AXIAL:{const e=this.axialDistances.get(t)||0,i=this.options.axialVector.clone().normalize();a.add(i.multiplyScalar(e*this.progress*this.multiplier));break}case e.NORMALIZED_RADIAL:{const e=s.clone().sub(this.modelCenter);a.add(e.multiplyScalar(this.progress*this.multiplier));break}case e.SIZE_WEIGHTED:{const e=this.sizeWeights.get(t)||1;a.add(n.clone().multiplyScalar(l*e));break}case e.HIERARCHICAL:{const e=this.hierarchicalDepths.get(t)||1;a.add(n.clone().multiplyScalar(l*e));break}case e.FORCE_FIELD:{const e=this.originalPositions.get(t);if(e){const t=1/(e.clone().sub(this.modelCenter).length()/this.modelRadius+i.WEIGHTS.FORCE_FIELD_OFFSET);a.add(n.clone().multiplyScalar(l*t))}break}}t.parent&&t.parent.worldToLocal(a),t.position.copy(a)}}}setMode(e){this.mode=e,this.updateExplodedPositions(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}getMode(){return this.mode}setAxialVector(e){this.options.axialVector.copy(e),this.calculateAxialDistances(),this.updateExplodedPositions(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}getAxialVector(){return this.options.axialVector}reset(){this.progress=0,this.resetToOriginalPositions(),this.onProgressChangeCallback&&this.onProgressChangeCallback(this.progress)}resetToOriginalPositions(){for(const e of this.explodableMeshes){const t=this.originalPositions.get(e),i=this.originalRotations.get(e),s=this.originalScales.get(e);if(t){const i=t.clone();e.parent&&e.parent.worldToLocal(i),e.position.copy(i)}i&&e.rotation&&e.rotation.set(i.x,i.y,i.z),s&&e.scale&&e.scale.set(s.x,s.y,s.z)}}setProgressChangeCallback(e){this.onProgressChangeCallback=e}setMultiplier(e){this.multiplier=n(e,i.MULTIPLIER.MIN,i.MULTIPLIER.MAX),this.updateExplodedPositions(),this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}getMultiplier(){return this.multiplier}getProgress(){return this.progress}getModelCenter(){return this.modelCenter.clone()}getOptions(){return this.options}dispose(){this.reset(),this.originalPositions.clear(),this.originalRotations.clear(),this.originalScales.clear(),this.explodeDirections.clear(),this.explodableMeshes=[],this.onProgressChangeCallback=null}}class a{constructor(e,t,s=i.PROGRESS.DEFAULT,n={}){this.handleSliderChange=e=>{const t=parseFloat(e.target.value);this.onProgressChange(t)},this.handleReset=()=>{this.update(0),this.onProgressChange(0)},this.onProgressChange=t,this.styles={container:"\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      width: 260px;\n      border-radius: 4px;\n      padding: 16px;\n      z-index: 1000;\n      font-family: -apple-system, sans-serif;\n    ",label:"\n      font-size: 12px;\n      margin-bottom: 6px;\n      display: block;\n    ",slider:"\n      width: 100%;\n      height: 4px;\n      cursor: pointer;\n      margin: 8px 0;\n    ",select:"\n      width: 100%;\n      padding: 4px 8px;\n      border: 1px solid rgba(226, 221, 221, 0.86);\n      border-radius: 2px;\n      font-size: 12px;\n      outline: none;\n      margin-bottom: 12px;\n    ",group:"\n      margin-bottom: 16px;\n    ",value:"\n      font-size: 12px;\n      font-weight: 500;\n      float: right;\n    ",button:"\n      padding: 6px 12px;\n      border: 1px solid rgba(226, 221, 221, 0.86);\n      border-radius: 2px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: all 0.2s;\n      outline: none;\n    "},this.element=document.createElement("div");!e||e===document.body||"body"===e?this.applyStyle(this.element,this.styles.container):this.applyStyle(this.element,"\n        width: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        border-radius: 4px;\n        padding: 12px 16px;\n        color: #ffffff;\n        font-family: -apple-system, sans-serif;\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      "),this.label=document.createElement("label"),this.label.textContent="爆炸视图",this.applyStyle(this.label,this.styles.label),this.element.appendChild(this.label),this.slider=document.createElement("input"),this.slider.type="range",this.slider.min=i.PROGRESS.MIN.toString(),this.slider.max=i.PROGRESS.MAX.toString(),this.slider.step=i.PROGRESS.STEP.toString(),this.slider.value=s.toString(),this.applyStyle(this.slider,this.styles.slider),this.element.appendChild(this.slider),this.resetButton=document.createElement("button"),this.resetButton.textContent="重置",this.applyStyle(this.resetButton,this.styles.button),this.element.appendChild(this.resetButton),this.slider.addEventListener("input",this.handleSliderChange),this.resetButton.addEventListener("click",this.handleReset);const l="string"==typeof e?document.querySelector(e):e;l?l.appendChild(this.element):document.body.appendChild(this.element)}show(){this.element.style.display="block"}hide(){this.element.style.display="none"}update(e){this.slider.value=e.toString()}dispose(){this.slider.removeEventListener("input",this.handleSliderChange),this.resetButton.removeEventListener("click",this.handleReset),this.element.parentNode&&this.element.parentNode.removeChild(this.element)}applyStyle(e,t){const i=t.replace(/\s+/g," ").trim();e.style.cssText=i}}class o{constructor(s,n,l,a,o,r,h,d,p=i.PROGRESS.DEFAULT,c=i.MULTIPLIER.DEFAULT,u=i.EXPOSURE.DEFAULT,g=e.RADIAL,m=new t.Vector3(0,1,0),x=!0,y=[],S,E={}){this.handleModelChange=e=>{const t=e.target.value;this.onModelChange&&this.onModelChange(t)},this.handleSliderChange=e=>{const t=parseFloat(e.target.value);this.valueDisplay.textContent=`${Math.round(100*t)}%`,this.onProgressChange(t)},this.handleMultiplierChange=e=>{const t=parseFloat(e.target.value);this.multiplierDisplay.textContent=t.toFixed(1),this.onMultiplierChange(t)},this.handleExposureChange=e=>{const t=parseFloat(e.target.value);this.exposureDisplay.textContent=t.toFixed(1),this.onExposureChange&&this.onExposureChange(t)},this.handleModeChange=t=>{const i=t.target.value;this.axialContainer&&(this.axialContainer.style.display=i===e.AXIAL?"flex":"none"),this.onModeChange&&this.onModeChange(i)},this.handleAxialChange=e=>{const i=e.target.value,[s,n,l]=i.split(",").map(Number);this.onAxialChange&&this.onAxialChange(new t.Vector3(s,n,l))},this.handleHelperToggle=e=>{const t=e.target.checked;this.onHelperVisibilityChange&&this.onHelperVisibilityChange(t)},this.handleReset=()=>{this.update(0),this.onProgressChange(0)},this.handleMax=()=>{this.update(1),this.onProgressChange(1)},this.onProgressChange=n,this.onMultiplierChange=l,this.onExposureChange=a,this.onModeChange=o,this.onAxialChange=r,this.onModelChange=h,this.onHelperVisibilityChange=d,this.styles={container:"\n      position: absolute;\n      top: 20px;\n      right: 20px;\n      width: 260px;\n      border-radius: 4px;\n      padding: 16px;\n      z-index: 1000;\n      font-family: -apple-system, sans-serif;\n    ",label:"\n      font-size: 12px;\n      margin-bottom: 6px;\n      display: block;\n    ",slider:"\n      width: 100%;\n      height: 4px;\n      cursor: pointer;\n      margin: 8px 0;\n    ",select:"\n      width: 100%;\n      padding: 4px 8px;\n      border: 1px solid rgba(226, 221, 221, 0.86);\n      border-radius: 2px;\n      font-size: 12px;\n      outline: none;\n      margin-bottom: 12px;\n    ",group:"\n      margin-bottom: 16px;\n    ",value:"\n      font-size: 12px;\n      font-weight: 500;\n      float: right;\n    ",button:"\n      padding: 6px 12px;\n      border: 1px solid rgba(226, 221, 221, 0.86);\n      border-radius: 2px;\n      font-size: 12px;\n      cursor: pointer;\n      transition: all 0.2s;\n      outline: none;\n    "},this.element=document.createElement("div");const C=!s||s===document.body||"body"===s;C?this.applyStyle(this.element,this.styles.container):this.applyStyle(this.element,"\n        width: 100%;\n        border-radius: 4px;\n        padding: 16px;\n        font-family: -apple-system, sans-serif;\n        box-sizing: border-box;\n      ");const b=document.createElement("h3");b.textContent="模型爆炸视图控制",this.applyStyle(b,"\n      margin: 0 0 16px 0;\n      font-size: 14px;\n      font-weight: 600;\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    "),this.element.appendChild(b);const M=document.createElement("div");this.applyStyle(M,`\n      display: flex;\n      flex-direction: column;\n      gap: 15px;\n      ${C?"":"padding-top: 5px;"}\n    `),this.element.appendChild(M),this.modelContainer=document.createElement("div"),this.applyStyle(this.modelContainer,`\n      display: ${y&&y.length>0?"flex":"none"};\n      flex-direction: column;\n      width: 100%;\n    `),M.appendChild(this.modelContainer);const f=document.createElement("label");f.textContent="选择模型:",this.applyStyle(f,this.styles.label),this.modelContainer.appendChild(f),this.modelSelect=document.createElement("select"),this.applyStyle(this.modelSelect,this.styles.select),y.forEach(e=>{const t=document.createElement("option"),i="string"==typeof e?e:e.value,s="string"==typeof e?e.split("/").pop()||e:e.label;t.value=i,t.textContent=s,i===S&&(t.selected=!0),this.modelSelect.appendChild(t)}),this.modelContainer.appendChild(this.modelSelect);const L=document.createElement("div");this.applyStyle(L,"\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n    "),M.appendChild(L);const A=document.createElement("div");this.applyStyle(A,"\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 5px;\n    "),L.appendChild(A);const v=document.createElement("label");v.textContent="爆炸进度:",this.applyStyle(v,this.styles.label),A.appendChild(v),this.valueDisplay=document.createElement("span"),this.valueDisplay.textContent=`${Math.round(100*p)}%`,this.applyStyle(this.valueDisplay,this.styles.label),A.appendChild(this.valueDisplay),this.slider=document.createElement("input"),this.slider.type="range",this.slider.min=i.PROGRESS.MIN.toString(),this.slider.max=i.PROGRESS.MAX.toString(),this.slider.step=i.PROGRESS.STEP.toString(),this.slider.value=p.toString(),this.applyStyle(this.slider,this.styles.slider),L.appendChild(this.slider);const I=document.createElement("div");this.applyStyle(I,"\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n    "),M.appendChild(I);const R=document.createElement("div");this.applyStyle(R,"\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 5px;\n    "),I.appendChild(R);const D=document.createElement("label");D.textContent="爆炸系数:",this.applyStyle(D,this.styles.label),R.appendChild(D),this.multiplierDisplay=document.createElement("span"),this.multiplierDisplay.textContent=c.toFixed(1),this.applyStyle(this.multiplierDisplay,this.styles.label),R.appendChild(this.multiplierDisplay),this.multiplierSlider=document.createElement("input"),this.multiplierSlider.type="range",this.multiplierSlider.min=i.MULTIPLIER.MIN.toString(),this.multiplierSlider.max=i.MULTIPLIER.MAX.toString(),this.multiplierSlider.step=i.MULTIPLIER.STEP.toString(),this.multiplierSlider.value=c.toString(),this.applyStyle(this.multiplierSlider,this.styles.slider),I.appendChild(this.multiplierSlider);const P=document.createElement("div");this.applyStyle(P,"\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n    "),M.appendChild(P);const T=document.createElement("div");this.applyStyle(T,"\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 5px;\n    "),P.appendChild(T);const w=document.createElement("label");w.textContent="渲染亮度:",this.applyStyle(w,this.styles.label),T.appendChild(w),this.exposureDisplay=document.createElement("span"),this.exposureDisplay.textContent=u.toFixed(1),this.applyStyle(this.exposureDisplay,this.styles.label),T.appendChild(this.exposureDisplay),this.exposureSlider=document.createElement("input"),this.exposureSlider.type="range",this.exposureSlider.min=i.EXPOSURE.MIN.toString(),this.exposureSlider.max=i.EXPOSURE.MAX.toString(),this.exposureSlider.step=i.EXPOSURE.STEP.toString(),this.exposureSlider.value=u.toString(),this.applyStyle(this.exposureSlider,this.styles.slider),P.appendChild(this.exposureSlider);const U=document.createElement("div");this.applyStyle(U,"\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n    "),M.appendChild(U);const F=document.createElement("label");F.textContent="爆炸模式:",this.applyStyle(F,this.styles.label),U.appendChild(F),this.modeSelect=document.createElement("select"),this.applyStyle(this.modeSelect,this.styles.select);[{value:e.RADIAL,label:"径向爆炸"},{value:e.AXIAL,label:"轴向分层"},{value:e.NORMALIZED_RADIAL,label:"归一化径向"},{value:e.SIZE_WEIGHTED,label:"尺寸加权"},{value:e.HIERARCHICAL,label:"装配树分级"},{value:e.FORCE_FIELD,label:"力场式爆炸"}].forEach(e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label,e.value===g&&(t.selected=!0),this.modeSelect.appendChild(t)}),U.appendChild(this.modeSelect),this.axialContainer=document.createElement("div"),this.applyStyle(this.axialContainer,`\n      display: ${g===e.AXIAL?"flex":"none"};\n      flex-direction: column;\n      width: 100%;\n      margin-top: 10px;\n    `),M.appendChild(this.axialContainer);const O=document.createElement("label");O.textContent="爆炸轴向:",this.applyStyle(O,this.styles.label),this.axialContainer.appendChild(O),this.axialSelect=document.createElement("select"),this.applyStyle(this.axialSelect,this.styles.select);[{value:"0,1,0",label:"Y 轴 (垂直)"},{value:"1,0,0",label:"X 轴 (横向)"},{value:"0,0,1",label:"Z 轴 (纵向)"}].forEach(e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label;const i=`${m.x},${m.y},${m.z}`;e.value===i&&(t.selected=!0),this.axialSelect.appendChild(t)}),this.axialContainer.appendChild(this.axialSelect);const k=document.createElement("div");this.applyStyle(k,"\n      display: flex;\n      align-items: center;\n      width: 100%;\n      margin-top: 5px;\n      margin-bottom: 5px;\n    "),M.appendChild(k),this.helperToggle=document.createElement("input"),this.helperToggle.type="checkbox",this.helperToggle.id="helper-visibility-toggle",this.helperToggle.checked=x,this.applyStyle(this.helperToggle,"\n      margin-right: 8px;\n      cursor: pointer;\n    "),k.appendChild(this.helperToggle);const V=document.createElement("label");V.htmlFor="helper-visibility-toggle",V.textContent="显示网格和轴标签",this.applyStyle(V,"\n      font-size: 12px;\n      cursor: pointer;\n      user-select: none;\n    "),k.appendChild(V);const z=document.createElement("div");this.applyStyle(z,"\n      display: flex;\n      justify-content: space-between;\n      margin-top: 5px;\n    "),M.appendChild(z),this.resetButton=document.createElement("button"),this.resetButton.textContent="重置视图",this.applyStyle(this.resetButton,`\n      ${this.styles.button}\n      flex: 1;\n      margin-right: 8px;\n    `),z.appendChild(this.resetButton);const H=document.createElement("button");H.textContent="最大化",this.applyStyle(H,`\n      ${this.styles.button}\n      flex: 1;\n    `),z.appendChild(H),this.slider.addEventListener("input",this.handleSliderChange),this.multiplierSlider.addEventListener("input",this.handleMultiplierChange),this.exposureSlider.addEventListener("input",this.handleExposureChange),this.modeSelect.addEventListener("change",this.handleModeChange),this.modelSelect.addEventListener("change",this.handleModelChange),this.axialSelect.addEventListener("change",this.handleAxialChange),this.helperToggle.addEventListener("change",this.handleHelperToggle),this.resetButton.addEventListener("click",this.handleReset),H.addEventListener("click",this.handleMax);const G="string"==typeof s?document.querySelector(s):s;G?G.appendChild(this.element):document.body.appendChild(this.element)}show(){this.element.style.display="block"}hide(){this.element.style.display="none"}update(e){this.slider.value=e.toString(),this.valueDisplay.textContent=`${Math.round(100*e)}%`}updateMultiplier(e){this.multiplierSlider.value=e.toString(),this.multiplierDisplay.textContent=e.toFixed(1)}updateExposure(e){this.exposureSlider.value=e.toString(),this.exposureDisplay.textContent=e.toFixed(1)}updateMode(t){this.modeSelect.value=t,this.axialContainer&&(this.axialContainer.style.display=t===e.AXIAL?"flex":"none")}updateAxialVector(e){this.axialSelect&&(this.axialSelect.value=`${e.x},${e.y},${e.z}`)}dispose(){this.slider.removeEventListener("input",this.handleSliderChange),this.multiplierSlider.removeEventListener("input",this.handleMultiplierChange),this.exposureSlider.removeEventListener("input",this.handleExposureChange),this.modeSelect.removeEventListener("change",this.handleModeChange),this.modelSelect.removeEventListener("change",this.handleModelChange),this.axialSelect.removeEventListener("change",this.handleAxialChange),this.resetButton.removeEventListener("click",this.handleReset),this.element.parentNode&&this.element.parentNode.removeChild(this.element)}applyStyle(e,t){const i=t.replace(/\s+/g," ").trim();e.style.cssText=i}}var r;function h(s,n,l,r,h,d,p,c,u=i.PROGRESS.DEFAULT,g=i.MULTIPLIER.DEFAULT,m=i.EXPOSURE.DEFAULT,x=e.RADIAL,y=new t.Vector3(0,1,0),S=!0){if(!1===s.createUI)return null;const E=s.container?function(e){if("string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error(`找不到容器元素: ${e}`);return t}return e}(s.container):document.body;switch(s.uiType||exports.UIType.SLIDER){case exports.UIType.PANEL:return new o(E,n,l,r,h,d,p,c,u,g,m,x,y,S,s.models,s.initialModel,s.uiStyle);case exports.UIType.SLIDER:default:return new a(E,n,u,s.uiStyle)}}exports.UIType=void 0,(r=exports.UIType||(exports.UIType={})).SLIDER="slider",r.PANEL="panel";exports.GLTFExploder=class{constructor(e,t,s,n,a={}){this.ui=null,this.renderer=n,this.core=new l(e,t,s,n,a),!1!==a.createUI&&(this.ui=h(a,this.setProgress.bind(this),this.setMultiplier.bind(this),this.setExposure.bind(this),this.setMode.bind(this),this.setAxialVector.bind(this),this.handleModelChange.bind(this),this.handleHelperVisibilityChange.bind(this),i.PROGRESS.DEFAULT,i.MULTIPLIER.DEFAULT,n.toneMappingExposure,this.core.getMode(),this.core.getAxialVector(),!0))}handleModelChange(e){this.onModelChangeCallback&&this.onModelChangeCallback(e)}handleHelperVisibilityChange(e){this.onHelperVisibilityChangeCallback&&this.onHelperVisibilityChangeCallback(e)}setModelChangeCallback(e){this.onModelChangeCallback=e}setHelperVisibilityChangeCallback(e){this.onHelperVisibilityChangeCallback=e}setProgress(e){this.core.setProgress(e),this.ui&&this.ui.update(e)}setMultiplier(e){this.core.setMultiplier(e),this.ui&&this.ui.updateMultiplier&&this.ui.updateMultiplier(e)}setExposure(e){this.renderer&&(this.renderer.toneMappingExposure=e,this.ui&&this.ui.updateExposure&&this.ui.updateExposure(e))}setMode(e){this.core.setMode(e),this.ui&&this.ui.updateMode&&this.ui.updateMode(e)}setAxialVector(e){this.core.setAxialVector(e),this.ui&&this.ui.updateAxialVector&&this.ui.updateAxialVector(e)}reset(){this.core.reset(),this.ui&&(this.ui.update(i.PROGRESS.DEFAULT),this.ui.updateMultiplier&&this.ui.updateMultiplier(i.MULTIPLIER.DEFAULT),this.ui.updateMode&&this.ui.updateMode(e.RADIAL))}setProgressChangeCallback(e){this.core.setProgressChangeCallback(e)}getProgress(){return this.core.getProgress()}showUI(){this.ui&&this.ui.show()}hideUI(){this.ui&&this.ui.hide()}dispose(){this.core.dispose(),this.ui&&(this.ui.dispose(),this.ui=null)}};
//# sourceMappingURL=gltf-exploder.cjs.js.map
