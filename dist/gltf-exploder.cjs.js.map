{"version":3,"file":"gltf-exploder.cjs.js","sources":["../node_modules/three/examples/jsm/controls/ArcballControls.js","../src/core/types.ts","../node_modules/style-inject/dist/style-inject.es.js","../src/core/utils.ts","../src/core/index.ts","../src/ui/LiquidGlass.ts","../src/ui/ExploderPanel.ts","../src/ui/styles.ts","../src/ui/ExploderHUD.ts","../src/ui/ExploderInfoHUD.ts","../src/ui/index.ts","../src/ui/ExploderZoomControls.ts","../src/index.ts"],"sourcesContent":["import {\n\tControls,\n\tGridHelper,\n\tEllipseCurve,\n\tBufferGeometry,\n\tLine,\n\tLineBasicMaterial,\n\tRaycaster,\n\tGroup,\n\tBox3,\n\tSphere,\n\tQuaternion,\n\tVector2,\n\tVector3,\n\tMatrix4,\n\tMathUtils\n} from 'three';\n\n//trackball state\nconst STATE = {\n\n\tIDLE: Symbol(),\n\tROTATE: Symbol(),\n\tPAN: Symbol(),\n\tSCALE: Symbol(),\n\tFOV: Symbol(),\n\tFOCUS: Symbol(),\n\tZROTATE: Symbol(),\n\tTOUCH_MULTI: Symbol(),\n\tANIMATION_FOCUS: Symbol(),\n\tANIMATION_ROTATE: Symbol()\n\n};\n\nconst INPUT = {\n\n\tNONE: Symbol(),\n\tONE_FINGER: Symbol(),\n\tONE_FINGER_SWITCHED: Symbol(),\n\tTWO_FINGER: Symbol(),\n\tMULT_FINGER: Symbol(),\n\tCURSOR: Symbol()\n\n};\n\n//cursor center coordinates\nconst _center = {\n\n\tx: 0,\n\ty: 0\n\n};\n\n//transformation matrices for gizmos and camera\nconst _transformation = {\n\n\tcamera: new Matrix4(),\n\tgizmos: new Matrix4()\n\n};\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event ArcballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event ArcballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event ArcballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _raycaster = new Raycaster();\nconst _offset = new Vector3();\n\nconst _gizmoMatrixStateTemp = new Matrix4();\nconst _cameraMatrixStateTemp = new Matrix4();\nconst _scalePointTemp = new Vector3();\n\nconst _EPS = 0.000001;\n\n/**\n * Arcball controls allow the camera to be controlled by a virtual trackball with full touch support and advanced navigation functionality.\n * Cursor/finger positions and movements are mapped over a virtual trackball surface represented by a gizmo and mapped in intuitive and\n * consistent camera movements. Dragging cursor/fingers will cause camera to orbit around the center of the trackball in a conservative\n * way (returning to the starting point will make the camera return to its starting orientation).\n *\n * In addition to supporting pan, zoom and pinch gestures, Arcball controls provide focus< functionality with a double click/tap for intuitively\n * moving the object's point of interest in the center of the virtual trackball. Focus allows a much better inspection and navigation in complex\n * environment. Moreover Arcball controls allow FOV manipulation (in a vertigo-style method) and z-rotation. Saving and restoring of Camera State\n * is supported also through clipboard (use ctrl+c and ctrl+v shortcuts for copy and paste the state).\n *\n * Unlike {@link OrbitControls} and {@link TrackballControls}, `ArcballControls` doesn't require `update()` to be called externally in an\n * animation loop when animations are on.\n *\n * @augments Controls\n * @three_import import { ArcballControls } from 'three/addons/controls/ArcballControls.js';\n */\nclass ArcballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Camera} camera - The camera to be controlled. The camera must not be a child of another object, unless that object is the scene itself.\n\t * @param {?HTMLElement} [domElement=null] - The HTML element used for event listeners.\n\t * @param {?Scene} [scene=null] The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t */\n\tconstructor( camera, domElement = null, scene = null ) {\n\n\t\tsuper( camera, domElement );\n\n\t\t/**\n\t\t * The scene rendered by the camera. If not given, gizmos cannot be shown.\n\t\t *\n\t\t * @type {?Scene}\n\t\t * @default null\n\t\t */\n\t\tthis.scene = scene;\n\n\t\t/**\n\t\t * The control's focus point.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\t\tthis._currentTarget = new Vector3();\n\n\t\t/**\n\t\t * The size of the gizmo relative to the screen width and height.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.67\n\t\t */\n\t\tthis.radiusFactor = 0.67;\n\n\t\t/**\n\t\t * Holds the mouse actions of this controls. This property is maintained by the methods\n\t\t * `setMouseAction()` and `unsetMouseAction()`.\n\t\t *\n\t\t * @type {Array<Object>}\n\t\t */\n\t\tthis.mouseActions = [];\n\t\tthis._mouseOp = null;\n\n\n\t\t//global vectors and matrices that are used in some operations to avoid creating new objects every time (e.g. every time cursor moves)\n\t\tthis._v2_1 = new Vector2();\n\t\tthis._v3_1 = new Vector3();\n\t\tthis._v3_2 = new Vector3();\n\n\t\tthis._m4_1 = new Matrix4();\n\t\tthis._m4_2 = new Matrix4();\n\n\t\tthis._quat = new Quaternion();\n\n\t\t//transformation matrices\n\t\tthis._translationMatrix = new Matrix4(); //matrix for translation operation\n\t\tthis._rotationMatrix = new Matrix4(); //matrix for rotation operation\n\t\tthis._scaleMatrix = new Matrix4(); //matrix for scaling operation\n\n\t\tthis._rotationAxis = new Vector3(); //axis for rotate operation\n\n\n\t\t//camera state\n\t\tthis._cameraMatrixState = new Matrix4();\n\t\tthis._cameraProjectionState = new Matrix4();\n\n\t\tthis._fovState = 1;\n\t\tthis._upState = new Vector3();\n\t\tthis._zoomState = 1;\n\t\tthis._nearPos = 0;\n\t\tthis._farPos = 0;\n\n\t\tthis._gizmoMatrixState = new Matrix4();\n\n\t\t//initial values\n\t\tthis._up0 = new Vector3();\n\t\tthis._zoom0 = 1;\n\t\tthis._fov0 = 0;\n\t\tthis._initialNear = 0;\n\t\tthis._nearPos0 = 0;\n\t\tthis._initialFar = 0;\n\t\tthis._farPos0 = 0;\n\t\tthis._cameraMatrixState0 = new Matrix4();\n\t\tthis._gizmoMatrixState0 = new Matrix4();\n\t\tthis._target0 = new Vector3();\n\n\t\t//pointers array\n\t\tthis._button = - 1;\n\t\tthis._touchStart = [];\n\t\tthis._touchCurrent = [];\n\t\tthis._input = INPUT.NONE;\n\n\t\t//two fingers touch interaction\n\t\tthis._switchSensibility = 32;\t//minimum movement to be performed to fire single pan start after the second finger has been released\n\t\tthis._startFingerDistance = 0; //distance between two fingers\n\t\tthis._currentFingerDistance = 0;\n\t\tthis._startFingerRotation = 0; //amount of rotation performed with two fingers\n\t\tthis._currentFingerRotation = 0;\n\n\t\t//double tap\n\t\tthis._devPxRatio = 0;\n\t\tthis._downValid = true;\n\t\tthis._nclicks = 0;\n\t\tthis._downEvents = [];\n\t\tthis._downStart = 0;\t//pointerDown time\n\t\tthis._clickStart = 0;\t//first click time\n\t\tthis._maxDownTime = 250;\n\t\tthis._maxInterval = 300;\n\t\tthis._posThreshold = 24;\n\t\tthis._movementThreshold = 24;\n\n\t\t//cursor positions\n\t\tthis._currentCursorPosition = new Vector3();\n\t\tthis._startCursorPosition = new Vector3();\n\n\t\t//grid\n\t\tthis._grid = null; //grid to be visualized during pan operation\n\t\tthis._gridPosition = new Vector3();\n\n\t\t//gizmos\n\t\tthis._gizmos = new Group();\n\t\tthis._curvePts = 128;\n\n\n\t\t//animations\n\t\tthis._timeStart = - 1; //initial time\n\t\tthis._animationId = - 1;\n\n\t\t/**\n\t\t * Duration of focus animations in ms.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 500\n\t\t */\n\t\tthis.focusAnimationTime = 500;\n\n\t\t//rotate animation\n\t\tthis._timePrev = 0; //time at which previous rotate operation has been detected\n\t\tthis._timeCurrent = 0; //time at which current rotate operation has been detected\n\t\tthis._anglePrev = 0; //angle of previous rotation\n\t\tthis._angleCurrent = 0; //angle of current rotation\n\t\tthis._cursorPosPrev = new Vector3();\t//cursor position when previous rotate operation has been detected\n\t\tthis._cursorPosCurr = new Vector3();//cursor position when current rotate operation has been detected\n\t\tthis._wPrev = 0; //angular velocity of the previous rotate operation\n\t\tthis._wCurr = 0; //angular velocity of the current rotate operation\n\n\t\t//parameters\n\n\t\t/**\n\t\t * If set to `true`, the camera's near and far values will be adjusted every time zoom is\n\t\t * performed trying to maintain the same visible portion given by initial near and far\n\t\t * values. Only works with perspective cameras.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.adjustNearFar = false;\n\n\t\t/**\n\t\t * The scaling factor used when performing zoom operation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.1\n\t\t */\n\t\tthis.scaleFactor = 1.1;\n\n\t\t/**\n\t\t * The damping inertia used if 'enableAnimations` is set to `true`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 25\n\t\t */\n\t\tthis.dampingFactor = 25;\n\n\t\t/**\n\t\t * Maximum angular velocity allowed on rotation animation start.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 20\n\t\t */\n\t\tthis.wMax = 20;\n\n\t\t/**\n\t\t * Set to `true` to enable animations for rotation (damping) and focus operation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableAnimations = true;\n\n\t\t/**\n\t\t * If set to `true`, a grid will appear when panning operation is being performed\n\t\t * (desktop interaction only).\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.enableGrid = false;\n\n\t\t/**\n\t\t * Set to `true` to make zoom become cursor centered.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.cursorZoom = false;\n\n\t\t/**\n\t\t * The minimum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 5\n\t\t */\n\t\tthis.minFov = 5;\n\n\t\t/**\n\t\t * The maximum FOV in degrees.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 90\n\t\t */\n\t\tthis.maxFov = 90;\n\n\t\t/**\n\t\t * Speed of rotation.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1;\n\n\t\t/**\n\t\t * Enable or disable camera panning.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enablePan = true;\n\n\t\t/**\n\t\t * Enable or disable camera rotation.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableRotate = true;\n\n\t\t/**\n\t\t * Enable or disable camera zoom.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableZoom = true;\n\n\t\t/**\n\t\t * Enable or disable gizmos.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableGizmos = true;\n\n\t\t/**\n\t\t * Enable or disable camera focusing on double-tap (or click) operations.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default true\n\t\t */\n\t\tthis.enableFocus = true;\n\n\t\t/**\n\t\t * How far you can dolly in. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out. For perspective cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out. For orthographic cameras only.\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t//trackball parameters\n\t\tthis._tbRadius = 1;\n\n\t\t//FSA\n\t\tthis._state = STATE.IDLE;\n\n\t\tthis.setCamera( camera );\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tthis.scene.add( this._gizmos );\n\n\t\t}\n\n\t\tthis.initializeMouseActions();\n\n\t\t// event listeners\n\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onWheel = onWheel.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onWindowResize = onWindowResize.bind( this );\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t}\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\tthis.domElement.style.touchAction = 'none';\n\t\tthis._devPxRatio = window.devicePixelRatio;\n\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\t\tthis.domElement.addEventListener( 'wheel', this._onWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\n\t\twindow.addEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tdisconnect() {\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\twindow.removeEventListener( 'resize', this._onWindowResize );\n\n\t}\n\n\tonSinglePanStart( event, operation ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( operation ) {\n\n\t\t\t\tcase 'PAN':\n\n\t\t\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\tthis.drawGrid();\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ROTATE':\n\n\t\t\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.ROTATE, true );\n\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\t\t\t\t\tthis.activateGizmos( true );\n\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\tthis._timePrev = this._timeCurrent = performance.now();\n\t\t\t\t\t\tthis._angleCurrent = this._anglePrev = 0;\n\t\t\t\t\t\tthis._cursorPosPrev.copy( this._startCursorPosition );\n\t\t\t\t\t\tthis._cursorPosCurr.copy( this._cursorPosPrev );\n\t\t\t\t\t\tthis._wCurr = 0;\n\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( ! this.object.isPerspectiveCamera || ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tif ( ! this.enableZoom ) {\n\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\t\tcancelAnimationFrame( this._animationId );\n\t\t\t\t\t\tthis._animationId = - 1;\n\t\t\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonSinglePanMove( event, opState ) {\n\n\t\tif ( this.enabled ) {\n\n\t\t\tconst restart = opState != this._state;\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\n\t\t\tswitch ( opState ) {\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( this.enablePan ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to pan operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with pan operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ) );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( this.enableRotate ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to rotate operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with rotate operation\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbSurface( this.object, _center.x, _center.y, this.domElement, this._tbRadius ) );\n\n\t\t\t\t\t\t\tconst distance = this._startCursorPosition.distanceTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst angle = this._startCursorPosition.angleTo( this._currentCursorPosition );\n\t\t\t\t\t\t\tconst amount = Math.max( distance / this._tbRadius, angle ) * this.rotateSpeed; //effective rotation angle\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.rotate( this.calculateRotationAxis( this._startCursorPosition, this._currentCursorPosition ), amount ) );\n\n\t\t\t\t\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t\t\t\t\tthis._timePrev = this._timeCurrent;\n\t\t\t\t\t\t\t\tthis._timeCurrent = performance.now();\n\t\t\t\t\t\t\t\tthis._anglePrev = this._angleCurrent;\n\t\t\t\t\t\t\t\tthis._angleCurrent = amount;\n\t\t\t\t\t\t\t\tthis._cursorPosPrev.copy( this._cursorPosCurr );\n\t\t\t\t\t\t\t\tthis._cursorPosCurr.copy( this._currentCursorPosition );\n\t\t\t\t\t\t\t\tthis._wPrev = this._wCurr;\n\t\t\t\t\t\t\t\tthis._wCurr = this.calculateAngularSpeed( this._anglePrev, this._angleCurrent, this._timePrev, this._timeCurrent );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.SCALE:\n\n\t\t\t\t\tif ( this.enableZoom ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to zoom operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with zoom operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_1 ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.FOV:\n\n\t\t\t\t\tif ( this.enableZoom && this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tif ( restart ) {\n\n\t\t\t\t\t\t\t//switch to fov operation\n\n\t\t\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\t\t\t\t\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\t\t\t\t\tthis.updateTbState( opState, true );\n\t\t\t\t\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\t\t\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\t\t\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\t\t\t\t\tthis.disposeGrid();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//continue with fov operation\n\t\t\t\t\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\t\t\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\t\t\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\t\t\t\t\tlet size = 1;\n\n\t\t\t\t\t\t\tif ( movement < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t\t\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\t\tsize = x / newDistance;\n\t\t\t\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t\t\t\t\t//adjusting distance\n\t\t\t\t\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\t\t\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonSinglePanEnd() {\n\n\t\tif ( this._state == STATE.ROTATE ) {\n\n\n\t\t\tif ( ! this.enableRotate ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( this.enableAnimations ) {\n\n\t\t\t\t//perform rotation animation\n\t\t\t\tconst deltaTime = ( performance.now() - this._timeCurrent );\n\t\t\t\tif ( deltaTime < 120 ) {\n\n\t\t\t\t\tconst w = Math.abs( ( this._wPrev + this._wCurr ) / 2 );\n\n\t\t\t\t\tconst self = this;\n\t\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\t\tself.updateTbState( STATE.ANIMATION_ROTATE, true );\n\t\t\t\t\t\tconst rotationAxis = self.calculateRotationAxis( self._cursorPosPrev, self._cursorPosCurr );\n\n\t\t\t\t\t\tself.onRotationAnim( t, rotationAxis, Math.min( w, self.wMax ) );\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t//cursor has been standing still for over 120 ms since last movement\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\t\tthis.activateGizmos( false );\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else if ( this._state == STATE.PAN || this._state == STATE.IDLE ) {\n\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tif ( this.enableGrid ) {\n\n\t\t\t\tthis.disposeGrid();\n\n\t\t\t}\n\n\t\t\tthis.activateGizmos( false );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoubleTap( event ) {\n\n\t\tif ( this.enabled && this.enablePan && this.enableFocus && this.scene != null ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.setCenter( event.clientX, event.clientY );\n\t\t\tconst hitP = this.unprojectOnObj( this.getCursorNDC( _center.x, _center.y, this.domElement ), this.object );\n\n\t\t\tif ( hitP != null && this.enableAnimations ) {\n\n\t\t\t\tconst self = this;\n\t\t\t\tif ( this._animationId != - 1 ) {\n\n\t\t\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t\t\t}\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.updateTbState( STATE.ANIMATION_FOCUS, true );\n\t\t\t\t\tself.onFocusAnim( t, hitP, self._cameraMatrixState, self._gizmoMatrixState );\n\n\t\t\t\t} );\n\n\t\t\t} else if ( hitP != null && ! this.enableAnimations ) {\n\n\t\t\t\tthis.updateTbState( STATE.FOCUS, true );\n\t\t\t\tthis.focus( hitP, this.scaleFactor );\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonDoublePanStart() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.PAN, true );\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tthis._startCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonDoublePanMove() {\n\n\t\tif ( this.enabled && this.enablePan ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\n\t\t\tif ( this._state != STATE.PAN ) {\n\n\t\t\t\tthis.updateTbState( STATE.PAN, true );\n\t\t\t\tthis._startCursorPosition.copy( this._currentCursorPosition );\n\n\t\t\t}\n\n\t\t\tthis._currentCursorPosition.copy( this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement, true ) );\n\t\t\tthis.applyTransformMatrix( this.pan( this._startCursorPosition, this._currentCursorPosition, true ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonDoublePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonRotateStart() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\n\t\t\t//this._startFingerRotation = event.rotation;\n\n\t\t\tthis._startFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\t\t\tthis._currentFingerRotation = this._startFingerRotation;\n\n\t\t\tthis.object.getWorldDirection( this._rotationAxis ); //rotation axis\n\n\t\t\tif ( ! this.enablePan && ! this.enableZoom ) {\n\n\t\t\t\tthis.activateGizmos( true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tonRotateMove() {\n\n\t\tif ( this.enabled && this.enableRotate ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tlet rotationPoint;\n\n\t\t\tif ( this._state != STATE.ZROTATE ) {\n\n\t\t\t\tthis.updateTbState( STATE.ZROTATE, true );\n\t\t\t\tthis._startFingerRotation = this._currentFingerRotation;\n\n\t\t\t}\n\n\t\t\t//this._currentFingerRotation = event.rotation;\n\t\t\tthis._currentFingerRotation = this.getAngle( this._touchCurrent[ 1 ], this._touchCurrent[ 0 ] ) + this.getAngle( this._touchStart[ 1 ], this._touchStart[ 0 ] );\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\trotationPoint = new Vector3().setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t} else {\n\n\t\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\t\t\t\trotationPoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._v3_2 );\n\n\t\t\t}\n\n\t\t\tconst amount = MathUtils.DEG2RAD * ( this._startFingerRotation - this._currentFingerRotation );\n\n\t\t\tthis.applyTransformMatrix( this.zRotate( rotationPoint, amount ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonRotateEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.activateGizmos( false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonPinchStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\tthis._startFingerDistance = this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] );\n\t\t\tthis._currentFingerDistance = this._startFingerDistance;\n\n\t\t\tthis.activateGizmos( false );\n\n\t\t}\n\n\t}\n\n\tonPinchMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.setCenter( ( this._touchCurrent[ 0 ].clientX + this._touchCurrent[ 1 ].clientX ) / 2, ( this._touchCurrent[ 0 ].clientY + this._touchCurrent[ 1 ].clientY ) / 2 );\n\t\t\tconst minDistance = 12; //minimum distance between fingers (in css pixels)\n\n\t\t\tif ( this._state != STATE.SCALE ) {\n\n\t\t\t\tthis._startFingerDistance = this._currentFingerDistance;\n\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t}\n\n\t\t\tthis._currentFingerDistance = Math.max( this.calculatePointersDistance( this._touchCurrent[ 0 ], this._touchCurrent[ 1 ] ), minDistance * this._devPxRatio );\n\t\t\tconst amount = this._currentFingerDistance / this._startFingerDistance;\n\n\t\t\tlet scalePoint;\n\n\t\t\tif ( ! this.enablePan ) {\n\n\t\t\t\tscalePoint = this._gizmos.position;\n\n\t\t\t} else {\n\n\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.multiplyScalar( 1 / this.object.zoom )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, _center.x, _center.y, this.domElement )\n\t\t\t\t\t\t.applyQuaternion( this.object.quaternion )\n\t\t\t\t\t\t.add( this._gizmos.position );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.applyTransformMatrix( this.scale( amount, scalePoint ) );\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonPinchEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\n\t}\n\n\tonTriplePanStart() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tthis._startCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\t\t\tthis._currentCursorPosition.copy( this._startCursorPosition );\n\n\t\t}\n\n\t}\n\n\tonTriplePanMove() {\n\n\t\tif ( this.enabled && this.enableZoom ) {\n\n\t\t\t//\t  fov / 2\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\tx\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t\t| _ _ _\\\n\t\t\t//\t\t\ty\n\n\t\t\t//const center = event.center;\n\t\t\tlet clientX = 0;\n\t\t\tlet clientY = 0;\n\t\t\tconst nFingers = this._touchCurrent.length;\n\n\t\t\tfor ( let i = 0; i < nFingers; i ++ ) {\n\n\t\t\t\tclientX += this._touchCurrent[ i ].clientX;\n\t\t\t\tclientY += this._touchCurrent[ i ].clientY;\n\n\t\t\t}\n\n\t\t\tthis.setCenter( clientX / nFingers, clientY / nFingers );\n\n\t\t\tconst screenNotches = 8;\t//how many wheel notches corresponds to a full screen pan\n\t\t\tthis._currentCursorPosition.setY( this.getCursorNDC( _center.x, _center.y, this.domElement ).y * 0.5 );\n\n\t\t\tconst movement = this._currentCursorPosition.y - this._startCursorPosition.y;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( movement < 0 ) {\n\n\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, - movement * screenNotches ) );\n\n\t\t\t} else if ( movement > 0 ) {\n\n\t\t\t\tsize = Math.pow( this.scaleFactor, movement * screenNotches );\n\n\t\t\t}\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\tlet xNew = x / size; //distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t//check min and max distance\n\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this._fovState * 0.5 );\n\n\t\t\t//calculate new fov\n\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t//check min and max fov\n\t\t\tnewFov = MathUtils.clamp( newFov, this.minFov, this.maxFov );\n\n\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\tsize = x / newDistance;\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\tthis.setFov( newFov );\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._v3_2, false ) );\n\n\t\t\t//adjusting distance\n\t\t\t_offset.copy( this._gizmos.position ).sub( this.object.position ).normalize().multiplyScalar( newDistance / x );\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n\tonTriplePanEnd() {\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\t\tthis.dispatchEvent( _endEvent );\n\t\t//this.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Set _center's x/y coordinates.\n\t *\n\t * @private\n\t * @param {number} clientX - The x coordinate.\n\t * @param {number} clientY - The y coordinate.\n\t */\n\tsetCenter( clientX, clientY ) {\n\n\t\t_center.x = clientX;\n\t\t_center.y = clientY;\n\n\t}\n\n\t/**\n\t * Set default mouse actions.\n\t *\n\t * @private\n\t */\n\tinitializeMouseActions() {\n\n\t\tthis.setMouseAction( 'PAN', 0, 'CTRL' );\n\t\tthis.setMouseAction( 'PAN', 2 );\n\n\t\tthis.setMouseAction( 'ROTATE', 0 );\n\n\t\tthis.setMouseAction( 'ZOOM', 'WHEEL' );\n\t\tthis.setMouseAction( 'ZOOM', 1 );\n\n\t\tthis.setMouseAction( 'FOV', 'WHEEL', 'SHIFT' );\n\t\tthis.setMouseAction( 'FOV', 1, 'SHIFT' );\n\n\n\t}\n\n\t/**\n\t * Compare two mouse actions.\n\t *\n\t * @private\n\t * @param {Object} action1 - The first mouse action.\n\t * @param {Object} action2 - The second mouse action.\n\t * @returns {boolean} `true` if action1 and action 2 are the same mouse action, `false` otherwise.\n\t */\n\tcompareMouseAction( action1, action2 ) {\n\n\t\tif ( action1.operation == action2.operation ) {\n\n\t\t\tif ( action1.mouse == action2.mouse && action1.key == action2.key ) {\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Set a new mouse action by specifying the operation to be performed and a mouse/key combination. In case of conflict, replaces the existing one.\n\t *\n\t * @param {'PAN'|'ROTATE'|'ZOOM'|'FOV'} operation - The operation to be performed ('PAN', 'ROTATE', 'ZOOM', 'FOV').\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} [key=null] - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the mouse action has been successfully added, `false` otherwise.\n\t */\n\tsetMouseAction( operation, mouse, key = null ) {\n\n\t\tconst operationInput = [ 'PAN', 'ROTATE', 'ZOOM', 'FOV' ];\n\t\tconst mouseInput = [ 0, 1, 2, 'WHEEL' ];\n\t\tconst keyInput = [ 'CTRL', 'SHIFT', null ];\n\t\tlet state;\n\n\t\tif ( ! operationInput.includes( operation ) || ! mouseInput.includes( mouse ) || ! keyInput.includes( key ) ) {\n\n\t\t\t//invalid parameters\n\t\t\treturn false;\n\n\t\t}\n\n\t\tif ( mouse == 'WHEEL' ) {\n\n\t\t\tif ( operation != 'ZOOM' && operation != 'FOV' ) {\n\n\t\t\t\t//cannot associate 2D operation to 1D input\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( operation ) {\n\n\t\t\tcase 'PAN':\n\n\t\t\t\tstate = STATE.PAN;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ROTATE':\n\n\t\t\t\tstate = STATE.ROTATE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZOOM':\n\n\t\t\t\tstate = STATE.SCALE;\n\t\t\t\tbreak;\n\n\t\t\tcase 'FOV':\n\n\t\t\t\tstate = STATE.FOV;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tconst action = {\n\n\t\t\toperation: operation,\n\t\t\tmouse: mouse,\n\t\t\tkey: key,\n\t\t\tstate: state\n\n\t\t};\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == action.mouse && this.mouseActions[ i ].key == action.key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1, action );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseActions.push( action );\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Remove a mouse action by specifying its mouse/key combination.\n\t *\n\t * @param {0|1|2|'WHEEL'} mouse - A mouse button (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - The keyboard modifier ('CTRL', 'SHIFT') or null if key is not needed.\n\t * @returns {boolean} `true` if the operation has been successfully removed, `false` otherwise.\n\t */\n\tunsetMouseAction( mouse, key = null ) {\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\tif ( this.mouseActions[ i ].mouse == mouse && this.mouseActions[ i ].key == key ) {\n\n\t\t\t\tthis.mouseActions.splice( i, 1 );\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Return the operation associated to a mouse/keyboard combination.\n\t *\n\t * @private\n\t * @param {0|1|2|'WHEEL'} mouse - Mouse button index (0, 1, 2) or 'WHEEL' for wheel notches.\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier.\n\t * @returns {?('PAN'|'ROTATE'|'ZOOM'|'FOV')} The operation if it has been found, `null` otherwise.\n\t */\n\tgetOpFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.operation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.operation;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Get the operation associated to mouse and key combination and returns the corresponding FSA state.\n\t *\n\t * @private\n\t * @param {0|1|2} mouse - Mouse button index (0, 1, 2)\n\t * @param {?('CTRL'|'SHIFT')} key - Keyboard modifier\n\t * @returns {?STATE} The FSA state obtained from the operation associated to mouse/keyboard combination.\n\t */\n\tgetOpStateFromAction( mouse, key ) {\n\n\t\tlet action;\n\n\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\taction = this.mouseActions[ i ];\n\t\t\tif ( action.mouse == mouse && action.key == key ) {\n\n\t\t\t\treturn action.state;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( key != null ) {\n\n\t\t\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\t\t\taction = this.mouseActions[ i ];\n\t\t\t\tif ( action.mouse == mouse && action.key == null ) {\n\n\t\t\t\t\treturn action.state;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculate the angle between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p1 - The first pointer event.\n\t * @param {PointerEvent} p2 - The second pointer event.\n\t * @returns {number} The angle between two pointers in degrees.\n\t */\n\tgetAngle( p1, p2 ) {\n\n\t\treturn Math.atan2( p2.clientY - p1.clientY, p2.clientX - p1.clientX ) * 180 / Math.PI;\n\n\t}\n\n\t/**\n\t * Updates a PointerEvent inside current pointerevents array.\n\t *\n\t * @private\n\t * @param {PointerEvent} event - The pointer event.\n\t */\n\tupdateTouchEvent( event ) {\n\n\t\tfor ( let i = 0; i < this._touchCurrent.length; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1, event );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies a transformation matrix, to the camera and gizmos.\n\t *\n\t * @private\n\t * @param {Object} transformation - Object containing matrices to apply to camera and gizmos.\n\t */\n\tapplyTransformMatrix( transformation ) {\n\n\t\tif ( transformation.camera != null ) {\n\n\t\t\tthis._m4_1.copy( this._cameraMatrixState ).premultiply( transformation.camera );\n\t\t\tthis._m4_1.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\t\tthis.object.updateMatrix();\n\n\t\t\t//update camera up vector\n\t\t\tif ( this._state == STATE.ROTATE || this._state == STATE.ZROTATE || this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t\tthis.object.up.copy( this._upState ).applyQuaternion( this.object.quaternion );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( transformation.gizmos != null ) {\n\n\t\t\tthis._m4_1.copy( this._gizmoMatrixState ).premultiply( transformation.gizmos );\n\t\t\tthis._m4_1.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t}\n\n\t\tif ( this._state == STATE.SCALE || this._state == STATE.FOCUS || this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( this.adjustNearFar ) {\n\n\t\t\t\tconst cameraDistance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\t\tconst bb = new Box3();\n\t\t\t\tbb.setFromObject( this._gizmos );\n\t\t\t\tconst sphere = new Sphere();\n\t\t\t\tbb.getBoundingSphere( sphere );\n\n\t\t\t\tconst adjustedNearPosition = Math.max( this._nearPos0, sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularNearPosition = cameraDistance - this._initialNear;\n\n\t\t\t\tconst minNearPos = Math.min( adjustedNearPosition, regularNearPosition );\n\t\t\t\tthis.object.near = cameraDistance - minNearPos;\n\n\n\t\t\t\tconst adjustedFarPosition = Math.min( this._farPos0, - sphere.radius + sphere.center.length() );\n\t\t\t\tconst regularFarPosition = cameraDistance - this._initialFar;\n\n\t\t\t\tconst minFarPos = Math.min( adjustedFarPosition, regularFarPosition );\n\t\t\t\tthis.object.far = cameraDistance - minFarPos;\n\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t} else {\n\n\t\t\t\tlet update = false;\n\n\t\t\t\tif ( this.object.near != this._initialNear ) {\n\n\t\t\t\t\tthis.object.near = this._initialNear;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.object.far != this._initialFar ) {\n\n\t\t\t\t\tthis.object.far = this._initialFar;\n\t\t\t\t\tupdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( update ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the angular speed.\n\t *\n\t * @private\n\t * @param {number} p0 - Position at t0.\n\t * @param {number} p1 - Position at t1.\n\t * @param {number} t0 - Initial time in milliseconds.\n\t * @param {number} t1 - Ending time in milliseconds.\n\t * @returns {number} The angular speed.\n\t */\n\tcalculateAngularSpeed( p0, p1, t0, t1 ) {\n\n\t\tconst s = p1 - p0;\n\t\tconst t = ( t1 - t0 ) / 1000;\n\t\tif ( t == 0 ) {\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\treturn s / t;\n\n\t}\n\n\t/**\n\t * Calculates the distance between two pointers.\n\t *\n\t * @private\n\t * @param {PointerEvent} p0 - The first pointer.\n\t * @param {PointerEvent} p1 - The second pointer.\n\t * @returns {number} The distance between the two pointers.\n\t */\n\tcalculatePointersDistance( p0, p1 ) {\n\n\t\treturn Math.sqrt( Math.pow( p1.clientX - p0.clientX, 2 ) + Math.pow( p1.clientY - p0.clientY, 2 ) );\n\n\t}\n\n\t/**\n\t * Calculates the rotation axis as the vector perpendicular between two vectors.\n\t *\n\t * @private\n\t * @param {Vector3} vec1 - The first vector.\n\t * @param {Vector3} vec2 - The second vector.\n\t * @returns {Vector3} The normalized rotation axis.\n\t */\n\tcalculateRotationAxis( vec1, vec2 ) {\n\n\t\tthis._rotationMatrix.extractRotation( this._cameraMatrixState );\n\t\tthis._quat.setFromRotationMatrix( this._rotationMatrix );\n\n\t\tthis._rotationAxis.crossVectors( vec1, vec2 ).applyQuaternion( this._quat );\n\t\treturn this._rotationAxis.normalize().clone();\n\n\t}\n\n\t/**\n\t * Calculates the trackball radius so that gizmo's diameter will be 2/3 of the minimum side of the camera frustum.\n\t *\n\t * @private\n\t * @param {Camera} camera - The camera.\n\t * @returns {number} The trackball radius.\n\t */\n\tcalculateTbRadius( camera ) {\n\n\t\tconst distance = camera.position.distanceTo( this._gizmos.position );\n\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tconst halfFovV = MathUtils.DEG2RAD * camera.fov * 0.5; //vertical fov/2 in radians\n\t\t\tconst halfFovH = Math.atan( ( camera.aspect ) * Math.tan( halfFovV ) ); //horizontal fov/2 in radians\n\t\t\treturn Math.tan( Math.min( halfFovV, halfFovH ) ) * distance * this.radiusFactor;\n\n\t\t} else if ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\treturn Math.min( camera.top, camera.right ) * this.radiusFactor;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Focus operation consist of positioning the point of interest in front of the camera and a slightly zoom in.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point of interest.\n\t * @param {number} size - Scale factor.\n\t * @param {number} [amount=1] - Amount of operation to be completed (used for focus animations, default is complete full operation).\n\t */\n\tfocus( point, size, amount = 1 ) {\n\n\t\t//move center of camera (along with gizmos) towards point of interest\n\t\t_offset.copy( point ).sub( this._gizmos.position ).multiplyScalar( amount );\n\t\tthis._translationMatrix.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\t\t_gizmoMatrixStateTemp.copy( this._gizmoMatrixState );\n\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t_cameraMatrixStateTemp.copy( this._cameraMatrixState );\n\t\tthis._cameraMatrixState.premultiply( this._translationMatrix );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t//apply zoom\n\t\tif ( this.enableZoom ) {\n\n\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.copy( _gizmoMatrixStateTemp );\n\t\tthis._cameraMatrixState.copy( _cameraMatrixStateTemp );\n\n\t}\n\n\t/**\n\t * Creates a grid if necessary and adds it to the scene.\n\t *\n\t * @private\n\t */\n\tdrawGrid() {\n\n\t\tif ( this.scene != null ) {\n\n\t\t\tconst color = 0x888888;\n\t\t\tconst multiplier = 3;\n\t\t\tlet size, divisions, maxLength, tick;\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst width = this.object.right - this.object.left;\n\t\t\t\tconst height = this.object.bottom - this.object.top;\n\n\t\t\t\tmaxLength = Math.max( width, height );\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength / this.object.zoom * multiplier;\n\t\t\t\tdivisions = size / tick * this.object.zoom;\n\n\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\t\t\t\tconst halfFovV = MathUtils.DEG2RAD * this.object.fov * 0.5;\n\t\t\t\tconst halfFovH = Math.atan( ( this.object.aspect ) * Math.tan( halfFovV ) );\n\n\t\t\t\tmaxLength = Math.tan( Math.max( halfFovV, halfFovH ) ) * distance * 2;\n\t\t\t\ttick = maxLength / 20;\n\n\t\t\t\tsize = maxLength * multiplier;\n\t\t\t\tdivisions = size / tick;\n\n\t\t\t}\n\n\t\t\tif ( this._grid == null ) {\n\n\t\t\t\tthis._grid = new GridHelper( size, divisions, color, color );\n\t\t\t\tthis._grid.position.copy( this._gizmos.position );\n\t\t\t\tthis._gridPosition.copy( this._grid.position );\n\t\t\t\tthis._grid.quaternion.copy( this.object.quaternion );\n\t\t\t\tthis._grid.rotateX( Math.PI * 0.5 );\n\n\t\t\t\tthis.scene.add( this._grid );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this._animationId != - 1 ) {\n\n\t\t\twindow.cancelAnimationFrame( this._animationId );\n\n\t\t}\n\n\t\tthis.disconnect();\n\n\t\tif ( this.scene !== null ) this.scene.remove( this._gizmos );\n\t\tthis.disposeGrid();\n\n\t}\n\n\t/**\n\t * Removes the grid from the scene.\n\t */\n\tdisposeGrid() {\n\n\t\tif ( this._grid != null && this.scene != null ) {\n\n\t\t\tthis.scene.remove( this._grid );\n\t\t\tthis._grid = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Computes the easing out cubic function for ease out effect in animation.\n\t *\n\t * @private\n\t * @param {number} t - The absolute progress of the animation in the bound of `0` (beginning of the) and `1` (ending of animation).\n\t * @returns {number} Result of easing out cubic at time `t`.\n\t */\n\teaseOutCubic( t ) {\n\n\t\treturn 1 - Math.pow( 1 - t, 3 );\n\n\t}\n\n\t/**\n\t * Makes rotation gizmos more or less visible.\n\t *\n\t * @param {boolean} isActive - If set to `true`, gizmos are more visible.\n\t */\n\tactivateGizmos( isActive ) {\n\n\t\tconst gizmoX = this._gizmos.children[ 0 ];\n\t\tconst gizmoY = this._gizmos.children[ 1 ];\n\t\tconst gizmoZ = this._gizmos.children[ 2 ];\n\n\t\tif ( isActive ) {\n\n\t\t\tgizmoX.material.setValues( { opacity: 1 } );\n\t\t\tgizmoY.material.setValues( { opacity: 1 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 1 } );\n\n\t\t} else {\n\n\t\t\tgizmoX.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoY.material.setValues( { opacity: 0.6 } );\n\t\t\tgizmoZ.material.setValues( { opacity: 0.6 } );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Calculates the cursor position in NDC.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor normalized position inside the canvas.\n\t */\n\tgetCursorNDC( cursorX, cursorY, canvas ) {\n\n\t\tconst canvasRect = canvas.getBoundingClientRect();\n\t\tthis._v2_1.setX( ( ( cursorX - canvasRect.left ) / canvasRect.width ) * 2 - 1 );\n\t\tthis._v2_1.setY( ( ( canvasRect.bottom - cursorY ) / canvasRect.height ) * 2 - 1 );\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Calculates the cursor position inside the canvas x/y coordinates with the origin being in the center of the canvas.\n\t *\n\t * @private\n\t * @param {number} cursorX - Cursor horizontal coordinate within the canvas.\n\t * @param {number} cursorY - Cursor vertical coordinate within the canvas.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @returns {Vector2} Cursor position inside the canvas.\n\t */\n\tgetCursorPosition( cursorX, cursorY, canvas ) {\n\n\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\t\tthis._v2_1.x *= ( this.object.right - this.object.left ) * 0.5;\n\t\tthis._v2_1.y *= ( this.object.top - this.object.bottom ) * 0.5;\n\t\treturn this._v2_1.clone();\n\n\t}\n\n\t/**\n\t * Sets the camera to be controlled.  Must be called in order to set a new camera to be controlled.\n\t *\n\t * @param {Camera} camera - The camera to be controlled.\n\t */\n\tsetCamera( camera ) {\n\n\t\tcamera.lookAt( this.target );\n\t\tcamera.updateMatrix();\n\n\t\t//setting state\n\t\tif ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._fov0 = camera.fov;\n\t\t\tthis._fovState = camera.fov;\n\n\t\t}\n\n\t\tthis._cameraMatrixState0.copy( camera.matrix );\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraProjectionState.copy( camera.projectionMatrix );\n\t\tthis._zoom0 = camera.zoom;\n\t\tthis._zoomState = this._zoom0;\n\n\t\tthis._initialNear = camera.near;\n\t\tthis._nearPos0 = camera.position.distanceTo( this.target ) - camera.near;\n\t\tthis._nearPos = this._initialNear;\n\n\t\tthis._initialFar = camera.far;\n\t\tthis._farPos0 = camera.position.distanceTo( this.target ) - camera.far;\n\t\tthis._farPos = this._initialFar;\n\n\t\tthis._up0.copy( camera.up );\n\t\tthis._upState.copy( camera.up );\n\n\t\tthis.object = camera;\n\t\tthis.object.updateProjectionMatrix();\n\n\t\t//making gizmos\n\t\tthis._tbRadius = this.calculateTbRadius( camera );\n\t\tthis.makeGizmos( this.target, this._tbRadius );\n\n\t}\n\n\t/**\n\t * Sets gizmos visibility.\n\t *\n\t * @param {boolean} value - Value of gizmos visibility.\n\t */\n\tsetGizmosVisible( value ) {\n\n\t\tthis._gizmos.visible = value;\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Sets gizmos radius factor and redraws gizmos.\n\t *\n\t * @param {number} value - Value of radius factor.\n\t */\n\tsetTbRadius( value ) {\n\n\t\tthis.radiusFactor = value;\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\tconst curve = new EllipseCurve( 0, 0, this._tbRadius, this._tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t}\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Creates the rotation gizmos matching trackball center and radius.\n\t *\n\t * @private\n\t * @param {Vector3} tbCenter - The trackball center.\n\t * @param {number} tbRadius - The trackball radius.\n\t */\n\tmakeGizmos( tbCenter, tbRadius ) {\n\n\t\tconst curve = new EllipseCurve( 0, 0, tbRadius, tbRadius );\n\t\tconst points = curve.getPoints( this._curvePts );\n\n\t\t//geometry\n\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t//material\n\t\tconst curveMaterialX = new LineBasicMaterial( { color: 0xff8080, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialY = new LineBasicMaterial( { color: 0x80ff80, fog: false, transparent: true, opacity: 0.6 } );\n\t\tconst curveMaterialZ = new LineBasicMaterial( { color: 0x8080ff, fog: false, transparent: true, opacity: 0.6 } );\n\n\t\t//line\n\t\tconst gizmoX = new Line( curveGeometry, curveMaterialX );\n\t\tconst gizmoY = new Line( curveGeometry, curveMaterialY );\n\t\tconst gizmoZ = new Line( curveGeometry, curveMaterialZ );\n\n\t\tconst rotation = Math.PI * 0.5;\n\t\tgizmoX.rotation.x = rotation;\n\t\tgizmoY.rotation.y = rotation;\n\n\n\t\t//setting state\n\t\tthis._gizmoMatrixState0.identity().setPosition( tbCenter );\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\n\t\tif ( this.object.zoom !== 1 ) {\n\n\t\t\t//adapt gizmos size to camera zoom\n\t\t\tconst size = 1 / this.object.zoom;\n\t\t\tthis._scaleMatrix.makeScale( size, size, size );\n\t\t\tthis._translationMatrix.makeTranslation( - tbCenter.x, - tbCenter.y, - tbCenter.z );\n\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix ).premultiply( this._scaleMatrix );\n\t\t\tthis._translationMatrix.makeTranslation( tbCenter.x, tbCenter.y, tbCenter.z );\n\t\t\tthis._gizmoMatrixState.premultiply( this._translationMatrix );\n\n\t\t}\n\n\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t//\n\n\t\tthis._gizmos.traverse( function ( object ) {\n\n\t\t\tif ( object.isLine ) {\n\n\t\t\t\tobject.geometry.dispose();\n\t\t\t\tobject.material.dispose();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis._gizmos.clear();\n\n\t\t//\n\n\t\tthis._gizmos.add( gizmoX );\n\t\tthis._gizmos.add( gizmoY );\n\t\tthis._gizmos.add( gizmoZ );\n\n\t}\n\n\t/**\n\t * Performs animation for focus operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} point - Point of interest for focus operation.\n\t * @param {Matrix4} cameraMatrix - Camera matrix.\n\t * @param {Matrix4} gizmoMatrix - Gizmos matrix.\n\t */\n\tonFocusAnim( time, point, cameraMatrix, gizmoMatrix ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_FOCUS ) {\n\n\t\t\tconst deltaTime = time - this._timeStart;\n\t\t\tconst animTime = deltaTime / this.focusAnimationTime;\n\n\t\t\tthis._gizmoMatrixState.copy( gizmoMatrix );\n\n\t\t\tif ( animTime >= 1 ) {\n\n\t\t\t\t//animation end\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\t\tthis.focus( point, this.scaleFactor );\n\n\t\t\t\tthis._timeStart = - 1;\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t} else {\n\n\t\t\t\tconst amount = this.easeOutCubic( animTime );\n\t\t\t\tconst size = ( ( 1 - amount ) + ( this.scaleFactor * amount ) );\n\n\t\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\t\t\tthis.focus( point, size, amount );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onFocusAnim( t, point, cameraMatrix, gizmoMatrix.clone() );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs animation for rotation operation.\n\t *\n\t * @private\n\t * @param {number} time - Instant in which this function is called as performance.now().\n\t * @param {Vector3} rotationAxis - Rotation axis.\n\t * @param {number} w0 - Initial angular velocity.\n\t */\n\tonRotationAnim( time, rotationAxis, w0 ) {\n\n\t\tif ( this._timeStart == - 1 ) {\n\n\t\t\t//animation start\n\t\t\tthis._anglePrev = 0;\n\t\t\tthis._angleCurrent = 0;\n\t\t\tthis._timeStart = time;\n\n\t\t}\n\n\t\tif ( this._state == STATE.ANIMATION_ROTATE ) {\n\n\t\t\t//w = w0 + alpha * t\n\t\t\tconst deltaTime = ( time - this._timeStart ) / 1000;\n\t\t\tconst w = w0 + ( ( - this.dampingFactor ) * deltaTime );\n\n\t\t\tif ( w > 0 ) {\n\n\t\t\t\t//tetha = 0.5 * alpha * t^2 + w0 * t + tetha0\n\t\t\t\tthis._angleCurrent = 0.5 * ( - this.dampingFactor ) * Math.pow( deltaTime, 2 ) + w0 * deltaTime + 0;\n\t\t\t\tthis.applyTransformMatrix( this.rotate( rotationAxis, this._angleCurrent ) );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\tconst self = this;\n\t\t\t\tthis._animationId = window.requestAnimationFrame( function ( t ) {\n\n\t\t\t\t\tself.onRotationAnim( t, rotationAxis, w0 );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\tthis._animationId = - 1;\n\t\t\t\tthis._timeStart = - 1;\n\n\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\t\t\t\tthis.activateGizmos( false );\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t//interrupt animation\n\n\t\t\tthis._animationId = - 1;\n\t\t\tthis._timeStart = - 1;\n\n\t\t\tif ( this._state != STATE.ROTATE ) {\n\n\t\t\t\tthis.activateGizmos( false );\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Performs pan operation moving camera between two points.\n\t *\n\t * @private\n\t * @param {Vector3} p0 - Initial point.\n\t * @param {Vector3} p1 - Ending point.\n\t * @param {boolean} [adjust=false] - If movement should be adjusted considering camera distance (Perspective only).\n\t * @returns {Object}\n\t */\n\tpan( p0, p1, adjust = false ) {\n\n\t\tconst movement = p0.clone().sub( p1 );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//adjust movement amount\n\t\t\tmovement.multiplyScalar( 1 / this.object.zoom );\n\n\t\t} else if ( this.object.isPerspectiveCamera && adjust ) {\n\n\t\t\t//adjust movement amount\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState0 );\t//camera's initial position\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 );\t//gizmo's initial position\n\t\t\tconst distanceFactor = this._v3_1.distanceTo( this._v3_2 ) / this.object.position.distanceTo( this._gizmos.position );\n\t\t\tmovement.multiplyScalar( 1 / distanceFactor );\n\n\t\t}\n\n\t\tthis._v3_1.set( movement.x, movement.y, 0 ).applyQuaternion( this.object.quaternion );\n\n\t\tthis._m4_1.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_1 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Resets the controls.\n\t */\n\treset() {\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = this._fov0;\n\n\t\t}\n\n\t\tthis.object.near = this._nearPos;\n\t\tthis.object.far = this._farPos;\n\t\tthis._cameraMatrixState.copy( this._cameraMatrixState0 );\n\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\t\tthis.object.up.copy( this._up0 );\n\n\t\tthis.object.updateMatrix();\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._gizmoMatrixState.copy( this._gizmoMatrixState0 );\n\t\tthis._gizmoMatrixState0.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t}\n\n\t/**\n\t * Rotates the camera around an axis passing by trackball's center.\n\t *\n\t * @private\n\t * @param {Vector3} axis - Rotation axis.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} Object with 'camera' field containing transformation matrix resulting from the operation to be applied to the camera.\n\t */\n\trotate( axis, angle ) {\n\n\t\tconst point = this._gizmos.position; //rotation center\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\t\tthis._rotationMatrix.makeRotationAxis( axis, - angle );\n\n\t\t//rotate camera\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Copy the current state to clipboard (as a readable JSON text).\n\t */\n\tcopyState() {\n\n\t\tlet state;\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tstate = JSON.stringify( {\n\t\t\t\tarcballState: {\n\t\t\t\t\tcameraFar: this.object.far,\n\t\t\t\t\tcameraFov: this.object.fov,\n\t\t\t\t\tcameraMatrix: this.object.matrix,\n\t\t\t\t\tcameraNear: this.object.near,\n\t\t\t\t\tcameraUp: this.object.up,\n\t\t\t\t\tcameraZoom: this.object.zoom,\n\t\t\t\t\tgizmoMatrix: this._gizmos.matrix,\n\t\t\t\t\ttarget: this.target\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t\tnavigator.clipboard.writeText( state );\n\n\t}\n\n\t/**\n\t * Set the controls state from the clipboard, assumes that the clipboard stores a JSON\n\t * text as saved from `copyState()`.\n\t */\n\tpasteState() {\n\n\t\tconst self = this;\n\t\tnavigator.clipboard.readText().then( function resolved( value ) {\n\n\t\t\tself.setStateFromJSON( value );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Saves the current state of the control. This can later be recover with `reset()`.\n\t */\n\tsaveState() {\n\n\t\tthis.object.updateMatrix();\n\t\tthis._gizmos.updateMatrix();\n\n\t\tthis._target0.copy( this.target );\n\t\tthis._cameraMatrixState0.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState0.copy( this._gizmos.matrix );\n\t\tthis._nearPos = this.object.near;\n\t\tthis._farPos = this.object.far;\n\t\tthis._zoom0 = this.object.zoom;\n\t\tthis._up0.copy( this.object.up );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fov0 = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Performs uniform scale operation around a given point.\n\t *\n\t * @private\n\t * @param {number} size - Scale factor.\n\t * @param {Vector3} point - Point around which scale.\n\t * @param {boolean} scaleGizmos - If gizmos should be scaled (Perspective only).\n\t * @returns {Object} Object with 'camera' and 'gizmo' fields containing transformation matrices resulting from the operation to be applied to the camera and gizmos.\n\t */\n\tscale( size, point, scaleGizmos = true ) {\n\n\t\t_scalePointTemp.copy( point );\n\t\tlet sizeInverse = 1 / size;\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//camera zoom\n\t\t\tthis.object.zoom = this._zoomState;\n\t\t\tthis.object.zoom *= size;\n\n\t\t\t//check min and max zoom\n\t\t\tif ( this.object.zoom > this.maxZoom ) {\n\n\t\t\t\tthis.object.zoom = this.maxZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.maxZoom;\n\n\t\t\t} else if ( this.object.zoom < this.minZoom ) {\n\n\t\t\t\tthis.object.zoom = this.minZoom;\n\t\t\t\tsizeInverse = this._zoomState / this.minZoom;\n\n\t\t\t}\n\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState );\t//gizmos position\n\n\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\t\t\tthis._translationMatrix.makeTranslation( - this._v3_1.x, - this._v3_1.y, - this._v3_1.z );\n\n\t\t\tthis._m4_2.makeTranslation( this._v3_1.x, this._v3_1.y, this._v3_1.z ).multiply( this._scaleMatrix );\n\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\n\n\t\t\t//move camera and gizmos to obtain pinch effect\n\t\t\t_scalePointTemp.sub( this._v3_1 );\n\n\t\t\tconst amount = _scalePointTemp.clone().multiplyScalar( sizeInverse );\n\t\t\t_scalePointTemp.sub( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _scalePointTemp.x, _scalePointTemp.y, _scalePointTemp.z );\n\t\t\tthis._m4_2.premultiply( this._m4_1 );\n\n\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\t\treturn _transformation;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\tthis._v3_2.setFromMatrixPosition( this._gizmoMatrixState );\n\n\t\t\t//move camera\n\t\t\tlet distance = this._v3_1.distanceTo( _scalePointTemp );\n\t\t\tlet amount = distance - ( distance * sizeInverse );\n\n\t\t\t//check min and max distance\n\t\t\tconst newDistance = distance - amount;\n\t\t\tif ( newDistance < this.minDistance ) {\n\n\t\t\t\tsizeInverse = this.minDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t} else if ( newDistance > this.maxDistance ) {\n\n\t\t\t\tsizeInverse = this.maxDistance / distance;\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\n\t\t\t}\n\n\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_1 ).normalize().multiplyScalar( amount );\n\n\t\t\tthis._m4_1.makeTranslation( _offset.x, _offset.y, _offset.z );\n\n\n\t\t\tif ( scaleGizmos ) {\n\n\t\t\t\t//scale gizmos so they appear in the same spot having the same dimension\n\t\t\t\tconst pos = this._v3_2;\n\n\t\t\t\tdistance = pos.distanceTo( _scalePointTemp );\n\t\t\t\tamount = distance - ( distance * sizeInverse );\n\t\t\t\t_offset.copy( _scalePointTemp ).sub( this._v3_2 ).normalize().multiplyScalar( amount );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( pos.x, pos.y, pos.z );\n\t\t\t\tthis._scaleMatrix.makeScale( sizeInverse, sizeInverse, sizeInverse );\n\n\t\t\t\tthis._m4_2.makeTranslation( _offset.x, _offset.y, _offset.z ).multiply( this._translationMatrix );\n\t\t\t\tthis._m4_2.multiply( this._scaleMatrix );\n\n\t\t\t\tthis._translationMatrix.makeTranslation( - pos.x, - pos.y, - pos.z );\n\n\t\t\t\tthis._m4_2.multiply( this._translationMatrix );\n\t\t\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.setTransformationMatrices( this._m4_1 );\n\n\t\t\t}\n\n\t\t\treturn _transformation;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets camera fov.\n\t *\n\t * @private\n\t * @param {number} value - The FOV to be set.\n\t */\n\tsetFov( value ) {\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis.object.fov = MathUtils.clamp( value, this.minFov, this.maxFov );\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Sets values in transformation object.\n\t *\n\t * @private\n\t * @param {?Matrix4} [camera=null] - Transformation to be applied to the camera.\n\t * @param {?Matrix4} [gizmos=null] - Transformation to be applied to gizmos.\n\t */\n\tsetTransformationMatrices( camera = null, gizmos = null ) {\n\n\t\tif ( camera != null ) {\n\n\t\t\tif ( _transformation.camera != null ) {\n\n\t\t\t\t_transformation.camera.copy( camera );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.camera = camera.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.camera = null;\n\n\t\t}\n\n\t\tif ( gizmos != null ) {\n\n\t\t\tif ( _transformation.gizmos != null ) {\n\n\t\t\t\t_transformation.gizmos.copy( gizmos );\n\n\t\t\t} else {\n\n\t\t\t\t_transformation.gizmos = gizmos.clone();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_transformation.gizmos = null;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Rotates camera around its direction axis passing by a given point by a given angle.\n\t *\n\t * @private\n\t * @param {Vector3} point - The point where the rotation axis is passing trough.\n\t * @param {number} angle - Angle in radians.\n\t * @returns {Object} The computed transformation matrix.\n\t */\n\tzRotate( point, angle ) {\n\n\t\tthis._rotationMatrix.makeRotationAxis( this._rotationAxis, angle );\n\t\tthis._translationMatrix.makeTranslation( - point.x, - point.y, - point.z );\n\n\t\tthis._m4_1.makeTranslation( point.x, point.y, point.z );\n\t\tthis._m4_1.multiply( this._rotationMatrix );\n\t\tthis._m4_1.multiply( this._translationMatrix );\n\n\t\tthis._v3_1.setFromMatrixPosition( this._gizmoMatrixState ).sub( point );\t//vector from rotation center to gizmos position\n\t\tthis._v3_2.copy( this._v3_1 ).applyAxisAngle( this._rotationAxis, angle );\t//apply rotation\n\t\tthis._v3_2.sub( this._v3_1 );\n\n\t\tthis._m4_2.makeTranslation( this._v3_2.x, this._v3_2.y, this._v3_2.z );\n\n\t\tthis.setTransformationMatrices( this._m4_1, this._m4_2 );\n\t\treturn _transformation;\n\n\t}\n\n\t/**\n\t * Returns the raycaster that is used for user interaction. This object is shared between all\n\t * instances of `ArcballControls`.\n\t *\n\t * @returns {Raycaster} The internal raycaster.\n\t */\n\tgetRaycaster() {\n\n\t\treturn _raycaster;\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the 3D object surface.\n\t *\n\t * @private\n\t * @param {Vector2} cursor - Cursor coordinates in NDC.\n\t * @param {Camera} camera - Virtual camera.\n\t * @returns {?Vector3} The point of intersection with the model, if exist, null otherwise.\n\t */\n\tunprojectOnObj( cursor, camera ) {\n\n\t\tconst raycaster = this.getRaycaster();\n\t\traycaster.near = camera.near;\n\t\traycaster.far = camera.far;\n\t\traycaster.setFromCamera( cursor, camera );\n\n\t\tconst intersect = raycaster.intersectObjects( this.scene.children, true );\n\n\t\tfor ( let i = 0; i < intersect.length; i ++ ) {\n\n\t\t\tif ( intersect[ i ].object.uuid != this._gizmos.uuid && intersect[ i ].face != null ) {\n\n\t\t\t\treturn intersect[ i ].point.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Unproject the cursor on the trackball surface.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {number} tbRadius - The trackball radius.\n\t * @returns {Vector3} The unprojected point on the trackball surface.\n\t */\n\tunprojectOnTbSurface( camera, cursorX, cursorY, canvas, tbRadius ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\tconst x2 = Math.pow( this._v2_1.x, 2 );\n\t\t\tconst y2 = Math.pow( this._v2_1.y, 2 );\n\t\t\tconst r2 = Math.pow( this._tbRadius, 2 );\n\n\t\t\tif ( x2 + y2 <= r2 * 0.5 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v3_1.setZ( Math.sqrt( r2 - ( x2 + y2 ) ) );\n\n\t\t\t} else {\n\n\t\t\t\t//intersection with hyperboloid\n\t\t\t\tthis._v3_1.setZ( ( r2 * 0.5 ) / ( Math.sqrt( x2 + y2 ) ) );\n\n\t\t\t}\n\n\t\t\treturn this._v3_1;\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\t\t\tconst cameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\t\t\tconst radius2 = Math.pow( tbRadius, 2 );\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( this._v3_1.x, this._v3_1.y, tbRadius );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and trackball surface\n\t\t\t *|y = m * x + q\n\t\t\t *|x^2 + y^2 = r^2\n\t\t\t *\n\t\t\t * (m^2 + 1) * x^2 + (2 * m * q) * x + q^2 - r^2 = 0\n\t\t\t */\n\t\t\tlet a = Math.pow( m, 2 ) + 1;\n\t\t\tlet b = 2 * m * q;\n\t\t\tlet c = Math.pow( q, 2 ) - radius2;\n\t\t\tlet delta = Math.pow( b, 2 ) - ( 4 * a * c );\n\n\t\t\tif ( delta >= 0 ) {\n\n\t\t\t\t//intersection with sphere\n\t\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\t\tconst angle = MathUtils.RAD2DEG * this._v2_1.angle();\n\n\t\t\t\tif ( angle >= 45 ) {\n\n\t\t\t\t\t//if angle between intersection point and X' axis is >= 45, return that point\n\t\t\t\t\t//otherwise, calculate intersection point with hyperboloid\n\n\t\t\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\t\t\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\t\t\treturn rayDir;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//intersection with hyperboloid\n\t\t\t/*\n\t\t\t *|y = m * x + q\n\t\t\t *|y = (1 / x) * (r^2 / 2)\n\t\t\t *\n\t\t\t * m * x^2 + q * x - r^2 / 2 = 0\n\t\t\t */\n\n\t\t\ta = m;\n\t\t\tb = q;\n\t\t\tc = - radius2 * 0.5;\n\t\t\tdelta = Math.pow( b, 2 ) - ( 4 * a * c );\n\t\t\tthis._v2_1.setX( ( - b - Math.sqrt( delta ) ) / ( 2 * a ) );\n\t\t\tthis._v2_1.setY( m * this._v2_1.x + q );\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( this._v2_1.x, 2 ) + Math.pow( ( cameraGizmoDistance - this._v2_1.y ), 2 ) );\n\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z += cameraGizmoDistance;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Unprojects the cursor on the plane passing through the center of the trackball orthogonal to the camera.\n\t *\n\t * @private\n\t * @param {Camera} camera - The virtual camera.\n\t * @param {number} cursorX - Cursor horizontal coordinate on screen.\n\t * @param {number} cursorY - Cursor vertical coordinate on screen.\n\t * @param {HTMLElement} canvas - The canvas where the renderer draws its output.\n\t * @param {boolean} [initialDistance=false] - If initial distance between camera and gizmos should be used for calculations instead of current (Perspective only).\n\t * @returns {Vector3} The unprojected point on the trackball plane.\n\t */\n\tunprojectOnTbPlane( camera, cursorX, cursorY, canvas, initialDistance = false ) {\n\n\t\tif ( camera.type == 'OrthographicCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorPosition( cursorX, cursorY, canvas ) );\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, 0 );\n\n\t\t\treturn this._v3_1.clone();\n\n\t\t} else if ( camera.type == 'PerspectiveCamera' ) {\n\n\t\t\tthis._v2_1.copy( this.getCursorNDC( cursorX, cursorY, canvas ) );\n\n\t\t\t//unproject cursor on the near plane\n\t\t\tthis._v3_1.set( this._v2_1.x, this._v2_1.y, - 1 );\n\t\t\tthis._v3_1.applyMatrix4( camera.projectionMatrixInverse );\n\n\t\t\tconst rayDir = this._v3_1.clone().normalize(); //unprojected ray direction\n\n\t\t\t//\t  camera\n\t\t\t//\t\t|\\\n\t\t\t//\t\t| \\\n\t\t\t//\t\t|  \\\n\t\t\t//\th\t|\t\\\n\t\t\t//\t\t| \t \\\n\t\t\t//\t\t| \t  \\\n\t\t\t//\t_ _ | _ _ _\\ _ _  near plane\n\t\t\t//\t\t\tl\n\n\t\t\tconst h = this._v3_1.z;\n\t\t\tconst l = Math.sqrt( Math.pow( this._v3_1.x, 2 ) + Math.pow( this._v3_1.y, 2 ) );\n\t\t\tlet cameraGizmoDistance;\n\n\t\t\tif ( initialDistance ) {\n\n\t\t\t\tcameraGizmoDistance = this._v3_1.setFromMatrixPosition( this._cameraMatrixState0 ).distanceTo( this._v3_2.setFromMatrixPosition( this._gizmoMatrixState0 ) );\n\n\t\t\t} else {\n\n\t\t\t\tcameraGizmoDistance = camera.position.distanceTo( this._gizmos.position );\n\n\t\t\t}\n\n\t\t\t/*\n\t\t\t * calculate intersection point between unprojected ray and the plane\n\t\t\t *|y = mx + q\n\t\t\t *|y = 0\n\t\t\t *\n\t\t\t * x = -q/m\n\t\t\t*/\n\t\t\tif ( l == 0 ) {\n\n\t\t\t\t//ray aligned with camera\n\t\t\t\trayDir.set( 0, 0, 0 );\n\t\t\t\treturn rayDir;\n\n\t\t\t}\n\n\t\t\tconst m = h / l;\n\t\t\tconst q = cameraGizmoDistance;\n\t\t\tconst x = - q / m;\n\n\t\t\tconst rayLength = Math.sqrt( Math.pow( q, 2 ) + Math.pow( x, 2 ) );\n\t\t\trayDir.multiplyScalar( rayLength );\n\t\t\trayDir.z = 0;\n\t\t\treturn rayDir;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates camera and gizmos state.\n\t *\n\t * @private\n\t */\n\tupdateMatrixState() {\n\n\t\t//update camera and gizmos state\n\t\tthis._cameraMatrixState.copy( this.object.matrix );\n\t\tthis._gizmoMatrixState.copy( this._gizmos.matrix );\n\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis._cameraProjectionState.copy( this.object.projectionMatrix );\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis._zoomState = this.object.zoom;\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._fovState = this.object.fov;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the trackball FSA.\n\t *\n\t * @private\n\t * @param {STATE} newState - New state of the FSA.\n\t * @param {boolean} updateMatrices - If matrices state should be updated.\n\t */\n\tupdateTbState( newState, updateMatrices ) {\n\n\t\tthis._state = newState;\n\t\tif ( updateMatrices ) {\n\n\t\t\tthis.updateMatrixState();\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tif ( this.target.equals( this._currentTarget ) === false ) {\n\n\t\t\tthis._gizmos.position.copy( this.target );\t//for correct radius calculation\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tthis.makeGizmos( this.target, this._tbRadius );\n\t\t\tthis._currentTarget.copy( this.target );\n\n\t\t}\n\n\t\t//check min/max parameters\n\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t//check zoom\n\t\t\tif ( this.object.zoom > this.maxZoom || this.object.zoom < this.minZoom ) {\n\n\t\t\t\tconst newZoom = MathUtils.clamp( this.object.zoom, this.minZoom, this.maxZoom );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newZoom / this.object.zoom, this._gizmos.position, true ) );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t//check distance\n\t\t\tconst distance = this.object.position.distanceTo( this._gizmos.position );\n\n\t\t\tif ( distance > this.maxDistance + _EPS || distance < this.minDistance - _EPS ) {\n\n\t\t\t\tconst newDistance = MathUtils.clamp( distance, this.minDistance, this.maxDistance );\n\t\t\t\tthis.applyTransformMatrix( this.scale( newDistance / distance, this._gizmos.position ) );\n\t\t\t\tthis.updateMatrixState();\n\n\t\t\t}\n\n\t\t\t//check fov\n\t\t\tif ( this.object.fov < this.minFov || this.object.fov > this.maxFov ) {\n\n\t\t\t\tthis.object.fov = MathUtils.clamp( this.object.fov, this.minFov, this.maxFov );\n\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tconst oldRadius = this._tbRadius;\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\t\t\tif ( oldRadius < this._tbRadius - _EPS || oldRadius > this._tbRadius + _EPS ) {\n\n\t\t\t\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\t\t\t\tconst newRadius = this._tbRadius / scale;\n\t\t\t\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\t\t\t\tconst points = curve.getPoints( this._curvePts );\n\t\t\t\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\t\t\t\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\t\t\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.object.lookAt( this._gizmos.position );\n\n\t}\n\n\tsetStateFromJSON( json ) {\n\n\t\tconst state = JSON.parse( json );\n\n\t\tif ( state.arcballState != undefined ) {\n\n\t\t\tthis.target.fromArray( state.arcballState.target );\n\n\t\t\tthis._cameraMatrixState.fromArray( state.arcballState.cameraMatrix.elements );\n\t\t\tthis._cameraMatrixState.decompose( this.object.position, this.object.quaternion, this.object.scale );\n\n\t\t\tthis.object.up.copy( state.arcballState.cameraUp );\n\t\t\tthis.object.near = state.arcballState.cameraNear;\n\t\t\tthis.object.far = state.arcballState.cameraFar;\n\n\t\t\tthis.object.zoom = state.arcballState.cameraZoom;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis.object.fov = state.arcballState.cameraFov;\n\n\t\t\t}\n\n\t\t\tthis._gizmoMatrixState.fromArray( state.arcballState.gizmoMatrix.elements );\n\t\t\tthis._gizmoMatrixState.decompose( this._gizmos.position, this._gizmos.quaternion, this._gizmos.scale );\n\n\t\t\tthis.object.updateMatrix();\n\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\tthis._gizmos.updateMatrix();\n\n\t\t\tthis._tbRadius = this.calculateTbRadius( this.object );\n\t\t\tconst gizmoTmp = new Matrix4().copy( this._gizmoMatrixState0 );\n\t\t\tthis.makeGizmos( this._gizmos.position, this._tbRadius );\n\t\t\tthis._gizmoMatrixState0.copy( gizmoTmp );\n\n\t\t\tthis.object.lookAt( this._gizmos.position );\n\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t}\n\n\t}\n\n}\n\n//listeners\n\nfunction onWindowResize() {\n\n\tconst scale = ( this._gizmos.scale.x + this._gizmos.scale.y + this._gizmos.scale.z ) / 3;\n\tthis._tbRadius = this.calculateTbRadius( this.object );\n\n\tconst newRadius = this._tbRadius / scale;\n\tconst curve = new EllipseCurve( 0, 0, newRadius, newRadius );\n\tconst points = curve.getPoints( this._curvePts );\n\tconst curveGeometry = new BufferGeometry().setFromPoints( points );\n\n\n\tfor ( const gizmo in this._gizmos.children ) {\n\n\t\tthis._gizmos.children[ gizmo ].geometry = curveGeometry;\n\n\t}\n\n\tthis.dispatchEvent( _changeEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( ! this.enabled ) {\n\n\t\treturn;\n\n\t}\n\n\tfor ( let i = 0; i < this.mouseActions.length; i ++ ) {\n\n\t\tif ( this.mouseActions[ i ].mouse == 2 ) {\n\n\t\t\t//prevent only if button 2 is actually used\n\t\t\tevent.preventDefault();\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerCancel() {\n\n\tthis._touchStart.splice( 0, this._touchStart.length );\n\tthis._touchCurrent.splice( 0, this._touchCurrent.length );\n\tthis._input = INPUT.NONE;\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( event.button == 0 && event.isPrimary ) {\n\n\t\tthis._downValid = true;\n\t\tthis._downEvents.push( event );\n\t\tthis._downStart = performance.now();\n\n\t} else {\n\n\t\tthis._downValid = false;\n\n\t}\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tthis._touchStart.push( event );\n\t\tthis._touchCurrent.push( event );\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.NONE:\n\n\t\t\t\t//singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\n\t\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//doubleStart\n\t\t\t\tthis._input = INPUT.TWO_FINGER;\n\n\t\t\t\tthis.onRotateStart();\n\t\t\t\tthis.onPinchStart();\n\t\t\t\tthis.onDoublePanStart();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//multipleStart\n\t\t\t\tthis._input = INPUT.MULT_FINGER;\n\t\t\t\tthis.onTriplePanStart( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.NONE ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tthis._mouseOp = this.getOpFromAction( event.button, modifier );\n\t\tif ( this._mouseOp != null ) {\n\n\t\t\twindow.addEventListener( 'pointermove', this._onPointerMove );\n\t\t\twindow.addEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t//singleStart\n\t\t\tthis._input = INPUT.CURSOR;\n\t\t\tthis._button = event.button;\n\t\t\tthis.onSinglePanStart( event, this._mouseOp );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\n\t\t\t\t//singleMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onSinglePanMove( event, STATE.ROTATE );\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\tconst movement = this.calculatePointersDistance( this._touchCurrent[ 0 ], event ) * this._devPxRatio;\n\n\t\t\t\tif ( movement >= this._switchSensibility ) {\n\n\t\t\t\t\t//singleMove\n\t\t\t\t\tthis._input = INPUT.ONE_FINGER;\n\t\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\t\tthis.onSinglePanStart( event, 'ROTATE' );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//rotate/pan/pinchMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onRotateMove();\n\t\t\t\tthis.onPinchMove();\n\t\t\t\tthis.onDoublePanMove();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\t//multMove\n\t\t\t\tthis.updateTouchEvent( event );\n\n\t\t\t\tthis.onTriplePanMove( event );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOpState = this.getOpStateFromAction( this._button, modifier );\n\n\t\tif ( mouseOpState != null ) {\n\n\t\t\tthis.onSinglePanMove( event, mouseOpState );\n\n\t\t}\n\n\t}\n\n\t//checkDistance\n\tif ( this._downValid ) {\n\n\t\tconst movement = this.calculatePointersDistance( this._downEvents[ this._downEvents.length - 1 ], event ) * this._devPxRatio;\n\t\tif ( movement > this._movementThreshold ) {\n\n\t\t\tthis._downValid = false;\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( event.pointerType == 'touch' && this._input != INPUT.CURSOR ) {\n\n\t\tconst nTouch = this._touchCurrent.length;\n\n\t\tfor ( let i = 0; i < nTouch; i ++ ) {\n\n\t\t\tif ( this._touchCurrent[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._touchCurrent.splice( i, 1 );\n\t\t\t\tthis._touchStart.splice( i, 1 );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tswitch ( this._input ) {\n\n\t\t\tcase INPUT.ONE_FINGER:\n\t\t\tcase INPUT.ONE_FINGER_SWITCHED:\n\n\t\t\t\t//singleEnd\n\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\tthis.onSinglePanEnd();\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.TWO_FINGER:\n\n\t\t\t\t//doubleEnd\n\t\t\t\tthis.onDoublePanEnd( event );\n\t\t\t\tthis.onPinchEnd( event );\n\t\t\t\tthis.onRotateEnd( event );\n\n\t\t\t\t//switching to singleStart\n\t\t\t\tthis._input = INPUT.ONE_FINGER_SWITCHED;\n\n\t\t\t\tbreak;\n\n\t\t\tcase INPUT.MULT_FINGER:\n\n\t\t\t\tif ( this._touchCurrent.length == 0 ) {\n\n\t\t\t\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\t\t\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\t\t\t\t//multCancel\n\t\t\t\t\tthis._input = INPUT.NONE;\n\t\t\t\t\tthis.onTriplePanEnd();\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t} else if ( event.pointerType != 'touch' && this._input == INPUT.CURSOR ) {\n\n\t\twindow.removeEventListener( 'pointermove', this._onPointerMove );\n\t\twindow.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t\tthis._input = INPUT.NONE;\n\t\tthis.onSinglePanEnd();\n\t\tthis._button = - 1;\n\n\t}\n\n\tif ( event.isPrimary ) {\n\n\t\tif ( this._downValid ) {\n\n\t\t\tconst downTime = event.timeStamp - this._downEvents[ this._downEvents.length - 1 ].timeStamp;\n\n\t\t\tif ( downTime <= this._maxDownTime ) {\n\n\t\t\t\tif ( this._nclicks == 0 ) {\n\n\t\t\t\t\t//first valid click detected\n\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst clickInterval = event.timeStamp - this._clickStart;\n\t\t\t\t\tconst movement = this.calculatePointersDistance( this._downEvents[ 1 ], this._downEvents[ 0 ] ) * this._devPxRatio;\n\n\t\t\t\t\tif ( clickInterval <= this._maxInterval && movement <= this._posThreshold ) {\n\n\t\t\t\t\t\t//second valid click detected\n\t\t\t\t\t\t//fire double tap and reset values\n\t\t\t\t\t\tthis._nclicks = 0;\n\t\t\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\t\t\t\t\t\tthis.onDoubleTap( event );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t//new 'first click'\n\t\t\t\t\t\tthis._nclicks = 1;\n\t\t\t\t\t\tthis._downEvents.shift();\n\t\t\t\t\t\tthis._clickStart = performance.now();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis._downValid = false;\n\t\t\t\tthis._nclicks = 0;\n\t\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis._nclicks = 0;\n\t\t\tthis._downEvents.splice( 0, this._downEvents.length );\n\n\t\t}\n\n\t}\n\n}\n\nfunction onWheel( event ) {\n\n\tif ( this.enabled && this.enableZoom ) {\n\n\t\tlet modifier = null;\n\n\t\tif ( event.ctrlKey || event.metaKey ) {\n\n\t\t\tmodifier = 'CTRL';\n\n\t\t} else if ( event.shiftKey ) {\n\n\t\t\tmodifier = 'SHIFT';\n\n\t\t}\n\n\t\tconst mouseOp = this.getOpFromAction( 'WHEEL', modifier );\n\n\t\tif ( mouseOp != null ) {\n\n\t\t\tevent.preventDefault();\n\t\t\tthis.dispatchEvent( _startEvent );\n\n\t\t\tconst notchDeltaY = 125; //distance of one notch of mouse wheel\n\t\t\tlet sgn = event.deltaY / notchDeltaY;\n\n\t\t\tlet size = 1;\n\n\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\tsize = 1 / this.scaleFactor;\n\n\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\tsize = this.scaleFactor;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseOp ) {\n\n\t\t\t\tcase 'ZOOM':\n\n\t\t\t\t\tthis.updateTbState( STATE.SCALE, true );\n\n\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this.cursorZoom && this.enablePan ) {\n\n\t\t\t\t\t\tlet scalePoint;\n\n\t\t\t\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).multiplyScalar( 1 / this.object.zoom ).add( this._gizmos.position );\n\n\t\t\t\t\t\t} else if ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t\tscalePoint = this.unprojectOnTbPlane( this.object, event.clientX, event.clientY, this.domElement ).applyQuaternion( this.object.quaternion ).add( this._gizmos.position );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, scalePoint ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'FOV':\n\n\t\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\tthis.updateTbState( STATE.FOV, true );\n\n\n\t\t\t\t\t\t//Vertigo effect\n\n\t\t\t\t\t\t//\t  fov / 2\n\t\t\t\t\t\t//\t\t|\\\n\t\t\t\t\t\t//\t\t| \\\n\t\t\t\t\t\t//\t\t|  \\\n\t\t\t\t\t\t//\tx\t|\t\\\n\t\t\t\t\t\t//\t\t| \t \\\n\t\t\t\t\t\t//\t\t| \t  \\\n\t\t\t\t\t\t//\t\t| _ _ _\\\n\t\t\t\t\t\t//\t\t\ty\n\n\t\t\t\t\t\t//check for iOs shift shortcut\n\t\t\t\t\t\tif ( event.deltaX != 0 ) {\n\n\t\t\t\t\t\t\tsgn = event.deltaX / notchDeltaY;\n\n\t\t\t\t\t\t\tsize = 1;\n\n\t\t\t\t\t\t\tif ( sgn > 0 ) {\n\n\t\t\t\t\t\t\t\tsize = 1 / ( Math.pow( this.scaleFactor, sgn ) );\n\n\t\t\t\t\t\t\t} else if ( sgn < 0 ) {\n\n\t\t\t\t\t\t\t\tsize = Math.pow( this.scaleFactor, - sgn );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._v3_1.setFromMatrixPosition( this._cameraMatrixState );\n\t\t\t\t\t\tconst x = this._v3_1.distanceTo( this._gizmos.position );\n\t\t\t\t\t\tlet xNew = x / size;\t//distance between camera and gizmos if scale(size, scalepoint) would be performed\n\n\t\t\t\t\t\t//check min and max distance\n\t\t\t\t\t\txNew = MathUtils.clamp( xNew, this.minDistance, this.maxDistance );\n\n\t\t\t\t\t\tconst y = x * Math.tan( MathUtils.DEG2RAD * this.object.fov * 0.5 );\n\n\t\t\t\t\t\t//calculate new fov\n\t\t\t\t\t\tlet newFov = MathUtils.RAD2DEG * ( Math.atan( y / xNew ) * 2 );\n\n\t\t\t\t\t\t//check min and max fov\n\t\t\t\t\t\tif ( newFov > this.maxFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.maxFov;\n\n\t\t\t\t\t\t} else if ( newFov < this.minFov ) {\n\n\t\t\t\t\t\t\tnewFov = this.minFov;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newDistance = y / Math.tan( MathUtils.DEG2RAD * ( newFov / 2 ) );\n\t\t\t\t\t\tsize = x / newDistance;\n\n\t\t\t\t\t\tthis.setFov( newFov );\n\t\t\t\t\t\tthis.applyTransformMatrix( this.scale( size, this._gizmos.position, false ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( this._grid != null ) {\n\n\t\t\t\t\t\tthis.disposeGrid();\n\t\t\t\t\t\tthis.drawGrid();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.updateTbState( STATE.IDLE, false );\n\n\t\t\t\t\tthis.dispatchEvent( _changeEvent );\n\t\t\t\t\tthis.dispatchEvent( _endEvent );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { ArcballControls };\n",null,"function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n",null,null,null,null,null,null,null,null,null,null],"names":["STATE","IDLE","Symbol","ROTATE","PAN","SCALE","FOV","FOCUS","ZROTATE","TOUCH_MULTI","ANIMATION_FOCUS","ANIMATION_ROTATE","INPUT","NONE","ONE_FINGER","ONE_FINGER_SWITCHED","TWO_FINGER","MULT_FINGER","CURSOR","_center","x","y","_transformation","camera","Matrix4","gizmos","_changeEvent","type","_startEvent","_endEvent","_raycaster","Raycaster","_offset","Vector3","_gizmoMatrixStateTemp","_cameraMatrixStateTemp","_scalePointTemp","_EPS","ArcballControls","Controls","constructor","domElement","scene","super","this","target","_currentTarget","radiusFactor","mouseActions","_mouseOp","_v2_1","Vector2","_v3_1","_v3_2","_m4_1","_m4_2","_quat","Quaternion","_translationMatrix","_rotationMatrix","_scaleMatrix","_rotationAxis","_cameraMatrixState","_cameraProjectionState","_fovState","_upState","_zoomState","_nearPos","_farPos","_gizmoMatrixState","_up0","_zoom0","_fov0","_initialNear","_nearPos0","_initialFar","_farPos0","_cameraMatrixState0","_gizmoMatrixState0","_target0","_button","_touchStart","_touchCurrent","_input","_switchSensibility","_startFingerDistance","_currentFingerDistance","_startFingerRotation","_currentFingerRotation","_devPxRatio","_downValid","_nclicks","_downEvents","_downStart","_clickStart","_maxDownTime","_maxInterval","_posThreshold","_movementThreshold","_currentCursorPosition","_startCursorPosition","_grid","_gridPosition","_gizmos","Group","_curvePts","_timeStart","_animationId","focusAnimationTime","_timePrev","_timeCurrent","_anglePrev","_angleCurrent","_cursorPosPrev","_cursorPosCurr","_wPrev","_wCurr","adjustNearFar","scaleFactor","dampingFactor","wMax","enableAnimations","enableGrid","cursorZoom","minFov","maxFov","rotateSpeed","enablePan","enableRotate","enableZoom","enableGizmos","enableFocus","minDistance","maxDistance","Infinity","minZoom","maxZoom","_tbRadius","_state","setCamera","add","initializeMouseActions","_onContextMenu","onContextMenu","bind","_onWheel","onWheel","_onPointerUp","onPointerUp","_onPointerMove","onPointerMove","_onPointerDown","onPointerDown","_onPointerCancel","onPointerCancel","_onWindowResize","onWindowResize","connect","element","style","touchAction","window","devicePixelRatio","addEventListener","passive","disconnect","removeEventListener","onSinglePanStart","event","operation","enabled","dispatchEvent","setCenter","clientX","clientY","cancelAnimationFrame","activateGizmos","updateTbState","copy","unprojectOnTbPlane","object","drawGrid","unprojectOnTbSurface","performance","now","isPerspectiveCamera","setY","getCursorNDC","onSinglePanMove","opState","restart","applyTransformMatrix","pan","disposeGrid","distance","distanceTo","angle","angleTo","amount","Math","max","rotate","calculateRotationAxis","calculateAngularSpeed","screenNotches","movement","size","pow","setFromMatrixPosition","scale","position","xNew","MathUtils","clamp","tan","DEG2RAD","newFov","RAD2DEG","atan","newDistance","setFov","sub","normalize","multiplyScalar","makeTranslation","z","onSinglePanEnd","w","abs","self","requestAnimationFrame","t","rotationAxis","onRotationAnim","min","onDoubleTap","hitP","unprojectOnObj","onFocusAnim","focus","onDoublePanStart","onDoublePanMove","onDoublePanEnd","onRotateStart","getAngle","getWorldDirection","onRotateMove","rotationPoint","applyQuaternion","quaternion","zoom","zRotate","onRotateEnd","onPinchStart","calculatePointersDistance","onPinchMove","scalePoint","isOrthographicCamera","onPinchEnd","onTriplePanStart","nFingers","length","i","onTriplePanMove","onTriplePanEnd","setMouseAction","compareMouseAction","action1","action2","mouse","key","state","includes","action","splice","push","unsetMouseAction","getOpFromAction","getOpStateFromAction","p1","p2","atan2","PI","updateTouchEvent","pointerId","transformation","premultiply","decompose","updateMatrix","up","calculateTbRadius","cameraDistance","bb","Box3","setFromObject","sphere","Sphere","getBoundingSphere","adjustedNearPosition","radius","center","regularNearPosition","minNearPos","near","adjustedFarPosition","regularFarPosition","minFarPos","far","updateProjectionMatrix","update","p0","t0","t1","sqrt","vec1","vec2","extractRotation","setFromRotationMatrix","crossVectors","clone","halfFovV","fov","halfFovH","top","right","point","color","multiplier","divisions","maxLength","tick","width","left","height","bottom","GridHelper","rotateX","dispose","remove","easeOutCubic","isActive","gizmoX","children","gizmoY","gizmoZ","material","setValues","opacity","cursorX","cursorY","canvas","canvasRect","getBoundingClientRect","setX","getCursorPosition","lookAt","matrix","projectionMatrix","makeGizmos","setGizmosVisible","value","visible","setTbRadius","points","EllipseCurve","getPoints","curveGeometry","BufferGeometry","setFromPoints","gizmo","geometry","tbCenter","tbRadius","curveMaterialX","LineBasicMaterial","fog","transparent","curveMaterialY","curveMaterialZ","Line","rotation","identity","setPosition","makeScale","traverse","isLine","clear","time","cameraMatrix","gizmoMatrix","animTime","w0","deltaTime","adjust","distanceFactor","set","setTransformationMatrices","reset","axis","makeRotationAxis","multiply","copyState","JSON","stringify","arcballState","cameraFar","cameraNear","cameraUp","cameraZoom","cameraFov","navigator","clipboard","writeText","pasteState","readText","then","setStateFromJSON","saveState","scaleGizmos","sizeInverse","pos","applyAxisAngle","getRaycaster","cursor","raycaster","setFromCamera","intersect","intersectObjects","uuid","face","x2","y2","r2","setZ","applyMatrix4","projectionMatrixInverse","rayDir","cameraGizmoDistance","radius2","h","l","m","q","a","b","c","delta","rayLength","initialDistance","updateMatrixState","newState","updateMatrices","equals","newZoom","oldRadius","newRadius","json","parse","undefined","fromArray","elements","gizmoTmp","preventDefault","button","isPrimary","pointerType","modifier","ctrlKey","metaKey","shiftKey","mouseOpState","nTouch","timeStamp","clickInterval","shift","mouseOp","notchDeltaY","sgn","deltaY","deltaX","ExplosionMode","css","ref","insertAt","document","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","EXPLODER_CONSTANTS","PROGRESS","DEFAULT","MIN","MAX","STEP","MULTIPLIER","EXPOSURE","DEFAULT_DURATION","DEFAULT_MAX_DISTANCE","DEFAULT_ADAPT_SIZE","WEIGHTS","BASE","FORCE_FIELD_OFFSET","LIGHTS","SCENE","AMBIENT","HEMISPHERE","MAIN_DIRECTIONAL","BACK_DIRECTIONAL","SIDE_DIRECTIONAL","INTERNAL","DIRECTIONAL","DIRECTION","MIN_LENGTH","ANGLE_FACTOR","Z_FACTOR","INDEX_ANGLE","XY_OFFSET","Z_OFFSET","createTextSprite","text","ctx","getContext","beginPath","arc","fillStyle","fill","font","textAlign","textBaseline","fillText","texture","CanvasTexture","SpriteMaterial","map","sprite","Sprite","calculateDirection","objectPosition","getWorldPosition","direction","subVectors","hash","str","charCodeAt","hashString","cos","sin","parent","index","indexOf","getFileName","path","parts","split","isMobile","test","userAgent","innerWidth","ExploderCore","model","renderer","options","progress","mode","RADIAL","originalPositions","Map","originalRotations","originalScales","explodeDirections","axialDistances","sizeWeights","hierarchicalDepths","modelRadius","onProgressChangeCallback","explodableMeshes","internalLights","duration","createUI","viewport","body","uiStyle","directionStrategy","axialVector","adaptModel","modelUrl","showUpload","showHelpers","showPanel","showProgress","wheelControlExplosion","models","initialModel","adaptModelToScene","box","modelCenter","getCenter","saveOriginalTransforms","setupInternalLighting","getSize","maxDim","newCenter","ambientLight","AmbientLight","hemisphereLight","HemisphereLight","lightGroup","Object3D","light","DirectionalLight","fillLightIntensity","topRightFill","fillTarget","setInternalLightingVisible","forEach","render","setInternalLightingExposure","exposure","intensity","calculateAxialDistances","axialDir","dot","axialSize","mesh","originalPosition","get","dist","traverseAndSave","calculateSizeWeights","calculateHierarchicalDepths","maxDepth","depths","depth","maxVolume","volumes","Mesh","boundingBox","computeBoundingBox","volume","vol","child","setModel","updateInternalLighting","lightDist","directions","dirLights","filter","setProgress","updateExplodedPositions","baseDistance","targetWorldPosition","AXIAL","axialDistance","NORMALIZED_RADIAL","relativePos","SIZE_WEIGHTED","weight","HIERARCHICAL","depthWeight","FORCE_FIELD","originalPos","forceMagnitude","worldToLocal","setMode","getMode","setAxialVector","vector","getAxialVector","resetToOriginalPositions","originalRotation","originalScale","targetPosition","setProgressChangeCallback","callback","setMultiplier","getMultiplier","getProgress","getModelCenter","getOptions","smoothStep","roundedRectSDF","qx","qy","LiquidGlass","targetElement","mouseUsed","canvasDPI","id","random","toString","substr","fragment","uv","ix","iy","displacement","scaled","init","svg","createElementNS","setAttribute","defs","feImage","feDisplacementMap","context","updateSize","backdropFilter","webkitBackdropFilter","e","rect","mouseProxy","Proxy","prop","data","Uint8ClampedArray","maxScale","rawValues","floor","dx","dy","r","g","putImageData","ImageData","setAttributeNS","toDataURL","ExploderPanel","container","onMultiplierChange","onExposureChange","onModeChange","onAxialChange","onModelChange","onHelperVisibilityChange","onReset","initialMultiplier","initialExposure","initialMode","initialAxial","initialHelperVisible","modeButtons","styles","section","sectionHeader","title","labelContainer","label","slider","hint","grid","select","buttonReset","buttonResetHover","buttonResetActive","zoomContainer","zoomButton","zoomButtonHover","zoomButtonActive","className","applyStyle","header","innerHTML","contentWrapper","hasModels","modelSection","createSection","modelSelect","option","modelPath","textContent","pop","selected","uploadBtn","fileInput","querySelector","onclick","click","onchange","file","files","url","URL","createObjectURL","multiplierSection","multiplierLabelWrap","createLabelWrapper","multiplierDisplay","toFixed","multiplierSlider","step","exposureSection","exposureLabelWrap","exposureDisplay","exposureSlider","modeSection","modeGrid","icon","btn","handleModeClick","axialContainer","axialSelect","v","opt","helperSection","helperRow","helperToggle","checked","accentColor","helperText","footer","resetButton","onmouseenter","onmouseleave","onmousedown","onmouseup","oninput","parseFloat","updateMultiplier","updateExposure","Number","liquidGlass","offsetHeight","ResizeObserver","observe","sec","hintEl","wrap","updateMode","el","existing","getAttribute","show","display","hide","_progress","classList","updateHelperVisibility","updateAxialVector","parentNode","removeChild","ExploderHUD","onProgressChange","initialProgress","card","progressContainer","valueDisplay","round","old","ExploderInfoHUD","initialModelName","initialFaceCount","nameCard","content","modelNameDisplay","faceCountDisplay","toLocaleString","statusLabel","statusText","liquidGlass1","liquidGlass2","name","faceCount","setModelName","setFaceCount","count","CompositeUI","modelName","panel","hud","infoHUD","createScrollGuide","updateResponsiveState","resizeHandler","scrollGuide","innerText","stopPropagation","updateModel","updateInfo","Error","getContainer","HTMLElement","getComputedStyle","ExploderZoomControls","controls","zoomStep","zoomInBtn","zoomOutBtn","applyLiquidGlass","addHoverEffects","factor","currentStyle","replace","arg1","core","ui","gridHelper","axesHelper","axisLabels","zoomControls","boundOnWheel","initCore","initializeAutoMode","containerElement","console","warn","Scene","background","Color","PerspectiveCamera","clientWidth","clientHeight","WebGLRenderer","antialias","alpha","logarithmicDepthBuffer","setSize","setPixelRatio","toneMapping","ACESFilmicToneMapping","toneMappingExposure","shadowMap","cameraLightGroup","mainSun","castShadow","mainTarget","fillLight","extraFillLight","extraTarget","AxesHelper","labelX","labelY","labelZ","finalUrl","GLTFLoader","load","gltf","loadedModel","node","isMesh","receiveShadow","animate","onResize","aspect","attributes","calculateFaceCount","setExposure","handleModelChange","handleHelperVisibilityChange","currentProgress","newProgress","onModelChangeCallback","loadModelAuto","oldModel","newModel","startsWith","setTimeout","revokeObjectURL","onHelperVisibilityChangeCallback","setModelChangeCallback","setHelperVisibilityChangeCallback","setHelperVisibility","showUI","hideUI","Array","isArray"],"mappings":";;;;;iJAmBA,MAAMA,EAAQ,CAEbC,KAAMC,SACNC,OAAQD,SACRE,IAAKF,SACLG,MAAOH,SACPI,IAAKJ,SACLK,MAAOL,SACPM,QAASN,SACTO,YAAaP,SACbQ,gBAAiBR,SACjBS,iBAAkBT,UAIbU,EAAQ,CAEbC,KAAMX,SACNY,WAAYZ,SACZa,oBAAqBb,SACrBc,WAAYd,SACZe,YAAaf,SACbgB,OAAQhB,UAKHiB,EAAU,CAEfC,EAAG,EACHC,EAAG,GAKEC,EAAkB,CAEvBC,OAAQ,IAAIC,EAAAA,QACZC,OAAQ,IAAID,EAAAA,SAUPE,EAAe,CAAEC,KAAM,UAQvBC,EAAc,CAAED,KAAM,SAQtBE,EAAY,CAAEF,KAAM,OAEpBG,EAAa,IAAIC,EAAAA,UACjBC,EAAU,IAAIC,EAAAA,QAEdC,EAAwB,IAAIV,EAAAA,QAC5BW,EAAyB,IAAIX,EAAAA,QAC7BY,EAAkB,IAAIH,EAAAA,QAEtBI,EAAO,KAmBb,MAAMC,UAAwBC,EAAAA,SAS7B,WAAAC,CAAajB,EAAQkB,EAAa,KAAMC,EAAQ,MAE/CC,MAAOpB,EAAQkB,GAQfG,KAAKF,MAAQA,EAObE,KAAKC,OAAS,IAAIZ,EAAAA,QAClBW,KAAKE,eAAiB,IAAIb,EAAAA,QAQ1BW,KAAKG,aAAe,IAQpBH,KAAKI,aAAe,GACpBJ,KAAKK,SAAW,KAIhBL,KAAKM,MAAQ,IAAIC,EAAAA,QACjBP,KAAKQ,MAAQ,IAAInB,EAAAA,QACjBW,KAAKS,MAAQ,IAAIpB,EAAAA,QAEjBW,KAAKU,MAAQ,IAAI9B,EAAAA,QACjBoB,KAAKW,MAAQ,IAAI/B,EAAAA,QAEjBoB,KAAKY,MAAQ,IAAIC,EAAAA,WAGjBb,KAAKc,mBAAqB,IAAIlC,EAAAA,QAC9BoB,KAAKe,gBAAkB,IAAInC,EAAAA,QAC3BoB,KAAKgB,aAAe,IAAIpC,EAAAA,QAExBoB,KAAKiB,cAAgB,IAAI5B,EAAAA,QAIzBW,KAAKkB,mBAAqB,IAAItC,EAAAA,QAC9BoB,KAAKmB,uBAAyB,IAAIvC,EAAAA,QAElCoB,KAAKoB,UAAY,EACjBpB,KAAKqB,SAAW,IAAIhC,EAAAA,QACpBW,KAAKsB,WAAa,EAClBtB,KAAKuB,SAAW,EAChBvB,KAAKwB,QAAU,EAEfxB,KAAKyB,kBAAoB,IAAI7C,EAAAA,QAG7BoB,KAAK0B,KAAO,IAAIrC,EAAAA,QAChBW,KAAK2B,OAAS,EACd3B,KAAK4B,MAAQ,EACb5B,KAAK6B,aAAe,EACpB7B,KAAK8B,UAAY,EACjB9B,KAAK+B,YAAc,EACnB/B,KAAKgC,SAAW,EAChBhC,KAAKiC,oBAAsB,IAAIrD,EAAAA,QAC/BoB,KAAKkC,mBAAqB,IAAItD,EAAAA,QAC9BoB,KAAKmC,SAAW,IAAI9C,EAAAA,QAGpBW,KAAKoC,SAAY,EACjBpC,KAAKqC,YAAc,GACnBrC,KAAKsC,cAAgB,GACrBtC,KAAKuC,OAASvE,EAAMC,KAGpB+B,KAAKwC,mBAAqB,GAC1BxC,KAAKyC,qBAAuB,EAC5BzC,KAAK0C,uBAAyB,EAC9B1C,KAAK2C,qBAAuB,EAC5B3C,KAAK4C,uBAAyB,EAG9B5C,KAAK6C,YAAc,EACnB7C,KAAK8C,YAAa,EAClB9C,KAAK+C,SAAW,EAChB/C,KAAKgD,YAAc,GACnBhD,KAAKiD,WAAa,EAClBjD,KAAKkD,YAAc,EACnBlD,KAAKmD,aAAe,IACpBnD,KAAKoD,aAAe,IACpBpD,KAAKqD,cAAgB,GACrBrD,KAAKsD,mBAAqB,GAG1BtD,KAAKuD,uBAAyB,IAAIlE,EAAAA,QAClCW,KAAKwD,qBAAuB,IAAInE,EAAAA,QAGhCW,KAAKyD,MAAQ,KACbzD,KAAK0D,cAAgB,IAAIrE,EAAAA,QAGzBW,KAAK2D,QAAU,IAAIC,EAAAA,MACnB5D,KAAK6D,UAAY,IAIjB7D,KAAK8D,YAAe,EACpB9D,KAAK+D,cAAiB,EAQtB/D,KAAKgE,mBAAqB,IAG1BhE,KAAKiE,UAAY,EACjBjE,KAAKkE,aAAe,EACpBlE,KAAKmE,WAAa,EAClBnE,KAAKoE,cAAgB,EACrBpE,KAAKqE,eAAiB,IAAIhF,EAAAA,QAC1BW,KAAKsE,eAAiB,IAAIjF,EAAAA,QAC1BW,KAAKuE,OAAS,EACdvE,KAAKwE,OAAS,EAYdxE,KAAKyE,eAAgB,EAQrBzE,KAAK0E,YAAc,IAQnB1E,KAAK2E,cAAgB,GAQrB3E,KAAK4E,KAAO,GAQZ5E,KAAK6E,kBAAmB,EASxB7E,KAAK8E,YAAa,EAQlB9E,KAAK+E,YAAa,EAQlB/E,KAAKgF,OAAS,EAQdhF,KAAKiF,OAAS,GAQdjF,KAAKkF,YAAc,EAQnBlF,KAAKmF,WAAY,EAQjBnF,KAAKoF,cAAe,EAQpBpF,KAAKqF,YAAa,EAQlBrF,KAAKsF,cAAe,EAQpBtF,KAAKuF,aAAc,EAQnBvF,KAAKwF,YAAc,EAQnBxF,KAAKyF,YAAcC,IAQnB1F,KAAK2F,QAAU,EAQf3F,KAAK4F,QAAUF,IAGf1F,KAAK6F,UAAY,EAGjB7F,KAAK8F,OAAS1I,EAAMC,KAEpB2C,KAAK+F,UAAWpH,GAEG,MAAdqB,KAAKF,OAETE,KAAKF,MAAMkG,IAAKhG,KAAK2D,SAItB3D,KAAKiG,yBAILjG,KAAKkG,eAAiBC,EAAcC,KAAMpG,MAC1CA,KAAKqG,SAAWC,EAAQF,KAAMpG,MAC9BA,KAAKuG,aAAeC,EAAYJ,KAAMpG,MACtCA,KAAKyG,eAAiBC,EAAcN,KAAMpG,MAC1CA,KAAK2G,eAAiBC,EAAcR,KAAMpG,MAC1CA,KAAK6G,iBAAmBC,EAAgBV,KAAMpG,MAC9CA,KAAK+G,gBAAkBC,EAAeZ,KAAMpG,MAExB,OAAfH,GAEJG,KAAKiH,QAASpH,EAIf,CAED,OAAAoH,CAASC,GAERnH,MAAMkH,QAASC,GAEflH,KAAKH,WAAWsH,MAAMC,YAAc,OACpCpH,KAAK6C,YAAcwE,OAAOC,iBAE1BtH,KAAKH,WAAW0H,iBAAkB,cAAevH,KAAKkG,gBACtDlG,KAAKH,WAAW0H,iBAAkB,QAASvH,KAAKqG,SAAU,CAAEmB,SAAS,IACrExH,KAAKH,WAAW0H,iBAAkB,cAAevH,KAAK2G,gBACtD3G,KAAKH,WAAW0H,iBAAkB,gBAAiBvH,KAAK6G,kBAExDQ,OAAOE,iBAAkB,SAAUvH,KAAK+G,gBAExC,CAED,UAAAU,GAECzH,KAAKH,WAAW6H,oBAAqB,cAAe1H,KAAK2G,gBACzD3G,KAAKH,WAAW6H,oBAAqB,gBAAiB1H,KAAK6G,kBAC3D7G,KAAKH,WAAW6H,oBAAqB,QAAS1H,KAAKqG,UACnDrG,KAAKH,WAAW6H,oBAAqB,cAAe1H,KAAKkG,gBAEzDmB,OAAOK,oBAAqB,cAAe1H,KAAKyG,gBAChDY,OAAOK,oBAAqB,YAAa1H,KAAKuG,cAE9Cc,OAAOK,oBAAqB,SAAU1H,KAAK+G,gBAE3C,CAED,gBAAAY,CAAkBC,EAAOC,GAExB,GAAK7H,KAAK8H,QAMT,OAJA9H,KAAK+H,cAAe/I,GAEpBgB,KAAKgI,UAAWJ,EAAMK,QAASL,EAAMM,SAE5BL,GAER,IAAK,MAEJ,IAAO7H,KAAKmF,UAEX,QAI2B,GAAvBnF,KAAK+D,eAEToE,qBAAsBnI,KAAK+D,cAC3B/D,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,EAEpB9D,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,IAIrBkB,KAAKqI,cAAejL,EAAMI,KAAK,GAC/BwC,KAAKwD,qBAAqB8E,KAAMtI,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,aAC5FG,KAAK8E,aAET9E,KAAKyI,WACLzI,KAAK+H,cAAejJ,IAIrB,MAED,IAAK,SAEJ,IAAOkB,KAAKoF,aAEX,QAI2B,GAAvBpF,KAAK+D,eAEToE,qBAAsBnI,KAAK+D,cAC3B/D,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,GAIrB9D,KAAKqI,cAAejL,EAAMG,QAAQ,GAClCyC,KAAKwD,qBAAqB8E,KAAMtI,KAAK0I,qBAAsB1I,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,WAAYG,KAAK6F,YACpH7F,KAAKoI,gBAAgB,GAChBpI,KAAK6E,mBAET7E,KAAKiE,UAAYjE,KAAKkE,aAAeyE,YAAYC,MACjD5I,KAAKoE,cAAgBpE,KAAKmE,WAAa,EACvCnE,KAAKqE,eAAeiE,KAAMtI,KAAKwD,sBAC/BxD,KAAKsE,eAAegE,KAAMtI,KAAKqE,gBAC/BrE,KAAKwE,OAAS,EACdxE,KAAKuE,OAASvE,KAAKwE,QAIpBxE,KAAK+H,cAAejJ,GACpB,MAED,IAAK,MAEJ,IAAOkB,KAAKwI,OAAOK,sBAAyB7I,KAAKqF,WAEhD,QAI2B,GAAvBrF,KAAK+D,eAEToE,qBAAsBnI,KAAK+D,cAC3B/D,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,EAEpB9D,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,IAIrBkB,KAAKqI,cAAejL,EAAMM,KAAK,GAC/BsC,KAAKwD,qBAAqBsF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAC3FuB,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,sBACvC,MAED,IAAK,OAEJ,IAAOxD,KAAKqF,WAEX,QAI2B,GAAvBrF,KAAK+D,eAEToE,qBAAsBnI,KAAK+D,cAC3B/D,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,EAEpB9D,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,IAIrBkB,KAAKqI,cAAejL,EAAMK,OAAO,GACjCuC,KAAKwD,qBAAqBsF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAC3FuB,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,sBAO1C,CAED,eAAAwF,CAAiBpB,EAAOqB,GAEvB,GAAKjJ,KAAK8H,QAAU,CAEnB,MAAMoB,EAAUD,GAAWjJ,KAAK8F,OAGhC,OAFA9F,KAAKgI,UAAWJ,EAAMK,QAASL,EAAMM,SAE5Be,GAER,KAAK7L,EAAMI,IAELwC,KAAKmF,YAEJ+D,GAIJlJ,KAAK+H,cAAe9I,GACpBe,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAeY,GAAS,GAC7BjJ,KAAKwD,qBAAqB8E,KAAMtI,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,aAC5FG,KAAK8E,YAET9E,KAAKyI,WAINzI,KAAKoI,gBAAgB,KAKrBpI,KAAKuD,uBAAuB+E,KAAMtI,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,aACnGG,KAAKmJ,qBAAsBnJ,KAAKoJ,IAAKpJ,KAAKwD,qBAAsBxD,KAAKuD,2BAMvE,MAED,KAAKnG,EAAMG,OAEV,GAAKyC,KAAKoF,aAET,GAAK8D,EAIJlJ,KAAK+H,cAAe9I,GACpBe,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAeY,GAAS,GAC7BjJ,KAAKwD,qBAAqB8E,KAAMtI,KAAK0I,qBAAsB1I,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,WAAYG,KAAK6F,YAE/G7F,KAAK8E,YAET9E,KAAKqJ,cAINrJ,KAAKoI,gBAAgB,OAEf,CAGNpI,KAAKuD,uBAAuB+E,KAAMtI,KAAK0I,qBAAsB1I,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,WAAYG,KAAK6F,YAEtH,MAAMyD,EAAWtJ,KAAKwD,qBAAqB+F,WAAYvJ,KAAKuD,wBACtDiG,EAAQxJ,KAAKwD,qBAAqBiG,QAASzJ,KAAKuD,wBAChDmG,EAASC,KAAKC,IAAKN,EAAWtJ,KAAK6F,UAAW2D,GAAUxJ,KAAKkF,YAEnElF,KAAKmJ,qBAAsBnJ,KAAK6J,OAAQ7J,KAAK8J,sBAAuB9J,KAAKwD,qBAAsBxD,KAAKuD,wBAA0BmG,IAEzH1J,KAAK6E,mBAET7E,KAAKiE,UAAYjE,KAAKkE,aACtBlE,KAAKkE,aAAeyE,YAAYC,MAChC5I,KAAKmE,WAAanE,KAAKoE,cACvBpE,KAAKoE,cAAgBsF,EACrB1J,KAAKqE,eAAeiE,KAAMtI,KAAKsE,gBAC/BtE,KAAKsE,eAAegE,KAAMtI,KAAKuD,wBAC/BvD,KAAKuE,OAASvE,KAAKwE,OACnBxE,KAAKwE,OAASxE,KAAK+J,sBAAuB/J,KAAKmE,WAAYnE,KAAKoE,cAAepE,KAAKiE,UAAWjE,KAAKkE,cAIrG,CAIF,MAED,KAAK9G,EAAMK,MAEV,GAAKuC,KAAKqF,WAET,GAAK6D,EAIJlJ,KAAK+H,cAAe9I,GACpBe,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAeY,GAAS,GAC7BjJ,KAAKwD,qBAAqBsF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAC3FuB,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,sBAElCxD,KAAK8E,YAET9E,KAAKqJ,cAINrJ,KAAKoI,gBAAgB,OAEf,CAGN,MAAM4B,EAAgB,EACtBhK,KAAKuD,uBAAuBuF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAE7F,MAAMwL,EAAWjK,KAAKuD,uBAAuB9E,EAAIuB,KAAKwD,qBAAqB/E,EAE3E,IAAIyL,EAAO,EAEND,EAAW,EAEfC,EAAO,EAAMP,KAAKQ,IAAKnK,KAAK0E,aAAeuF,EAAWD,GAE3CC,EAAW,IAEtBC,EAAOP,KAAKQ,IAAKnK,KAAK0E,YAAauF,EAAWD,IAI/ChK,KAAKQ,MAAM4J,sBAAuBpK,KAAKyB,mBAEvCzB,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAKQ,OAElD,CAIF,MAED,KAAKpD,EAAMM,IAEV,GAAKsC,KAAKqF,YAAcrF,KAAKwI,OAAOK,oBAEnC,GAAKK,EAIJlJ,KAAK+H,cAAe9I,GACpBe,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAeY,GAAS,GAC7BjJ,KAAKwD,qBAAqBsF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAC3FuB,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,sBAElCxD,KAAK8E,YAET9E,KAAKqJ,cAINrJ,KAAKoI,gBAAgB,OAEf,CAGN,MAAM4B,EAAgB,EACtBhK,KAAKuD,uBAAuBuF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAE7F,MAAMwL,EAAWjK,KAAKuD,uBAAuB9E,EAAIuB,KAAKwD,qBAAqB/E,EAE3E,IAAIyL,EAAO,EAEND,EAAW,EAEfC,EAAO,EAAMP,KAAKQ,IAAKnK,KAAK0E,aAAeuF,EAAWD,GAE3CC,EAAW,IAEtBC,EAAOP,KAAKQ,IAAKnK,KAAK0E,YAAauF,EAAWD,IAI/ChK,KAAKQ,MAAM4J,sBAAuBpK,KAAKkB,oBACvC,MAAM1C,EAAIwB,KAAKQ,MAAM+I,WAAYvJ,KAAK2D,QAAQ2G,UAC9C,IAAIC,EAAO/L,EAAI0L,EAGfK,EAAOC,EAAAA,UAAUC,MAAOF,EAAMvK,KAAKwF,YAAaxF,KAAKyF,aAErD,MAAMhH,EAAID,EAAImL,KAAKe,IAAKF,YAAUG,QAAU3K,KAAKoB,UAAY,IAG7D,IAAIwJ,EAASJ,YAAUK,SAAoC,EAAxBlB,KAAKmB,KAAMrM,EAAI8L,IAGlDK,EAASJ,EAAAA,UAAUC,MAAOG,EAAQ5K,KAAKgF,OAAQhF,KAAKiF,QAEpD,MAAM8F,EAActM,EAAIkL,KAAKe,IAAKF,EAASA,UAACG,SAAYC,EAAS,IACjEV,EAAO1L,EAAIuM,EACX/K,KAAKS,MAAM2J,sBAAuBpK,KAAKyB,mBAEvCzB,KAAKgL,OAAQJ,GACb5K,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAKS,OAAO,IAGzDrB,EAAQkJ,KAAMtI,KAAK2D,QAAQ2G,UAAWW,IAAKjL,KAAKwI,OAAO8B,UAAWY,YAAYC,eAAgBJ,EAAcvM,GAC5GwB,KAAKU,MAAM0K,gBAAiBhM,EAAQZ,EAAGY,EAAQX,EAAGW,EAAQiM,EAE1D,EAQJrL,KAAK+H,cAAejJ,EAEpB,CAED,CAED,cAAAwM,GAEC,GAAKtL,KAAK8F,QAAU1I,EAAMG,OAAS,CAGlC,IAAOyC,KAAKoF,aAEX,OAID,GAAKpF,KAAK6E,iBAAmB,CAI5B,GADoB8D,YAAYC,MAAQ5I,KAAKkE,aAC5B,IAAM,CAEtB,MAAMqH,EAAI5B,KAAK6B,KAAOxL,KAAKuE,OAASvE,KAAKwE,QAAW,GAE9CiH,EAAOzL,KACbA,KAAK+D,aAAesD,OAAOqE,sBAAuB,SAAWC,GAE5DF,EAAKpD,cAAejL,EAAMW,kBAAkB,GAC5C,MAAM6N,EAAeH,EAAK3B,sBAAuB2B,EAAKpH,eAAgBoH,EAAKnH,gBAE3EmH,EAAKI,eAAgBF,EAAGC,EAAcjC,KAAKmC,IAAKP,EAAGE,EAAK7G,MAE9D,EAEA,MAGK5E,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,EAIzB,MAEIkB,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,EAIxB,MAAckB,KAAK8F,QAAU1I,EAAMI,KAAOwC,KAAK8F,QAAU1I,EAAMC,OAE5D2C,KAAKqI,cAAejL,EAAMC,MAAM,GAE3B2C,KAAK8E,YAET9E,KAAKqJ,cAINrJ,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,IAKrBkB,KAAK+H,cAAe9I,EAEpB,CAED,WAAA8M,CAAanE,GAEZ,GAAK5H,KAAK8H,SAAW9H,KAAKmF,WAAanF,KAAKuF,aAA6B,MAAdvF,KAAKF,MAAgB,CAE/EE,KAAK+H,cAAe/I,GAEpBgB,KAAKgI,UAAWJ,EAAMK,QAASL,EAAMM,SACrC,MAAM8D,EAAOhM,KAAKiM,eAAgBjM,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAcG,KAAKwI,QAEnG,GAAa,MAARwD,GAAgBhM,KAAK6E,iBAAmB,CAE5C,MAAM4G,EAAOzL,MACe,GAAvBA,KAAK+D,cAETsD,OAAOc,qBAAsBnI,KAAK+D,cAInC/D,KAAK8D,YAAe,EACpB9D,KAAK+D,aAAesD,OAAOqE,sBAAuB,SAAWC,GAE5DF,EAAKpD,cAAejL,EAAMU,iBAAiB,GAC3C2N,EAAKS,YAAaP,EAAGK,EAAMP,EAAKvK,mBAAoBuK,EAAKhK,kBAE9D,EAEI,MAAmB,MAARuK,GAAkBhM,KAAK6E,mBAElC7E,KAAKqI,cAAejL,EAAMO,OAAO,GACjCqC,KAAKmM,MAAOH,EAAMhM,KAAK0E,aACvB1E,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAK+H,cAAejJ,GAIrB,CAEDkB,KAAK+H,cAAe9I,EAEpB,CAED,gBAAAmN,GAEMpM,KAAK8H,SAAW9H,KAAKmF,YAEzBnF,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAejL,EAAMI,KAAK,GAE/BwC,KAAKgI,WAAahI,KAAKsC,cAAe,GAAI2F,QAAUjI,KAAKsC,cAAe,GAAI2F,SAAY,GAAKjI,KAAKsC,cAAe,GAAI4F,QAAUlI,KAAKsC,cAAe,GAAI4F,SAAY,GACnKlI,KAAKwD,qBAAqB8E,KAAMtI,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAY,IAC7GG,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,sBAEvCxD,KAAKoI,gBAAgB,GAItB,CAED,eAAAiE,GAEMrM,KAAK8H,SAAW9H,KAAKmF,YAEzBnF,KAAKgI,WAAahI,KAAKsC,cAAe,GAAI2F,QAAUjI,KAAKsC,cAAe,GAAI2F,SAAY,GAAKjI,KAAKsC,cAAe,GAAI4F,QAAUlI,KAAKsC,cAAe,GAAI4F,SAAY,GAE9JlI,KAAK8F,QAAU1I,EAAMI,MAEzBwC,KAAKqI,cAAejL,EAAMI,KAAK,GAC/BwC,KAAKwD,qBAAqB8E,KAAMtI,KAAKuD,yBAItCvD,KAAKuD,uBAAuB+E,KAAMtI,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAY,IAC/GG,KAAKmJ,qBAAsBnJ,KAAKoJ,IAAKpJ,KAAKwD,qBAAsBxD,KAAKuD,wBAAwB,IAC7FvD,KAAK+H,cAAejJ,GAIrB,CAED,cAAAwN,GAECtM,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAK+H,cAAe9I,EAEpB,CAED,aAAAsN,GAEMvM,KAAK8H,SAAW9H,KAAKoF,eAEzBpF,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAejL,EAAMQ,SAAS,GAInCoC,KAAK2C,qBAAuB3C,KAAKwM,SAAUxM,KAAKsC,cAAe,GAAKtC,KAAKsC,cAAe,IAAQtC,KAAKwM,SAAUxM,KAAKqC,YAAa,GAAKrC,KAAKqC,YAAa,IACxJrC,KAAK4C,uBAAyB5C,KAAK2C,qBAEnC3C,KAAKwI,OAAOiE,kBAAmBzM,KAAKiB,eAE7BjB,KAAKmF,WAAenF,KAAKqF,YAE/BrF,KAAKoI,gBAAgB,GAMvB,CAED,YAAAsE,GAEC,GAAK1M,KAAK8H,SAAW9H,KAAKoF,aAAe,CAGxC,IAAIuH,EADJ3M,KAAKgI,WAAahI,KAAKsC,cAAe,GAAI2F,QAAUjI,KAAKsC,cAAe,GAAI2F,SAAY,GAAKjI,KAAKsC,cAAe,GAAI4F,QAAUlI,KAAKsC,cAAe,GAAI4F,SAAY,GAG9JlI,KAAK8F,QAAU1I,EAAMQ,UAEzBoC,KAAKqI,cAAejL,EAAMQ,SAAS,GACnCoC,KAAK2C,qBAAuB3C,KAAK4C,wBAKlC5C,KAAK4C,uBAAyB5C,KAAKwM,SAAUxM,KAAKsC,cAAe,GAAKtC,KAAKsC,cAAe,IAAQtC,KAAKwM,SAAUxM,KAAKqC,YAAa,GAAKrC,KAAKqC,YAAa,IAEnJrC,KAAKmF,WAMXnF,KAAKS,MAAM2J,sBAAuBpK,KAAKyB,mBACvCkL,EAAgB3M,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAa+M,gBAAiB5M,KAAKwI,OAAOqE,YAAa1B,eAAgB,EAAInL,KAAKwI,OAAOsE,MAAO9G,IAAKhG,KAAKS,QALzLkM,GAAgB,IAAItN,EAAAA,SAAU+K,sBAAuBpK,KAAKyB,mBAS3D,MAAMiI,EAASc,EAAAA,UAAUG,SAAY3K,KAAK2C,qBAAuB3C,KAAK4C,wBAEtE5C,KAAKmJ,qBAAsBnJ,KAAK+M,QAASJ,EAAejD,IACxD1J,KAAK+H,cAAejJ,EAEpB,CAED,CAED,WAAAkO,GAEChN,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAe9I,EAEpB,CAED,YAAAgO,GAEMjN,KAAK8H,SAAW9H,KAAKqF,aAEzBrF,KAAK+H,cAAe/I,GACpBgB,KAAKqI,cAAejL,EAAMK,OAAO,GAEjCuC,KAAKyC,qBAAuBzC,KAAKkN,0BAA2BlN,KAAKsC,cAAe,GAAKtC,KAAKsC,cAAe,IACzGtC,KAAK0C,uBAAyB1C,KAAKyC,qBAEnCzC,KAAKoI,gBAAgB,GAItB,CAED,WAAA+E,GAEC,GAAKnN,KAAK8H,SAAW9H,KAAKqF,WAAa,CAEtCrF,KAAKgI,WAAahI,KAAKsC,cAAe,GAAI2F,QAAUjI,KAAKsC,cAAe,GAAI2F,SAAY,GAAKjI,KAAKsC,cAAe,GAAI4F,QAAUlI,KAAKsC,cAAe,GAAI4F,SAAY,GACnK,MAAM1C,EAAc,GAEfxF,KAAK8F,QAAU1I,EAAMK,QAEzBuC,KAAKyC,qBAAuBzC,KAAK0C,uBACjC1C,KAAKqI,cAAejL,EAAMK,OAAO,IAIlCuC,KAAK0C,uBAAyBiH,KAAKC,IAAK5J,KAAKkN,0BAA2BlN,KAAKsC,cAAe,GAAKtC,KAAKsC,cAAe,IAAOkD,EAAcxF,KAAK6C,aAC/I,MAAM6G,EAAS1J,KAAK0C,uBAAyB1C,KAAKyC,qBAElD,IAAI2K,EAEGpN,KAAKmF,UAMNnF,KAAKwI,OAAO6E,qBAEhBD,EAAapN,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAC5E+M,gBAAiB5M,KAAKwI,OAAOqE,YAC7B1B,eAAgB,EAAInL,KAAKwI,OAAOsE,MAChC9G,IAAKhG,KAAK2D,QAAQ2G,UAETtK,KAAKwI,OAAOK,sBAEvBuE,EAAapN,KAAKuI,mBAAoBvI,KAAKwI,OAAQjK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAC5E+M,gBAAiB5M,KAAKwI,OAAOqE,YAC7B7G,IAAKhG,KAAK2D,QAAQ2G,WAfrB8C,EAAapN,KAAK2D,QAAQ2G,SAqB3BtK,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOX,EAAQ0D,IAC/CpN,KAAK+H,cAAejJ,EAEpB,CAED,CAED,UAAAwO,GAECtN,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAK+H,cAAe9I,EAEpB,CAED,gBAAAsO,GAEC,GAAKvN,KAAK8H,SAAW9H,KAAKqF,WAAa,CAEtCrF,KAAK+H,cAAe/I,GAEpBgB,KAAKqI,cAAejL,EAAMK,OAAO,GAGjC,IAAIwK,EAAU,EACVC,EAAU,EACd,MAAMsF,EAAWxN,KAAKsC,cAAcmL,OAEpC,IAAM,IAAIC,EAAI,EAAGA,EAAIF,EAAUE,IAE9BzF,GAAWjI,KAAKsC,cAAeoL,GAAIzF,QACnCC,GAAWlI,KAAKsC,cAAeoL,GAAIxF,QAIpClI,KAAKgI,UAAWC,EAAUuF,EAAUtF,EAAUsF,GAE9CxN,KAAKwD,qBAAqBsF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAC3FuB,KAAKuD,uBAAuB+E,KAAMtI,KAAKwD,qBAEvC,CAED,CAED,eAAAmK,GAEC,GAAK3N,KAAK8H,SAAW9H,KAAKqF,WAAa,CAatC,IAAI4C,EAAU,EACVC,EAAU,EACd,MAAMsF,EAAWxN,KAAKsC,cAAcmL,OAEpC,IAAM,IAAIC,EAAI,EAAGA,EAAIF,EAAUE,IAE9BzF,GAAWjI,KAAKsC,cAAeoL,GAAIzF,QACnCC,GAAWlI,KAAKsC,cAAeoL,GAAIxF,QAIpClI,KAAKgI,UAAWC,EAAUuF,EAAUtF,EAAUsF,GAE9C,MAAMxD,EAAgB,EACtBhK,KAAKuD,uBAAuBuF,KAAqE,GAA/D9I,KAAK+I,aAAcxK,EAAQC,EAAGD,EAAQE,EAAGuB,KAAKH,YAAapB,GAE7F,MAAMwL,EAAWjK,KAAKuD,uBAAuB9E,EAAIuB,KAAKwD,qBAAqB/E,EAE3E,IAAIyL,EAAO,EAEND,EAAW,EAEfC,EAAO,EAAMP,KAAKQ,IAAKnK,KAAK0E,aAAeuF,EAAWD,GAE3CC,EAAW,IAEtBC,EAAOP,KAAKQ,IAAKnK,KAAK0E,YAAauF,EAAWD,IAI/ChK,KAAKQ,MAAM4J,sBAAuBpK,KAAKkB,oBACvC,MAAM1C,EAAIwB,KAAKQ,MAAM+I,WAAYvJ,KAAK2D,QAAQ2G,UAC9C,IAAIC,EAAO/L,EAAI0L,EAGfK,EAAOC,EAAAA,UAAUC,MAAOF,EAAMvK,KAAKwF,YAAaxF,KAAKyF,aAErD,MAAMhH,EAAID,EAAImL,KAAKe,IAAKF,YAAUG,QAAU3K,KAAKoB,UAAY,IAG7D,IAAIwJ,EAASJ,YAAUK,SAAoC,EAAxBlB,KAAKmB,KAAMrM,EAAI8L,IAGlDK,EAASJ,EAAAA,UAAUC,MAAOG,EAAQ5K,KAAKgF,OAAQhF,KAAKiF,QAEpD,MAAM8F,EAActM,EAAIkL,KAAKe,IAAKF,EAASA,UAACG,SAAYC,EAAS,IACjEV,EAAO1L,EAAIuM,EACX/K,KAAKS,MAAM2J,sBAAuBpK,KAAKyB,mBAEvCzB,KAAKgL,OAAQJ,GACb5K,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAKS,OAAO,IAGzDrB,EAAQkJ,KAAMtI,KAAK2D,QAAQ2G,UAAWW,IAAKjL,KAAKwI,OAAO8B,UAAWY,YAAYC,eAAgBJ,EAAcvM,GAC5GwB,KAAKU,MAAM0K,gBAAiBhM,EAAQZ,EAAGY,EAAQX,EAAGW,EAAQiM,GAE1DrL,KAAK+H,cAAejJ,EAEpB,CAED,CAED,cAAA8O,GAEC5N,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAK+H,cAAe9I,EAGpB,CASD,SAAA+I,CAAWC,EAASC,GAEnB3J,EAAQC,EAAIyJ,EACZ1J,EAAQE,EAAIyJ,CAEZ,CAOD,sBAAAjC,GAECjG,KAAK6N,eAAgB,MAAO,EAAG,QAC/B7N,KAAK6N,eAAgB,MAAO,GAE5B7N,KAAK6N,eAAgB,SAAU,GAE/B7N,KAAK6N,eAAgB,OAAQ,SAC7B7N,KAAK6N,eAAgB,OAAQ,GAE7B7N,KAAK6N,eAAgB,MAAO,QAAS,SACrC7N,KAAK6N,eAAgB,MAAO,EAAG,QAG/B,CAUD,kBAAAC,CAAoBC,EAASC,GAE5B,OAAKD,EAAQlG,WAAamG,EAAQnG,YAE5BkG,EAAQE,OAASD,EAAQC,OAASF,EAAQG,KAAOF,EAAQE,IAgB/D,CAUD,cAAAL,CAAgBhG,EAAWoG,EAAOC,EAAM,MAKvC,IAAIC,EAEJ,IALuB,CAAE,MAAO,SAAU,OAAQ,OAK5BC,SAAUvG,KAJb,CAAE,EAAG,EAAG,EAAG,SAI8BuG,SAAUH,KAHrD,CAAE,OAAQ,QAAS,MAGwDG,SAAUF,GAGrG,OAAO,EAIR,GAAc,SAATD,GAEc,QAAbpG,GAAoC,OAAbA,EAG3B,OAAO,EAMT,OAASA,GAER,IAAK,MAEJsG,EAAQ/Q,EAAMI,IACd,MAED,IAAK,SAEJ2Q,EAAQ/Q,EAAMG,OACd,MAED,IAAK,OAEJ4Q,EAAQ/Q,EAAMK,MACd,MAED,IAAK,MAEJ0Q,EAAQ/Q,EAAMM,IAKhB,MAAM2Q,EAAS,CAEdxG,UAAWA,EACXoG,MAAOA,EACPC,IAAKA,EACLC,MAAOA,GAIR,IAAM,IAAIT,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAE9C,GAAK1N,KAAKI,aAAcsN,GAAIO,OAASI,EAAOJ,OAASjO,KAAKI,aAAcsN,GAAIQ,KAAOG,EAAOH,IAGzF,OADAlO,KAAKI,aAAakO,OAAQZ,EAAG,EAAGW,IACzB,EAOT,OADArO,KAAKI,aAAamO,KAAMF,IACjB,CAEP,CASD,gBAAAG,CAAkBP,EAAOC,EAAM,MAE9B,IAAM,IAAIR,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAE9C,GAAK1N,KAAKI,aAAcsN,GAAIO,OAASA,GAASjO,KAAKI,aAAcsN,GAAIQ,KAAOA,EAG3E,OADAlO,KAAKI,aAAakO,OAAQZ,EAAG,IACtB,EAMT,OAAO,CAEP,CAUD,eAAAe,CAAiBR,EAAOC,GAEvB,IAAIG,EAEJ,IAAM,IAAIX,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAG9C,GADAW,EAASrO,KAAKI,aAAcsN,GACvBW,EAAOJ,OAASA,GAASI,EAAOH,KAAOA,EAE3C,OAAOG,EAAOxG,UAMhB,GAAY,MAAPqG,EAEJ,IAAM,IAAIR,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAG9C,GADAW,EAASrO,KAAKI,aAAcsN,GACvBW,EAAOJ,OAASA,GAAuB,MAAdI,EAAOH,IAEpC,OAAOG,EAAOxG,UAQjB,OAAO,IAEP,CAUD,oBAAA6G,CAAsBT,EAAOC,GAE5B,IAAIG,EAEJ,IAAM,IAAIX,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAG9C,GADAW,EAASrO,KAAKI,aAAcsN,GACvBW,EAAOJ,OAASA,GAASI,EAAOH,KAAOA,EAE3C,OAAOG,EAAOF,MAMhB,GAAY,MAAPD,EAEJ,IAAM,IAAIR,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAG9C,GADAW,EAASrO,KAAKI,aAAcsN,GACvBW,EAAOJ,OAASA,GAAuB,MAAdI,EAAOH,IAEpC,OAAOG,EAAOF,MAQjB,OAAO,IAEP,CAUD,QAAA3B,CAAUmC,EAAIC,GAEb,OAAwE,IAAjEjF,KAAKkF,MAAOD,EAAG1G,QAAUyG,EAAGzG,QAAS0G,EAAG3G,QAAU0G,EAAG1G,SAAkB0B,KAAKmF,EAEnF,CAQD,gBAAAC,CAAkBnH,GAEjB,IAAM,IAAI8F,EAAI,EAAGA,EAAI1N,KAAKsC,cAAcmL,OAAQC,IAE/C,GAAK1N,KAAKsC,cAAeoL,GAAIsB,WAAapH,EAAMoH,UAAY,CAE3DhP,KAAKsC,cAAcgM,OAAQZ,EAAG,EAAG9F,GACjC,KAEA,CAIF,CAQD,oBAAAuB,CAAsB8F,GAyBrB,GAvB8B,MAAzBA,EAAetQ,SAEnBqB,KAAKU,MAAM4H,KAAMtI,KAAKkB,oBAAqBgO,YAAaD,EAAetQ,QACvEqB,KAAKU,MAAMyO,UAAWnP,KAAKwI,OAAO8B,SAAUtK,KAAKwI,OAAOqE,WAAY7M,KAAKwI,OAAO6B,OAChFrK,KAAKwI,OAAO4G,eAGPpP,KAAK8F,QAAU1I,EAAMG,QAAUyC,KAAK8F,QAAU1I,EAAMQ,SAAWoC,KAAK8F,QAAU1I,EAAMW,kBAExFiC,KAAKwI,OAAO6G,GAAG/G,KAAMtI,KAAKqB,UAAWuL,gBAAiB5M,KAAKwI,OAAOqE,aAMtC,MAAzBoC,EAAepQ,SAEnBmB,KAAKU,MAAM4H,KAAMtI,KAAKyB,mBAAoByN,YAAaD,EAAepQ,QACtEmB,KAAKU,MAAMyO,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OACnFrK,KAAK2D,QAAQyL,gBAITpP,KAAK8F,QAAU1I,EAAMK,OAASuC,KAAK8F,QAAU1I,EAAMO,OAASqC,KAAK8F,QAAU1I,EAAMU,gBAIrF,GAFAkC,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAEzCxI,KAAKyE,cAAgB,CAEzB,MAAM8K,EAAiBvP,KAAKwI,OAAO8B,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAE/DkF,EAAK,IAAIC,EAAAA,KACfD,EAAGE,cAAe1P,KAAK2D,SACvB,MAAMgM,EAAS,IAAIC,EAAAA,OACnBJ,EAAGK,kBAAmBF,GAEtB,MAAMG,EAAuBnG,KAAKC,IAAK5J,KAAK8B,UAAW6N,EAAOI,OAASJ,EAAOK,OAAOvC,UAC/EwC,EAAsBV,EAAiBvP,KAAK6B,aAE5CqO,EAAavG,KAAKmC,IAAKgE,EAAsBG,GACnDjQ,KAAKwI,OAAO2H,KAAOZ,EAAiBW,EAGpC,MAAME,EAAsBzG,KAAKmC,IAAK9L,KAAKgC,UAAY2N,EAAOI,OAASJ,EAAOK,OAAOvC,UAC/E4C,EAAqBd,EAAiBvP,KAAK+B,YAE3CuO,EAAY3G,KAAKmC,IAAKsE,EAAqBC,GACjDrQ,KAAKwI,OAAO+H,IAAMhB,EAAiBe,EAEnCtQ,KAAKwI,OAAOgI,wBAEhB,KAAU,CAEN,IAAIC,GAAS,EAERzQ,KAAKwI,OAAO2H,MAAQnQ,KAAK6B,eAE7B7B,KAAKwI,OAAO2H,KAAOnQ,KAAK6B,aACxB4O,GAAS,GAILzQ,KAAKwI,OAAO+H,KAAOvQ,KAAK+B,cAE5B/B,KAAKwI,OAAO+H,IAAMvQ,KAAK+B,YACvB0O,GAAS,GAILA,GAEJzQ,KAAKwI,OAAOgI,wBAIb,CAIF,CAYD,qBAAAzG,CAAuB2G,EAAI/B,EAAIgC,EAAIC,GAElC,MACMjF,GAAMiF,EAAKD,GAAO,IACxB,OAAU,GAALhF,EAEG,GAJEgD,EAAK+B,GAQJ/E,CAEX,CAUD,yBAAAuB,CAA2BwD,EAAI/B,GAE9B,OAAOhF,KAAKkH,KAAMlH,KAAKQ,IAAKwE,EAAG1G,QAAUyI,EAAGzI,QAAS,GAAM0B,KAAKQ,IAAKwE,EAAGzG,QAAUwI,EAAGxI,QAAS,GAE9F,CAUD,qBAAA4B,CAAuBgH,EAAMC,GAM5B,OAJA/Q,KAAKe,gBAAgBiQ,gBAAiBhR,KAAKkB,oBAC3ClB,KAAKY,MAAMqQ,sBAAuBjR,KAAKe,iBAEvCf,KAAKiB,cAAciQ,aAAcJ,EAAMC,GAAOnE,gBAAiB5M,KAAKY,OAC7DZ,KAAKiB,cAAciK,YAAYiG,OAEtC,CASD,iBAAA7B,CAAmB3Q,GAElB,MAAM2K,EAAW3K,EAAO2L,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAE1D,GAAoB,qBAAf3L,EAAOI,KAA8B,CAEzC,MAAMqS,EAAW5G,EAAAA,UAAUG,QAAUhM,EAAO0S,IAAM,GAC5CC,EAAW3H,KAAKmB,KAAQnM,EAAa,OAAKgL,KAAKe,IAAK0G,IAC1D,OAAOzH,KAAKe,IAAKf,KAAKmC,IAAKsF,EAAUE,IAAehI,EAAWtJ,KAAKG,YAEvE,CAAS,GAAoB,sBAAfxB,EAAOI,KAElB,OAAO4K,KAAKmC,IAAKnN,EAAO4S,IAAK5S,EAAO6S,OAAUxR,KAAKG,YAIpD,CAUD,KAAAgM,CAAOsF,EAAOvH,EAAMR,EAAS,GAG5BtK,EAAQkJ,KAAMmJ,GAAQxG,IAAKjL,KAAK2D,QAAQ2G,UAAWa,eAAgBzB,GACnE1J,KAAKc,mBAAmBsK,gBAAiBhM,EAAQZ,EAAGY,EAAQX,EAAGW,EAAQiM,GAEvE/L,EAAsBgJ,KAAMtI,KAAKyB,mBACjCzB,KAAKyB,kBAAkByN,YAAalP,KAAKc,oBACzCd,KAAKyB,kBAAkB0N,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAE/F9K,EAAuB+I,KAAMtI,KAAKkB,oBAClClB,KAAKkB,mBAAmBgO,YAAalP,KAAKc,oBAC1Cd,KAAKkB,mBAAmBiO,UAAWnP,KAAKwI,OAAO8B,SAAUtK,KAAKwI,OAAOqE,WAAY7M,KAAKwI,OAAO6B,OAGxFrK,KAAKqF,YAETrF,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAK2D,QAAQ2G,WAI3DtK,KAAKyB,kBAAkB6G,KAAMhJ,GAC7BU,KAAKkB,mBAAmBoH,KAAM/I,EAE9B,CAOD,QAAAkJ,GAEC,GAAmB,MAAdzI,KAAKF,MAAgB,CAEzB,MAAM4R,EAAQ,QACRC,EAAa,EACnB,IAAIzH,EAAM0H,EAAWC,EAAWC,EAEhC,GAAK9R,KAAKwI,OAAO6E,qBAAuB,CAEvC,MAAM0E,EAAQ/R,KAAKwI,OAAOgJ,MAAQxR,KAAKwI,OAAOwJ,KACxCC,EAASjS,KAAKwI,OAAO0J,OAASlS,KAAKwI,OAAO+I,IAEhDM,EAAYlI,KAAKC,IAAKmI,EAAOE,GAC7BH,EAAOD,EAAY,GAEnB3H,EAAO2H,EAAY7R,KAAKwI,OAAOsE,KAAO6E,EACtCC,EAAY1H,EAAO4H,EAAO9R,KAAKwI,OAAOsE,IAE1C,MAAU,GAAK9M,KAAKwI,OAAOK,oBAAsB,CAE7C,MAAMS,EAAWtJ,KAAKwI,OAAO8B,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UACzD8G,EAAW5G,EAAAA,UAAUG,QAAU3K,KAAKwI,OAAO6I,IAAM,GACjDC,EAAW3H,KAAKmB,KAAQ9K,KAAKwI,cAAkBmB,KAAKe,IAAK0G,IAE/DS,EAAYlI,KAAKe,IAAKf,KAAKC,IAAKwH,EAAUE,IAAehI,EAAW,EACpEwI,EAAOD,EAAY,GAEnB3H,EAAO2H,EAAYF,EACnBC,EAAY1H,EAAO4H,CAEnB,CAEkB,MAAd9R,KAAKyD,QAETzD,KAAKyD,MAAQ,IAAI0O,EAAUA,WAAEjI,EAAM0H,EAAWF,EAAOA,GACrD1R,KAAKyD,MAAM6G,SAAShC,KAAMtI,KAAK2D,QAAQ2G,UACvCtK,KAAK0D,cAAc4E,KAAMtI,KAAKyD,MAAM6G,UACpCtK,KAAKyD,MAAMoJ,WAAWvE,KAAMtI,KAAKwI,OAAOqE,YACxC7M,KAAKyD,MAAM2O,QAAmB,GAAVzI,KAAKmF,IAEzB9O,KAAKF,MAAMkG,IAAKhG,KAAKyD,OAItB,CAED,CAED,OAAA4O,IAE6B,GAAvBrS,KAAK+D,cAETsD,OAAOc,qBAAsBnI,KAAK+D,cAInC/D,KAAKyH,aAEe,OAAfzH,KAAKF,OAAiBE,KAAKF,MAAMwS,OAAQtS,KAAK2D,SACnD3D,KAAKqJ,aAEL,CAKD,WAAAA,GAEoB,MAAdrJ,KAAKyD,OAA+B,MAAdzD,KAAKF,QAE/BE,KAAKF,MAAMwS,OAAQtS,KAAKyD,OACxBzD,KAAKyD,MAAQ,KAId,CASD,YAAA8O,CAAc5G,GAEb,OAAO,EAAIhC,KAAKQ,IAAK,EAAIwB,EAAG,EAE5B,CAOD,cAAAvD,CAAgBoK,GAEf,MAAMC,EAASzS,KAAK2D,QAAQ+O,SAAU,GAChCC,EAAS3S,KAAK2D,QAAQ+O,SAAU,GAChCE,EAAS5S,KAAK2D,QAAQ+O,SAAU,GAEjCF,GAEJC,EAAOI,SAASC,UAAW,CAAEC,QAAS,IACtCJ,EAAOE,SAASC,UAAW,CAAEC,QAAS,IACtCH,EAAOC,SAASC,UAAW,CAAEC,QAAS,MAItCN,EAAOI,SAASC,UAAW,CAAEC,QAAS,KACtCJ,EAAOE,SAASC,UAAW,CAAEC,QAAS,KACtCH,EAAOC,SAASC,UAAW,CAAEC,QAAS,KAIvC,CAWD,YAAAhK,CAAciK,EAASC,EAASC,GAE/B,MAAMC,EAAaD,EAAOE,wBAG1B,OAFApT,KAAKM,MAAM+S,MAAUL,EAAUG,EAAWnB,MAASmB,EAAWpB,MAAU,EAAI,GAC5E/R,KAAKM,MAAMwI,MAAUqK,EAAWjB,OAASe,GAAYE,EAAWlB,OAAW,EAAI,GACxEjS,KAAKM,MAAM6Q,OAElB,CAWD,iBAAAmC,CAAmBN,EAASC,EAASC,GAKpC,OAHAlT,KAAKM,MAAMgI,KAAMtI,KAAK+I,aAAciK,EAASC,EAASC,IACtDlT,KAAKM,MAAM9B,GAAgD,IAAzCwB,KAAKwI,OAAOgJ,MAAQxR,KAAKwI,OAAOwJ,MAClDhS,KAAKM,MAAM7B,GAAgD,IAAzCuB,KAAKwI,OAAO+I,IAAMvR,KAAKwI,OAAO0J,QACzClS,KAAKM,MAAM6Q,OAElB,CAOD,SAAApL,CAAWpH,GAEVA,EAAO4U,OAAQvT,KAAKC,QACpBtB,EAAOyQ,eAGa,qBAAfzQ,EAAOI,OAEXiB,KAAK4B,MAAQjD,EAAO0S,IACpBrR,KAAKoB,UAAYzC,EAAO0S,KAIzBrR,KAAKiC,oBAAoBqG,KAAM3J,EAAO6U,QACtCxT,KAAKkB,mBAAmBoH,KAAMtI,KAAKiC,qBACnCjC,KAAKmB,uBAAuBmH,KAAM3J,EAAO8U,kBACzCzT,KAAK2B,OAAShD,EAAOmO,KACrB9M,KAAKsB,WAAatB,KAAK2B,OAEvB3B,KAAK6B,aAAelD,EAAOwR,KAC3BnQ,KAAK8B,UAAYnD,EAAO2L,SAASf,WAAYvJ,KAAKC,QAAWtB,EAAOwR,KACpEnQ,KAAKuB,SAAWvB,KAAK6B,aAErB7B,KAAK+B,YAAcpD,EAAO4R,IAC1BvQ,KAAKgC,SAAWrD,EAAO2L,SAASf,WAAYvJ,KAAKC,QAAWtB,EAAO4R,IACnEvQ,KAAKwB,QAAUxB,KAAK+B,YAEpB/B,KAAK0B,KAAK4G,KAAM3J,EAAO0Q,IACvBrP,KAAKqB,SAASiH,KAAM3J,EAAO0Q,IAE3BrP,KAAKwI,OAAS7J,EACdqB,KAAKwI,OAAOgI,yBAGZxQ,KAAK6F,UAAY7F,KAAKsP,kBAAmB3Q,GACzCqB,KAAK0T,WAAY1T,KAAKC,OAAQD,KAAK6F,UAEnC,CAOD,gBAAA8N,CAAkBC,GAEjB5T,KAAK2D,QAAQkQ,QAAUD,EACvB5T,KAAK+H,cAAejJ,EAEpB,CAOD,WAAAgV,CAAaF,GAEZ5T,KAAKG,aAAeyT,EACpB5T,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAE9C,MACMuL,EADQ,IAAIC,EAAYA,aAAE,EAAG,EAAGhU,KAAK6F,UAAW7F,KAAK6F,WACtCoO,UAAWjU,KAAK6D,WAC/BqQ,GAAgB,IAAIC,EAAAA,gBAAiBC,cAAeL,GAG1D,IAAM,MAAMM,KAASrU,KAAK2D,QAAQ+O,SAEjC1S,KAAK2D,QAAQ+O,SAAU2B,GAAQC,SAAWJ,EAI3ClU,KAAK+H,cAAejJ,EAEpB,CASD,UAAA4U,CAAYa,EAAUC,GAErB,MACMT,EADQ,IAAIC,eAAc,EAAG,EAAGQ,EAAUA,GAC3BP,UAAWjU,KAAK6D,WAG/BqQ,GAAgB,IAAIC,EAAAA,gBAAiBC,cAAeL,GAGpDU,EAAiB,IAAIC,EAAAA,kBAAmB,CAAEhD,MAAO,SAAUiD,KAAK,EAAOC,aAAa,EAAM7B,QAAS,KACnG8B,EAAiB,IAAIH,EAAAA,kBAAmB,CAAEhD,MAAO,QAAUiD,KAAK,EAAOC,aAAa,EAAM7B,QAAS,KACnG+B,EAAiB,IAAIJ,EAAAA,kBAAmB,CAAEhD,MAAO,QAAUiD,KAAK,EAAOC,aAAa,EAAM7B,QAAS,KAGnGN,EAAS,IAAIsC,EAAAA,KAAMb,EAAeO,GAClC9B,EAAS,IAAIoC,EAAAA,KAAMb,EAAeW,GAClCjC,EAAS,IAAImC,EAAAA,KAAMb,EAAeY,GAElCE,EAAqB,GAAVrL,KAAKmF,GAStB,GARA2D,EAAOuC,SAASxW,EAAIwW,EACpBrC,EAAOqC,SAASvW,EAAIuW,EAIpBhV,KAAKkC,mBAAmB+S,WAAWC,YAAaX,GAChDvU,KAAKyB,kBAAkB6G,KAAMtI,KAAKkC,oBAER,IAArBlC,KAAKwI,OAAOsE,KAAa,CAG7B,MAAM5C,EAAO,EAAIlK,KAAKwI,OAAOsE,KAC7B9M,KAAKgB,aAAamU,UAAWjL,EAAMA,EAAMA,GACzClK,KAAKc,mBAAmBsK,iBAAmBmJ,EAAS/V,GAAK+V,EAAS9V,GAAK8V,EAASlJ,GAEhFrL,KAAKyB,kBAAkByN,YAAalP,KAAKc,oBAAqBoO,YAAalP,KAAKgB,cAChFhB,KAAKc,mBAAmBsK,gBAAiBmJ,EAAS/V,EAAG+V,EAAS9V,EAAG8V,EAASlJ,GAC1ErL,KAAKyB,kBAAkByN,YAAalP,KAAKc,mBAEzC,CAEDd,KAAKyB,kBAAkB0N,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAI/FrK,KAAK2D,QAAQyR,SAAU,SAAW5M,GAE5BA,EAAO6M,SAEX7M,EAAO8L,SAASjC,UAChB7J,EAAOqK,SAASR,UAIpB,GAEErS,KAAK2D,QAAQ2R,QAIbtV,KAAK2D,QAAQqC,IAAKyM,GAClBzS,KAAK2D,QAAQqC,IAAK2M,GAClB3S,KAAK2D,QAAQqC,IAAK4M,EAElB,CAWD,WAAA1G,CAAaqJ,EAAM9D,EAAO+D,EAAcC,GASvC,IAP0B,GAArBzV,KAAK8D,aAGT9D,KAAK8D,WAAayR,GAIdvV,KAAK8F,QAAU1I,EAAMU,gBAAkB,CAE3C,MACM4X,GADYH,EAAOvV,KAAK8D,YACD9D,KAAKgE,mBAIlC,GAFAhE,KAAKyB,kBAAkB6G,KAAMmN,GAExBC,GAAY,EAIhB1V,KAAKyB,kBAAkB0N,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAE/FrK,KAAKmM,MAAOsF,EAAOzR,KAAK0E,aAExB1E,KAAK8D,YAAe,EACpB9D,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAKoI,gBAAgB,GAErBpI,KAAK+H,cAAejJ,OAEd,CAEN,MAAM4K,EAAS1J,KAAKuS,aAAcmD,GAC5BxL,EAAW,EAAIR,EAAa1J,KAAK0E,YAAcgF,EAErD1J,KAAKyB,kBAAkB0N,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAC/FrK,KAAKmM,MAAOsF,EAAOvH,EAAMR,GAEzB1J,KAAK+H,cAAejJ,GACpB,MAAM2M,EAAOzL,KACbA,KAAK+D,aAAesD,OAAOqE,sBAAuB,SAAWC,GAE5DF,EAAKS,YAAaP,EAAG8F,EAAO+D,EAAcC,EAAYtE,QAE3D,EAEI,CAEJ,MAIGnR,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,CAIrB,CAUD,cAAA+H,CAAgB0J,EAAM3J,EAAc+J,GAWnC,IAT0B,GAArB3V,KAAK8D,aAGT9D,KAAKmE,WAAa,EAClBnE,KAAKoE,cAAgB,EACrBpE,KAAK8D,WAAayR,GAIdvV,KAAK8F,QAAU1I,EAAMW,iBAAmB,CAG5C,MAAM6X,GAAcL,EAAOvV,KAAK8D,YAAe,IAG/C,GAFU6R,GAAW3V,KAAK2E,cAAkBiR,EAEnC,EAAI,CAGZ5V,KAAKoE,cAAgB,IAAUpE,KAAK2E,cAAkBgF,KAAKQ,IAAKyL,EAAW,GAAMD,EAAKC,EAAY,EAClG5V,KAAKmJ,qBAAsBnJ,KAAK6J,OAAQ+B,EAAc5L,KAAKoE,gBAC3DpE,KAAK+H,cAAejJ,GACpB,MAAM2M,EAAOzL,KACbA,KAAK+D,aAAesD,OAAOqE,sBAAuB,SAAWC,GAE5DF,EAAKI,eAAgBF,EAAGC,EAAc+J,EAE3C,EAEA,MAEI3V,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,EAEpB9D,KAAKqI,cAAejL,EAAMC,MAAM,GAChC2C,KAAKoI,gBAAgB,GAErBpI,KAAK+H,cAAejJ,EAIxB,MAIGkB,KAAK+D,cAAiB,EACtB/D,KAAK8D,YAAe,EAEf9D,KAAK8F,QAAU1I,EAAMG,SAEzByC,KAAKoI,gBAAgB,GACrBpI,KAAK+H,cAAejJ,GAMtB,CAYD,GAAAsK,CAAKsH,EAAI/B,EAAIkH,GAAS,GAErB,MAAM5L,EAAWyG,EAAGS,QAAQlG,IAAK0D,GAEjC,GAAK3O,KAAKwI,OAAO6E,qBAGhBpD,EAASkB,eAAgB,EAAInL,KAAKwI,OAAOsE,WAEnC,GAAK9M,KAAKwI,OAAOK,qBAAuBgN,EAAS,CAGvD7V,KAAKQ,MAAM4J,sBAAuBpK,KAAKiC,qBACvCjC,KAAKS,MAAM2J,sBAAuBpK,KAAKkC,oBACvC,MAAM4T,EAAiB9V,KAAKQ,MAAM+I,WAAYvJ,KAAKS,OAAUT,KAAKwI,OAAO8B,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAC3GL,EAASkB,eAAgB,EAAI2K,EAE7B,CAOD,OALA9V,KAAKQ,MAAMuV,IAAK9L,EAASzL,EAAGyL,EAASxL,EAAG,GAAImO,gBAAiB5M,KAAKwI,OAAOqE,YAEzE7M,KAAKU,MAAM0K,gBAAiBpL,KAAKQ,MAAMhC,EAAGwB,KAAKQ,MAAM/B,EAAGuB,KAAKQ,MAAM6K,GAEnErL,KAAKgW,0BAA2BhW,KAAKU,MAAOV,KAAKU,OAC1ChC,CAEP,CAKD,KAAAuX,GAECjW,KAAKC,OAAOqI,KAAMtI,KAAKmC,UACvBnC,KAAKwI,OAAOsE,KAAO9M,KAAK2B,OAEnB3B,KAAKwI,OAAOK,sBAEhB7I,KAAKwI,OAAO6I,IAAMrR,KAAK4B,OAIxB5B,KAAKwI,OAAO2H,KAAOnQ,KAAKuB,SACxBvB,KAAKwI,OAAO+H,IAAMvQ,KAAKwB,QACvBxB,KAAKkB,mBAAmBoH,KAAMtI,KAAKiC,qBACnCjC,KAAKkB,mBAAmBiO,UAAWnP,KAAKwI,OAAO8B,SAAUtK,KAAKwI,OAAOqE,WAAY7M,KAAKwI,OAAO6B,OAC7FrK,KAAKwI,OAAO6G,GAAG/G,KAAMtI,KAAK0B,MAE1B1B,KAAKwI,OAAO4G,eACZpP,KAAKwI,OAAOgI,yBAEZxQ,KAAKyB,kBAAkB6G,KAAMtI,KAAKkC,oBAClClC,KAAKkC,mBAAmBiN,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAChGrK,KAAK2D,QAAQyL,eAEbpP,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAC9CxI,KAAK0T,WAAY1T,KAAK2D,QAAQ2G,SAAUtK,KAAK6F,WAE7C7F,KAAKwI,OAAO+K,OAAQvT,KAAK2D,QAAQ2G,UAEjCtK,KAAKqI,cAAejL,EAAMC,MAAM,GAEhC2C,KAAK+H,cAAejJ,EAEpB,CAUD,MAAA+K,CAAQqM,EAAM1M,GAEb,MAAMiI,EAAQzR,KAAK2D,QAAQ2G,SAW3B,OAVAtK,KAAKc,mBAAmBsK,iBAAmBqG,EAAMjT,GAAKiT,EAAMhT,GAAKgT,EAAMpG,GACvErL,KAAKe,gBAAgBoV,iBAAkBD,GAAQ1M,GAG/CxJ,KAAKU,MAAM0K,gBAAiBqG,EAAMjT,EAAGiT,EAAMhT,EAAGgT,EAAMpG,GACpDrL,KAAKU,MAAM0V,SAAUpW,KAAKe,iBAC1Bf,KAAKU,MAAM0V,SAAUpW,KAAKc,oBAE1Bd,KAAKgW,0BAA2BhW,KAAKU,OAE9BhC,CAEP,CAKD,SAAA2X,GAEC,IAAIlI,EACCnO,KAAKwI,OAAO6E,qBAEhBc,EAAQmI,KAAKC,UAAW,CACvBC,aAAc,CACbC,UAAWzW,KAAKwI,OAAO+H,IACvBiF,aAAcxV,KAAKwI,OAAOgL,OAC1BkD,WAAY1W,KAAKwI,OAAO2H,KACxBwG,SAAU3W,KAAKwI,OAAO6G,GACtBuH,WAAY5W,KAAKwI,OAAOsE,KACxB2I,YAAazV,KAAK2D,QAAQ6P,OAC1BvT,OAAQD,KAAKC,UAKJD,KAAKwI,OAAOK,sBAEvBsF,EAAQmI,KAAKC,UAAW,CACvBC,aAAc,CACbC,UAAWzW,KAAKwI,OAAO+H,IACvBsG,UAAW7W,KAAKwI,OAAO6I,IACvBmE,aAAcxV,KAAKwI,OAAOgL,OAC1BkD,WAAY1W,KAAKwI,OAAO2H,KACxBwG,SAAU3W,KAAKwI,OAAO6G,GACtBuH,WAAY5W,KAAKwI,OAAOsE,KACxB2I,YAAazV,KAAK2D,QAAQ6P,OAC1BvT,OAAQD,KAAKC,WAOhB6W,UAAUC,UAAUC,UAAW7I,EAE/B,CAMD,UAAA8I,GAEC,MAAMxL,EAAOzL,KACb8W,UAAUC,UAAUG,WAAWC,KAAM,SAAmBvD,GAEvDnI,EAAK2L,iBAAkBxD,EAE1B,EAEE,CAKD,SAAAyD,GAECrX,KAAKwI,OAAO4G,eACZpP,KAAK2D,QAAQyL,eAEbpP,KAAKmC,SAASmG,KAAMtI,KAAKC,QACzBD,KAAKiC,oBAAoBqG,KAAMtI,KAAKwI,OAAOgL,QAC3CxT,KAAKkC,mBAAmBoG,KAAMtI,KAAK2D,QAAQ6P,QAC3CxT,KAAKuB,SAAWvB,KAAKwI,OAAO2H,KAC5BnQ,KAAKwB,QAAUxB,KAAKwI,OAAO+H,IAC3BvQ,KAAK2B,OAAS3B,KAAKwI,OAAOsE,KAC1B9M,KAAK0B,KAAK4G,KAAMtI,KAAKwI,OAAO6G,IAEvBrP,KAAKwI,OAAOK,sBAEhB7I,KAAK4B,MAAQ5B,KAAKwI,OAAO6I,IAI1B,CAWD,KAAAhH,CAAOH,EAAMuH,EAAO6F,GAAc,GAEjC9X,EAAgB8I,KAAMmJ,GACtB,IAAI8F,EAAc,EAAIrN,EAEtB,GAAKlK,KAAKwI,OAAO6E,qBAAuB,CAGvCrN,KAAKwI,OAAOsE,KAAO9M,KAAKsB,WACxBtB,KAAKwI,OAAOsE,MAAQ5C,EAGflK,KAAKwI,OAAOsE,KAAO9M,KAAK4F,SAE5B5F,KAAKwI,OAAOsE,KAAO9M,KAAK4F,QACxB2R,EAAcvX,KAAKsB,WAAatB,KAAK4F,SAE1B5F,KAAKwI,OAAOsE,KAAO9M,KAAK2F,UAEnC3F,KAAKwI,OAAOsE,KAAO9M,KAAK2F,QACxB4R,EAAcvX,KAAKsB,WAAatB,KAAK2F,SAItC3F,KAAKwI,OAAOgI,yBAEZxQ,KAAKQ,MAAM4J,sBAAuBpK,KAAKyB,mBAGvCzB,KAAKgB,aAAamU,UAAWoC,EAAaA,EAAaA,GACvDvX,KAAKc,mBAAmBsK,iBAAmBpL,KAAKQ,MAAMhC,GAAKwB,KAAKQ,MAAM/B,GAAKuB,KAAKQ,MAAM6K,GAEtFrL,KAAKW,MAAMyK,gBAAiBpL,KAAKQ,MAAMhC,EAAGwB,KAAKQ,MAAM/B,EAAGuB,KAAKQ,MAAM6K,GAAI+K,SAAUpW,KAAKgB,cACtFhB,KAAKW,MAAMyV,SAAUpW,KAAKc,oBAI1BtB,EAAgByL,IAAKjL,KAAKQ,OAE1B,MAAMkJ,EAASlK,EAAgB2R,QAAQhG,eAAgBoM,GAOvD,OANA/X,EAAgByL,IAAKvB,GAErB1J,KAAKU,MAAM0K,gBAAiB5L,EAAgBhB,EAAGgB,EAAgBf,EAAGe,EAAgB6L,GAClFrL,KAAKW,MAAMuO,YAAalP,KAAKU,OAE7BV,KAAKgW,0BAA2BhW,KAAKU,MAAOV,KAAKW,OAC1CjC,CAEV,CAAS,GAAKsB,KAAKwI,OAAOK,oBAAsB,CAE7C7I,KAAKQ,MAAM4J,sBAAuBpK,KAAKkB,oBACvClB,KAAKS,MAAM2J,sBAAuBpK,KAAKyB,mBAGvC,IAAI6H,EAAWtJ,KAAKQ,MAAM+I,WAAY/J,GAClCkK,EAASJ,EAAaA,EAAWiO,EAGrC,MAAMxM,EAAczB,EAAWI,EAkB/B,GAjBKqB,EAAc/K,KAAKwF,aAEvB+R,EAAcvX,KAAKwF,YAAc8D,EACjCI,EAASJ,EAAaA,EAAWiO,GAEtBxM,EAAc/K,KAAKyF,cAE9B8R,EAAcvX,KAAKyF,YAAc6D,EACjCI,EAASJ,EAAaA,EAAWiO,GAIlCnY,EAAQkJ,KAAM9I,GAAkByL,IAAKjL,KAAKQ,OAAQ0K,YAAYC,eAAgBzB,GAE9E1J,KAAKU,MAAM0K,gBAAiBhM,EAAQZ,EAAGY,EAAQX,EAAGW,EAAQiM,GAGrDiM,EAAc,CAGlB,MAAME,EAAMxX,KAAKS,MAEjB6I,EAAWkO,EAAIjO,WAAY/J,GAC3BkK,EAASJ,EAAaA,EAAWiO,EACjCnY,EAAQkJ,KAAM9I,GAAkByL,IAAKjL,KAAKS,OAAQyK,YAAYC,eAAgBzB,GAE9E1J,KAAKc,mBAAmBsK,gBAAiBoM,EAAIhZ,EAAGgZ,EAAI/Y,EAAG+Y,EAAInM,GAC3DrL,KAAKgB,aAAamU,UAAWoC,EAAaA,EAAaA,GAEvDvX,KAAKW,MAAMyK,gBAAiBhM,EAAQZ,EAAGY,EAAQX,EAAGW,EAAQiM,GAAI+K,SAAUpW,KAAKc,oBAC7Ed,KAAKW,MAAMyV,SAAUpW,KAAKgB,cAE1BhB,KAAKc,mBAAmBsK,iBAAmBoM,EAAIhZ,GAAKgZ,EAAI/Y,GAAK+Y,EAAInM,GAEjErL,KAAKW,MAAMyV,SAAUpW,KAAKc,oBAC1Bd,KAAKgW,0BAA2BhW,KAAKU,MAAOV,KAAKW,MAGrD,MAEIX,KAAKgW,0BAA2BhW,KAAKU,OAItC,OAAOhC,CAEP,CAED,CAQD,MAAAsM,CAAQ4I,GAEF5T,KAAKwI,OAAOK,sBAEhB7I,KAAKwI,OAAO6I,IAAM7G,EAAAA,UAAUC,MAAOmJ,EAAO5T,KAAKgF,OAAQhF,KAAKiF,QAC5DjF,KAAKwI,OAAOgI,yBAIb,CASD,yBAAAwF,CAA2BrX,EAAS,KAAME,EAAS,MAEnC,MAAVF,EAE2B,MAA1BD,EAAgBC,OAEpBD,EAAgBC,OAAO2J,KAAM3J,GAI7BD,EAAgBC,OAASA,EAAOwS,QAMjCzS,EAAgBC,OAAS,KAIX,MAAVE,EAE2B,MAA1BH,EAAgBG,OAEpBH,EAAgBG,OAAOyJ,KAAMzJ,GAI7BH,EAAgBG,OAASA,EAAOsS,QAMjCzS,EAAgBG,OAAS,IAI1B,CAUD,OAAAkO,CAAS0E,EAAOjI,GAgBf,OAdAxJ,KAAKe,gBAAgBoV,iBAAkBnW,KAAKiB,cAAeuI,GAC3DxJ,KAAKc,mBAAmBsK,iBAAmBqG,EAAMjT,GAAKiT,EAAMhT,GAAKgT,EAAMpG,GAEvErL,KAAKU,MAAM0K,gBAAiBqG,EAAMjT,EAAGiT,EAAMhT,EAAGgT,EAAMpG,GACpDrL,KAAKU,MAAM0V,SAAUpW,KAAKe,iBAC1Bf,KAAKU,MAAM0V,SAAUpW,KAAKc,oBAE1Bd,KAAKQ,MAAM4J,sBAAuBpK,KAAKyB,mBAAoBwJ,IAAKwG,GAChEzR,KAAKS,MAAM6H,KAAMtI,KAAKQ,OAAQiX,eAAgBzX,KAAKiB,cAAeuI,GAClExJ,KAAKS,MAAMwK,IAAKjL,KAAKQ,OAErBR,KAAKW,MAAMyK,gBAAiBpL,KAAKS,MAAMjC,EAAGwB,KAAKS,MAAMhC,EAAGuB,KAAKS,MAAM4K,GAEnErL,KAAKgW,0BAA2BhW,KAAKU,MAAOV,KAAKW,OAC1CjC,CAEP,CAQD,YAAAgZ,GAEC,OAAOxY,CAEP,CAWD,cAAA+M,CAAgB0L,EAAQhZ,GAEvB,MAAMiZ,EAAY5X,KAAK0X,eACvBE,EAAUzH,KAAOxR,EAAOwR,KACxByH,EAAUrH,IAAM5R,EAAO4R,IACvBqH,EAAUC,cAAeF,EAAQhZ,GAEjC,MAAMmZ,EAAYF,EAAUG,iBAAkB/X,KAAKF,MAAM4S,UAAU,GAEnE,IAAM,IAAIhF,EAAI,EAAGA,EAAIoK,EAAUrK,OAAQC,IAEtC,GAAKoK,EAAWpK,GAAIlF,OAAOwP,MAAQhY,KAAK2D,QAAQqU,MAA+B,MAAvBF,EAAWpK,GAAIuK,KAEtE,OAAOH,EAAWpK,GAAI+D,MAAMN,QAM9B,OAAO,IAEP,CAaD,oBAAAzI,CAAsB/J,EAAQqU,EAASC,EAASC,EAAQsB,GAEvD,GAAoB,sBAAf7V,EAAOI,KAA+B,CAE1CiB,KAAKM,MAAMgI,KAAMtI,KAAKsT,kBAAmBN,EAASC,EAASC,IAC3DlT,KAAKQ,MAAMuV,IAAK/V,KAAKM,MAAM9B,EAAGwB,KAAKM,MAAM7B,EAAG,GAE5C,MAAMyZ,EAAKvO,KAAKQ,IAAKnK,KAAKM,MAAM9B,EAAG,GAC7B2Z,EAAKxO,KAAKQ,IAAKnK,KAAKM,MAAM7B,EAAG,GAC7B2Z,EAAKzO,KAAKQ,IAAKnK,KAAK6F,UAAW,GAcrC,OAZKqS,EAAKC,GAAW,GAALC,EAGfpY,KAAKQ,MAAM6X,KAAM1O,KAAKkH,KAAMuH,GAAOF,EAAKC,KAKxCnY,KAAKQ,MAAM6X,KAAa,GAALD,EAAezO,KAAKkH,KAAMqH,EAAKC,IAI5CnY,KAAKQ,KAEf,CAAS,GAAoB,qBAAf7B,EAAOI,KAA8B,CAGhDiB,KAAKM,MAAMgI,KAAMtI,KAAK+I,aAAciK,EAASC,EAASC,IAEtDlT,KAAKQ,MAAMuV,IAAK/V,KAAKM,MAAM9B,EAAGwB,KAAKM,MAAM7B,GAAK,GAC9CuB,KAAKQ,MAAM8X,aAAc3Z,EAAO4Z,yBAEhC,MAAMC,EAASxY,KAAKQ,MAAM2Q,QAAQjG,YAC5BuN,EAAsB9Z,EAAO2L,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAC/DoO,EAAU/O,KAAKQ,IAAKqK,EAAU,GAY9BmE,EAAI3Y,KAAKQ,MAAM6K,EACfuN,EAAIjP,KAAKkH,KAAMlH,KAAKQ,IAAKnK,KAAKQ,MAAMhC,EAAG,GAAMmL,KAAKQ,IAAKnK,KAAKQ,MAAM/B,EAAG,IAE3E,GAAU,GAALma,EAIJ,OADAJ,EAAOzC,IAAK/V,KAAKQ,MAAMhC,EAAGwB,KAAKQ,MAAM/B,EAAG+V,GACjCgE,EAIR,MAAMK,EAAIF,EAAIC,EACRE,EAAIL,EASV,IAAIM,EAAIpP,KAAKQ,IAAK0O,EAAG,GAAM,EACvBG,EAAI,EAAIH,EAAIC,EACZG,EAAItP,KAAKQ,IAAK2O,EAAG,GAAMJ,EACvBQ,EAAQvP,KAAKQ,IAAK6O,EAAG,GAAQ,EAAID,EAAIE,EAEzC,GAAKC,GAAS,EAAI,CAGjBlZ,KAAKM,MAAM+S,OAAU2F,EAAIrP,KAAKkH,KAAMqI,KAAc,EAAIH,IACtD/Y,KAAKM,MAAMwI,KAAM+P,EAAI7Y,KAAKM,MAAM9B,EAAIsa,GAIpC,GAFctO,EAAAA,UAAUK,QAAU7K,KAAKM,MAAMkJ,SAE/B,GAAK,CAKlB,MAAM2P,EAAYxP,KAAKkH,KAAMlH,KAAKQ,IAAKnK,KAAKM,MAAM9B,EAAG,GAAMmL,KAAKQ,IAAOsO,EAAsBzY,KAAKM,MAAM7B,EAAK,IAG7G,OAFA+Z,EAAOrN,eAAgBgO,GACvBX,EAAOnN,GAAKoN,EACLD,CAEP,CAED,CAUDO,EAAIF,EACJG,EAAIF,EACJG,EAAgB,IAAVP,EACNQ,EAAQvP,KAAKQ,IAAK6O,EAAG,GAAQ,EAAID,EAAIE,EACrCjZ,KAAKM,MAAM+S,OAAU2F,EAAIrP,KAAKkH,KAAMqI,KAAc,EAAIH,IACtD/Y,KAAKM,MAAMwI,KAAM+P,EAAI7Y,KAAKM,MAAM9B,EAAIsa,GAEpC,MAAMK,EAAYxP,KAAKkH,KAAMlH,KAAKQ,IAAKnK,KAAKM,MAAM9B,EAAG,GAAMmL,KAAKQ,IAAOsO,EAAsBzY,KAAKM,MAAM7B,EAAK,IAI7G,OAFA+Z,EAAOrN,eAAgBgO,GACvBX,EAAOnN,GAAKoN,EACLD,CAEP,CAED,CAcD,kBAAAjQ,CAAoB5J,EAAQqU,EAASC,EAASC,EAAQkG,GAAkB,GAEvE,GAAoB,sBAAfza,EAAOI,KAKX,OAHAiB,KAAKM,MAAMgI,KAAMtI,KAAKsT,kBAAmBN,EAASC,EAASC,IAC3DlT,KAAKQ,MAAMuV,IAAK/V,KAAKM,MAAM9B,EAAGwB,KAAKM,MAAM7B,EAAG,GAErCuB,KAAKQ,MAAM2Q,QAEZ,GAAoB,qBAAfxS,EAAOI,KAA8B,CAEhDiB,KAAKM,MAAMgI,KAAMtI,KAAK+I,aAAciK,EAASC,EAASC,IAGtDlT,KAAKQ,MAAMuV,IAAK/V,KAAKM,MAAM9B,EAAGwB,KAAKM,MAAM7B,GAAK,GAC9CuB,KAAKQ,MAAM8X,aAAc3Z,EAAO4Z,yBAEhC,MAAMC,EAASxY,KAAKQ,MAAM2Q,QAAQjG,YAY5ByN,EAAI3Y,KAAKQ,MAAM6K,EACfuN,EAAIjP,KAAKkH,KAAMlH,KAAKQ,IAAKnK,KAAKQ,MAAMhC,EAAG,GAAMmL,KAAKQ,IAAKnK,KAAKQ,MAAM/B,EAAG,IAC3E,IAAIga,EAmBJ,GAfCA,EAFIW,EAEkBpZ,KAAKQ,MAAM4J,sBAAuBpK,KAAKiC,qBAAsBsH,WAAYvJ,KAAKS,MAAM2J,sBAAuBpK,KAAKkC,qBAIhHvD,EAAO2L,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAWtD,GAALsO,EAIJ,OADAJ,EAAOzC,IAAK,EAAG,EAAG,GACXyC,EAIR,MACMM,EAAIL,EACJja,GAAMsa,GAFFH,EAAIC,GAIRO,EAAYxP,KAAKkH,KAAMlH,KAAKQ,IAAK2O,EAAG,GAAMnP,KAAKQ,IAAK3L,EAAG,IAG7D,OAFAga,EAAOrN,eAAgBgO,GACvBX,EAAOnN,EAAI,EACJmN,CAEP,CAED,CAOD,iBAAAa,GAGCrZ,KAAKkB,mBAAmBoH,KAAMtI,KAAKwI,OAAOgL,QAC1CxT,KAAKyB,kBAAkB6G,KAAMtI,KAAK2D,QAAQ6P,QAErCxT,KAAKwI,OAAO6E,sBAEhBrN,KAAKmB,uBAAuBmH,KAAMtI,KAAKwI,OAAOiL,kBAC9CzT,KAAKwI,OAAOgI,yBACZxQ,KAAKsB,WAAatB,KAAKwI,OAAOsE,MAEnB9M,KAAKwI,OAAOK,sBAEvB7I,KAAKoB,UAAYpB,KAAKwI,OAAO6I,IAI9B,CASD,aAAAhJ,CAAeiR,EAAUC,GAExBvZ,KAAK8F,OAASwT,EACTC,GAEJvZ,KAAKqZ,mBAIN,CAED,MAAA5I,GAYC,IAVmD,IAA9CzQ,KAAKC,OAAOuZ,OAAQxZ,KAAKE,kBAE7BF,KAAK2D,QAAQ2G,SAAShC,KAAMtI,KAAKC,QACjCD,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAC9CxI,KAAK0T,WAAY1T,KAAKC,OAAQD,KAAK6F,WACnC7F,KAAKE,eAAeoI,KAAMtI,KAAKC,SAK3BD,KAAKwI,OAAO6E,sBAGhB,GAAKrN,KAAKwI,OAAOsE,KAAO9M,KAAK4F,SAAW5F,KAAKwI,OAAOsE,KAAO9M,KAAK2F,QAAU,CAEzE,MAAM8T,EAAUjP,EAAAA,UAAUC,MAAOzK,KAAKwI,OAAOsE,KAAM9M,KAAK2F,QAAS3F,KAAK4F,SACtE5F,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOoP,EAAUzZ,KAAKwI,OAAOsE,KAAM9M,KAAK2D,QAAQ2G,UAAU,GAE1F,OAEK,GAAKtK,KAAKwI,OAAOK,oBAAsB,CAG7C,MAAMS,EAAWtJ,KAAKwI,OAAO8B,SAASf,WAAYvJ,KAAK2D,QAAQ2G,UAE/D,GAAKhB,EAAWtJ,KAAKyF,YAAchG,GAAQ6J,EAAWtJ,KAAKwF,YAAc/F,EAAO,CAE/E,MAAMsL,EAAcP,EAASA,UAACC,MAAOnB,EAAUtJ,KAAKwF,YAAaxF,KAAKyF,aACtEzF,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOU,EAAczB,EAAUtJ,KAAK2D,QAAQ2G,WAC5EtK,KAAKqZ,mBAEL,EAGIrZ,KAAKwI,OAAO6I,IAAMrR,KAAKgF,QAAUhF,KAAKwI,OAAO6I,IAAMrR,KAAKiF,UAE5DjF,KAAKwI,OAAO6I,IAAM7G,EAASA,UAACC,MAAOzK,KAAKwI,OAAO6I,IAAKrR,KAAKgF,OAAQhF,KAAKiF,QACtEjF,KAAKwI,OAAOgI,0BAIb,MAAMkJ,EAAY1Z,KAAK6F,UAGvB,GAFA7F,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAEzCkR,EAAY1Z,KAAK6F,UAAYpG,GAAQia,EAAY1Z,KAAK6F,UAAYpG,EAAO,CAE7E,MAAM4K,GAAUrK,KAAK2D,QAAQ0G,MAAM7L,EAAIwB,KAAK2D,QAAQ0G,MAAM5L,EAAIuB,KAAK2D,QAAQ0G,MAAMgB,GAAM,EACjFsO,EAAY3Z,KAAK6F,UAAYwE,EAE7B0J,EADQ,IAAIC,eAAc,EAAG,EAAG2F,EAAWA,GAC5B1F,UAAWjU,KAAK6D,WAC/BqQ,GAAgB,IAAIC,EAAAA,gBAAiBC,cAAeL,GAE1D,IAAM,MAAMM,KAASrU,KAAK2D,QAAQ+O,SAEjC1S,KAAK2D,QAAQ+O,SAAU2B,GAAQC,SAAWJ,CAI3C,CAED,CAEDlU,KAAKwI,OAAO+K,OAAQvT,KAAK2D,QAAQ2G,SAEjC,CAED,gBAAA8M,CAAkBwC,GAEjB,MAAMzL,EAAQmI,KAAKuD,MAAOD,GAE1B,GAA2BE,MAAtB3L,EAAMqI,aAA4B,CAEtCxW,KAAKC,OAAO8Z,UAAW5L,EAAMqI,aAAavW,QAE1CD,KAAKkB,mBAAmB6Y,UAAW5L,EAAMqI,aAAahB,aAAawE,UACnEha,KAAKkB,mBAAmBiO,UAAWnP,KAAKwI,OAAO8B,SAAUtK,KAAKwI,OAAOqE,WAAY7M,KAAKwI,OAAO6B,OAE7FrK,KAAKwI,OAAO6G,GAAG/G,KAAM6F,EAAMqI,aAAaG,UACxC3W,KAAKwI,OAAO2H,KAAOhC,EAAMqI,aAAaE,WACtC1W,KAAKwI,OAAO+H,IAAMpC,EAAMqI,aAAaC,UAErCzW,KAAKwI,OAAOsE,KAAOqB,EAAMqI,aAAaI,WAEjC5W,KAAKwI,OAAOK,sBAEhB7I,KAAKwI,OAAO6I,IAAMlD,EAAMqI,aAAaK,WAItC7W,KAAKyB,kBAAkBsY,UAAW5L,EAAMqI,aAAaf,YAAYuE,UACjEha,KAAKyB,kBAAkB0N,UAAWnP,KAAK2D,QAAQ2G,SAAUtK,KAAK2D,QAAQkJ,WAAY7M,KAAK2D,QAAQ0G,OAE/FrK,KAAKwI,OAAO4G,eACZpP,KAAKwI,OAAOgI,yBAEZxQ,KAAK2D,QAAQyL,eAEbpP,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAC9C,MAAMyR,GAAW,IAAIrb,EAAOA,SAAG0J,KAAMtI,KAAKkC,oBAC1ClC,KAAK0T,WAAY1T,KAAK2D,QAAQ2G,SAAUtK,KAAK6F,WAC7C7F,KAAKkC,mBAAmBoG,KAAM2R,GAE9Bja,KAAKwI,OAAO+K,OAAQvT,KAAK2D,QAAQ2G,UACjCtK,KAAKqI,cAAejL,EAAMC,MAAM,GAEhC2C,KAAK+H,cAAejJ,EAEpB,CAED,EAMF,SAASkI,IAER,MAAMqD,GAAUrK,KAAK2D,QAAQ0G,MAAM7L,EAAIwB,KAAK2D,QAAQ0G,MAAM5L,EAAIuB,KAAK2D,QAAQ0G,MAAMgB,GAAM,EACvFrL,KAAK6F,UAAY7F,KAAKsP,kBAAmBtP,KAAKwI,QAE9C,MAAMmR,EAAY3Z,KAAK6F,UAAYwE,EAE7B0J,EADQ,IAAIC,eAAc,EAAG,EAAG2F,EAAWA,GAC5B1F,UAAWjU,KAAK6D,WAC/BqQ,GAAgB,IAAIC,EAAAA,gBAAiBC,cAAeL,GAG1D,IAAM,MAAMM,KAASrU,KAAK2D,QAAQ+O,SAEjC1S,KAAK2D,QAAQ+O,SAAU2B,GAAQC,SAAWJ,EAI3ClU,KAAK+H,cAAejJ,EAErB,CAEA,SAASqH,EAAeyB,GAEvB,GAAO5H,KAAK8H,QAMZ,IAAM,IAAI4F,EAAI,EAAGA,EAAI1N,KAAKI,aAAaqN,OAAQC,IAE9C,GAAqC,GAAhC1N,KAAKI,aAAcsN,GAAIO,MAAa,CAGxCrG,EAAMsS,iBACN,KAEA,CAIH,CAEA,SAASpT,IAER9G,KAAKqC,YAAYiM,OAAQ,EAAGtO,KAAKqC,YAAYoL,QAC7CzN,KAAKsC,cAAcgM,OAAQ,EAAGtO,KAAKsC,cAAcmL,QACjDzN,KAAKuC,OAASvE,EAAMC,IAErB,CAEA,SAAS2I,EAAegB,GAcvB,GAZqB,GAAhBA,EAAMuS,QAAevS,EAAMwS,WAE/Bpa,KAAK8C,YAAa,EAClB9C,KAAKgD,YAAYuL,KAAM3G,GACvB5H,KAAKiD,WAAa0F,YAAYC,OAI9B5I,KAAK8C,YAAa,EAIO,SAArB8E,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMM,OAKzD,OAHA0B,KAAKqC,YAAYkM,KAAM3G,GACvB5H,KAAKsC,cAAciM,KAAM3G,GAEhB5H,KAAKuC,QAEb,KAAKvE,EAAMC,KAGV+B,KAAKuC,OAASvE,EAAME,WACpB8B,KAAK2H,iBAAkBC,EAAO,UAE9BP,OAAOE,iBAAkB,cAAevH,KAAKyG,gBAC7CY,OAAOE,iBAAkB,YAAavH,KAAKuG,cAE3C,MAED,KAAKvI,EAAME,WACX,KAAKF,EAAMG,oBAGV6B,KAAKuC,OAASvE,EAAMI,WAEpB4B,KAAKuM,gBACLvM,KAAKiN,eACLjN,KAAKoM,mBAEL,MAED,KAAKpO,EAAMI,WAGV4B,KAAKuC,OAASvE,EAAMK,YACpB2B,KAAKuN,iBAAkB3F,QAKnB,GAA0B,SAArBA,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMC,KAAO,CAEvE,IAAIqc,EAAW,KAEV1S,EAAM2S,SAAW3S,EAAM4S,QAE3BF,EAAW,OAEA1S,EAAM6S,WAEjBH,EAAW,SAIZta,KAAKK,SAAWL,KAAKyO,gBAAiB7G,EAAMuS,OAAQG,GAC9B,MAAjBta,KAAKK,WAETgH,OAAOE,iBAAkB,cAAevH,KAAKyG,gBAC7CY,OAAOE,iBAAkB,YAAavH,KAAKuG,cAG3CvG,KAAKuC,OAASvE,EAAMM,OACpB0B,KAAKoC,QAAUwF,EAAMuS,OACrBna,KAAK2H,iBAAkBC,EAAO5H,KAAKK,UAIpC,CAEF,CAEA,SAASqG,EAAekB,GAEvB,GAA0B,SAArBA,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMM,OAEzD,OAAS0B,KAAKuC,QAEb,KAAKvE,EAAME,WAGV8B,KAAK+O,iBAAkBnH,GAEvB5H,KAAKgJ,gBAAiBpB,EAAOxK,EAAMG,QACnC,MAED,KAAKS,EAAMG,oBAIV,GAFiB6B,KAAKkN,0BAA2BlN,KAAKsC,cAAe,GAAKsF,GAAU5H,KAAK6C,aAExE7C,KAAKwC,mBAAqB,CAG1CxC,KAAKuC,OAASvE,EAAME,WACpB8B,KAAK+O,iBAAkBnH,GAEvB5H,KAAK2H,iBAAkBC,EAAO,UAC9B,KAEA,CAED,MAED,KAAK5J,EAAMI,WAGV4B,KAAK+O,iBAAkBnH,GAEvB5H,KAAK0M,eACL1M,KAAKmN,cACLnN,KAAKqM,kBAEL,MAED,KAAKrO,EAAMK,YAGV2B,KAAK+O,iBAAkBnH,GAEvB5H,KAAK2N,gBAAiB/F,QAKlB,GAA0B,SAArBA,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMM,OAAS,CAEzE,IAAIgc,EAAW,KAEV1S,EAAM2S,SAAW3S,EAAM4S,QAE3BF,EAAW,OAEA1S,EAAM6S,WAEjBH,EAAW,SAIZ,MAAMI,EAAe1a,KAAK0O,qBAAsB1O,KAAKoC,QAASkY,GAEzC,MAAhBI,GAEJ1a,KAAKgJ,gBAAiBpB,EAAO8S,EAI9B,CAGD,GAAK1a,KAAK8C,WAAa,CAEL9C,KAAKkN,0BAA2BlN,KAAKgD,YAAahD,KAAKgD,YAAYyK,OAAS,GAAK7F,GAAU5H,KAAK6C,YACjG7C,KAAKsD,qBAEpBtD,KAAK8C,YAAa,EAInB,CAEF,CAEA,SAAS0D,EAAaoB,GAErB,GAA0B,SAArBA,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMM,OAAS,CAElE,MAAMqc,EAAS3a,KAAKsC,cAAcmL,OAElC,IAAM,IAAIC,EAAI,EAAGA,EAAIiN,EAAQjN,IAE5B,GAAK1N,KAAKsC,cAAeoL,GAAIsB,WAAapH,EAAMoH,UAAY,CAE3DhP,KAAKsC,cAAcgM,OAAQZ,EAAG,GAC9B1N,KAAKqC,YAAYiM,OAAQZ,EAAG,GAC5B,KAEA,CAIF,OAAS1N,KAAKuC,QAEb,KAAKvE,EAAME,WACX,KAAKF,EAAMG,oBAGVkJ,OAAOK,oBAAqB,cAAe1H,KAAKyG,gBAChDY,OAAOK,oBAAqB,YAAa1H,KAAKuG,cAE9CvG,KAAKuC,OAASvE,EAAMC,KACpB+B,KAAKsL,iBAEL,MAED,KAAKtN,EAAMI,WAGV4B,KAAKsM,eAAgB1E,GACrB5H,KAAKsN,WAAY1F,GACjB5H,KAAKgN,YAAapF,GAGlB5H,KAAKuC,OAASvE,EAAMG,oBAEpB,MAED,KAAKH,EAAMK,YAEwB,GAA7B2B,KAAKsC,cAAcmL,SAEvBpG,OAAOK,oBAAqB,cAAe1H,KAAKyG,gBAChDY,OAAOK,oBAAqB,YAAa1H,KAAKuG,cAG9CvG,KAAKuC,OAASvE,EAAMC,KACpB+B,KAAK4N,kBAQV,KAAkC,SAArBhG,EAAMyS,aAA0Bra,KAAKuC,QAAUvE,EAAMM,SAEhE+I,OAAOK,oBAAqB,cAAe1H,KAAKyG,gBAChDY,OAAOK,oBAAqB,YAAa1H,KAAKuG,cAE9CvG,KAAKuC,OAASvE,EAAMC,KACpB+B,KAAKsL,iBACLtL,KAAKoC,SAAY,GAIlB,GAAKwF,EAAMwS,UAEV,GAAKpa,KAAK8C,WAAa,CAItB,GAFiB8E,EAAMgT,UAAY5a,KAAKgD,YAAahD,KAAKgD,YAAYyK,OAAS,GAAImN,WAElE5a,KAAKmD,aAErB,GAAsB,GAAjBnD,KAAK+C,SAGT/C,KAAK+C,SAAW,EAChB/C,KAAKkD,YAAcyF,YAAYC,UAEzB,CAEN,MAAMiS,EAAgBjT,EAAMgT,UAAY5a,KAAKkD,YACvC+G,EAAWjK,KAAKkN,0BAA2BlN,KAAKgD,YAAa,GAAKhD,KAAKgD,YAAa,IAAQhD,KAAK6C,YAElGgY,GAAiB7a,KAAKoD,cAAgB6G,GAAYjK,KAAKqD,eAI3DrD,KAAK+C,SAAW,EAChB/C,KAAKgD,YAAYsL,OAAQ,EAAGtO,KAAKgD,YAAYyK,QAC7CzN,KAAK+L,YAAanE,KAKlB5H,KAAK+C,SAAW,EAChB/C,KAAKgD,YAAY8X,QACjB9a,KAAKkD,YAAcyF,YAAYC,MAIhC,MAID5I,KAAK8C,YAAa,EAClB9C,KAAK+C,SAAW,EAChB/C,KAAKgD,YAAYsL,OAAQ,EAAGtO,KAAKgD,YAAYyK,OAIjD,MAEGzN,KAAK+C,SAAW,EAChB/C,KAAKgD,YAAYsL,OAAQ,EAAGtO,KAAKgD,YAAYyK,OAMhD,CAEA,SAASnH,EAASsB,GAEjB,GAAK5H,KAAK8H,SAAW9H,KAAKqF,WAAa,CAEtC,IAAIiV,EAAW,KAEV1S,EAAM2S,SAAW3S,EAAM4S,QAE3BF,EAAW,OAEA1S,EAAM6S,WAEjBH,EAAW,SAIZ,MAAMS,EAAU/a,KAAKyO,gBAAiB,QAAS6L,GAE/C,GAAgB,MAAXS,EAAkB,CAEtBnT,EAAMsS,iBACNla,KAAK+H,cAAe/I,GAEpB,MAAMgc,EAAc,IACpB,IAAIC,EAAMrT,EAAMsT,OAASF,EAErB9Q,EAAO,EAYX,OAVK+Q,EAAM,EAEV/Q,EAAO,EAAIlK,KAAK0E,YAELuW,EAAM,IAEjB/Q,EAAOlK,KAAK0E,aAIJqW,GAER,IAAK,OAcJ,GAZA/a,KAAKqI,cAAejL,EAAMK,OAAO,GAE5Bwd,EAAM,EAEV/Q,EAAO,EAAMP,KAAKQ,IAAKnK,KAAK0E,YAAauW,GAE9BA,EAAM,IAEjB/Q,EAAOP,KAAKQ,IAAKnK,KAAK0E,aAAeuW,IAIjCjb,KAAK+E,YAAc/E,KAAKmF,UAAY,CAExC,IAAIiI,EAECpN,KAAKwI,OAAO6E,qBAEhBD,EAAapN,KAAKuI,mBAAoBvI,KAAKwI,OAAQZ,EAAMK,QAASL,EAAMM,QAASlI,KAAKH,YAAa+M,gBAAiB5M,KAAKwI,OAAOqE,YAAa1B,eAAgB,EAAInL,KAAKwI,OAAOsE,MAAO9G,IAAKhG,KAAK2D,QAAQ2G,UAE3LtK,KAAKwI,OAAOK,sBAEvBuE,EAAapN,KAAKuI,mBAAoBvI,KAAKwI,OAAQZ,EAAMK,QAASL,EAAMM,QAASlI,KAAKH,YAAa+M,gBAAiB5M,KAAKwI,OAAOqE,YAAa7G,IAAKhG,KAAK2D,QAAQ2G,WAIhKtK,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMkD,GAEnD,MAEMpN,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAK2D,QAAQ2G,WAIxC,MAAdtK,KAAKyD,QAETzD,KAAKqJ,cACLrJ,KAAKyI,YAINzI,KAAKqI,cAAejL,EAAMC,MAAM,GAEhC2C,KAAK+H,cAAejJ,GACpBkB,KAAK+H,cAAe9I,GAEpB,MAED,IAAK,MAEJ,GAAKe,KAAKwI,OAAOK,oBAAsB,CAEtC7I,KAAKqI,cAAejL,EAAMM,KAAK,GAgBV,GAAhBkK,EAAMuT,SAEVF,EAAMrT,EAAMuT,OAASH,EAErB9Q,EAAO,EAEF+Q,EAAM,EAEV/Q,EAAO,EAAMP,KAAKQ,IAAKnK,KAAK0E,YAAauW,GAE9BA,EAAM,IAEjB/Q,EAAOP,KAAKQ,IAAKnK,KAAK0E,aAAeuW,KAMvCjb,KAAKQ,MAAM4J,sBAAuBpK,KAAKkB,oBACvC,MAAM1C,EAAIwB,KAAKQ,MAAM+I,WAAYvJ,KAAK2D,QAAQ2G,UAC9C,IAAIC,EAAO/L,EAAI0L,EAGfK,EAAOC,EAAAA,UAAUC,MAAOF,EAAMvK,KAAKwF,YAAaxF,KAAKyF,aAErD,MAAMhH,EAAID,EAAImL,KAAKe,IAAKF,EAAAA,UAAUG,QAAU3K,KAAKwI,OAAO6I,IAAM,IAG9D,IAAIzG,EAASJ,YAAUK,SAAoC,EAAxBlB,KAAKmB,KAAMrM,EAAI8L,IAG7CK,EAAS5K,KAAKiF,OAElB2F,EAAS5K,KAAKiF,OAEH2F,EAAS5K,KAAKgF,SAEzB4F,EAAS5K,KAAKgF,QAKfkF,EAAO1L,GADaC,EAAIkL,KAAKe,IAAKF,EAASA,UAACG,SAAYC,EAAS,KAGjE5K,KAAKgL,OAAQJ,GACb5K,KAAKmJ,qBAAsBnJ,KAAKqK,MAAOH,EAAMlK,KAAK2D,QAAQ2G,UAAU,GAEpE,CAEkB,MAAdtK,KAAKyD,QAETzD,KAAKqJ,cACLrJ,KAAKyI,YAINzI,KAAKqI,cAAejL,EAAMC,MAAM,GAEhC2C,KAAK+H,cAAejJ,GACpBkB,KAAK+H,cAAe9I,GAMtB,CAED,CAEF,KCx8GYmc,GCLZ,SAAqBC,EAAKC,QACN,IAAbA,IAAiBA,EAAM,CAAA,GAC5B,IAAIC,EAAWD,EAAIC,SAEnB,GAAKF,GAA2B,oBAAbG,SAAnB,CAEA,IAAIC,EAAOD,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DvU,EAAQqU,SAASG,cAAc,SACnCxU,EAAMpI,KAAO,WAEI,QAAbwc,GACEE,EAAKG,WACPH,EAAKI,aAAa1U,EAAOsU,EAAKG,YAKhCH,EAAKK,YAAY3U,GAGfA,EAAM4U,WACR5U,EAAM4U,WAAWC,QAAUX,EAE3BlU,EAAM2U,YAAYN,SAASS,eAAeZ,GAnBY,CAqB1D,g3HDpBA,SAAYD,GAEVA,EAAA,OAAA,SAEAA,EAAA,MAAA,QAEAA,EAAA,kBAAA,oBAEAA,EAAA,cAAA,gBAEAA,EAAA,aAAA,eAEAA,EAAA,YAAA,aACD,CAbD,CAAYA,IAAAA,EAaX,CAAA,IA8DM,MAAMc,EAAqB,CAEhCC,SAAU,CACRC,QAAS,EACTC,IAAK,EACLC,IAAK,EACLC,KAAM,KAGRC,WAAY,CACVJ,QAAS,EACTC,IAAK,GACLC,IAAK,EACLC,KAAM,IAGRE,SAAU,CACRL,QAAS,EACTC,IAAK,GACLC,IAAK,EACLC,KAAM,IAGRG,iBAAkB,IAElBC,qBAAsB,EAEtBC,mBAAoB,EAEpBC,QAAS,CACPC,KAAM,GACNrf,MAAO,IACPsf,mBAAoB,IAGtBC,OAAQ,CAENC,MAAO,CACLC,QAAS,GACTC,WAAY,GACZC,iBAAkB,GAClBC,iBAAkB,GAClBC,iBAAkB,IAGpBC,SAAU,CACRL,QAAS,GACTC,WAAY,GACZK,YAAa,KAIjBC,UAAW,CAETC,WAAY,KAEZC,aAAc,oBAEdC,SAAU,GAEVC,YAAa,kBAEbC,UAAW,GAEXC,SAAU,cEvIEC,EAAiBC,EAAcvM,EAAgB,WAC7D,MAAMwB,EAASsI,SAASG,cAAc,UAChCzR,EAAO,IACbgJ,EAAOnB,MAAQ7H,EACfgJ,EAAOjB,OAAS/H,EAChB,MAAMgU,EAAMhL,EAAOiL,WAAW,MAE1BD,IAEFA,EAAIE,YACJF,EAAIG,IAAInU,GAAUA,GAAUA,EAAO,IAAK,EAAa,EAAVP,KAAKmF,IAChDoP,EAAII,UAAY5M,EAChBwM,EAAIK,OAGJL,EAAIM,KAAO,wDACXN,EAAIO,UAAY,SAChBP,EAAIQ,aAAe,SACnBR,EAAII,UAAY,UAChBJ,EAAIS,SAASV,EAAM/T,GAAUA,KAG/B,MAAM0U,EAAU,IAAIC,gBAAc3L,GAC5BL,EAAW,IAAIiM,EAAAA,eAAe,CAAEC,IAAKH,EAAShK,aAAa,IAC3DoK,EAAS,IAAIC,SAAOpM,GAK1B,OAFAmM,EAAO3U,MAAM0L,IAAI,GAAK,GAAK,GAEpBiJ,CACT,CAQgB,SAAAE,EAAmB1W,EAAkBwH,GAEnD,MAAMmP,EAAiB,IAAI9f,EAAAA,QAC3BmJ,EAAO4W,iBAAiBD,GAGxB,MAAME,GAAY,IAAIhgB,EAAOA,SAAGigB,WAAWH,EAAgBnP,GAG3D,GAAIqP,EAAU5R,SAAWyO,EAAmBuB,UAAUC,WAAY,CAEhE,MACM6B,EA8BV,SAAoBC,GAClB,IAAID,EAAO,EACX,IAAK,IAAI7R,EAAI,EAAGA,EAAI8R,EAAI/R,OAAQC,IAC9B6R,GAASA,GAAQ,GAAKA,EAAQC,EAAIC,WAAW/R,GAC7C6R,GAAQ,EAEV,OAAO5V,KAAK6B,IAAI+T,EAAO,IACzB,CArCiBG,CADAlX,EAAOwP,MAAQ,IAW5B,GAPAqH,EAAUtJ,IACRpM,KAAKgW,IAAIJ,EAAOrD,EAAmBuB,UAAUE,cAC7ChU,KAAKiW,IAAIL,EAAOrD,EAAmBuB,UAAUE,cAC7ChU,KAAKgW,IAAIJ,EAAOrD,EAAmBuB,UAAUG,WAI3CpV,EAAOqX,OAAQ,CACjB,MAAMC,EAAQtX,EAAOqX,OAAOnN,SAASqN,QAAQvX,GACzCsX,GAAS,IAEXT,EAAU7gB,GAAKmL,KAAKgW,IAAIG,EAAQ5D,EAAmBuB,UAAUI,aAAe3B,EAAmBuB,UAAUK,UACzGuB,EAAU5gB,GAAKkL,KAAKiW,IAAIE,EAAQ5D,EAAmBuB,UAAUI,aAAe3B,EAAmBuB,UAAUK,UACzGuB,EAAUhU,IAAMyU,EAAQ,EAAI,GAAK5D,EAAmBuB,UAAUM,SAEjE,CACF,CAGD,OAAOsB,EAAUnU,WACnB,UAuCgBT,EAAMmJ,EAAe9H,EAAalC,GAChD,OAAOD,KAAKC,IAAIkC,EAAKnC,KAAKmC,IAAIlC,EAAKgK,GACrC,CA2BM,SAAUoM,EAAYC,GAC1B,IAAKA,EAAM,MAAO,gBAClB,MAAMC,EAAQD,EAAKE,MAAM,KAEzB,OADiBD,EAAMA,EAAMzS,OAAS,GACtB0S,MAAM,KAAK,EAC7B,UAMgBC,IACd,MAAsB,oBAAX/Y,SACJ,iEAAiEgZ,KAAKvJ,UAAUwJ,YAC/EjZ,OAAOkZ,YAAc,IAC/B,OC7JaC,EA+CX,WAAA5gB,CACE6gB,EACA3gB,EACAnB,EACA+hB,EACAC,EAA2B,IA9CrB3gB,KAAA4gB,SAAW1E,EAAmBC,SAASC,QACvCpc,KAAA2R,WAAauK,EAAmBM,WAAWJ,QAC3Cpc,KAAA6gB,KAAsBzF,EAAc0F,OAGpC9gB,KAAA+gB,kBAA4C,IAAIC,IAChDhhB,KAAAihB,kBAA0C,IAAID,IAC9ChhB,KAAAkhB,eAAyC,IAAIF,IAG7ChhB,KAAAmhB,kBAA4C,IAAIH,IAEhDhhB,KAAAohB,eAAwC,IAAIJ,IAE5ChhB,KAAAqhB,YAAqC,IAAIL,IAEzChhB,KAAAshB,mBAA4C,IAAIN,IAKhDhhB,KAAWuhB,YAAG,EAGdvhB,KAAwBwhB,yBAAkC,KAG1DxhB,KAAgByhB,iBAAe,GAG/BzhB,KAAc0hB,eAA0D,GAkB9E1hB,KAAKygB,MAAQA,EACbzgB,KAAKF,MAAQA,EACbE,KAAKrB,OAASA,EACdqB,KAAK0gB,SAAWA,EAGhB1gB,KAAK2gB,QAAU,CACblb,YAAakb,EAAQlb,aAAeyW,EAAmBS,qBACvDgF,SAAUhB,EAAQgB,UAAYzF,EAAmBQ,iBACjDkF,SAAUjB,EAAQiB,WAAY,EAC9BC,SAAUlB,EAAQkB,UAAYrG,SAASsG,KACvCC,QAASpB,EAAQoB,SAAW,CAC1BhQ,MAAO,QACPE,OAAQ,OACR3H,SAAU,UAEZ0X,kBAAmBrB,EAAQqB,mBAAqB9C,EAChD2B,KAAMF,EAAQE,MAAQzF,EAAc0F,OACpCmB,YAAatB,EAAQsB,aAAe,IAAI5iB,EAAOA,QAAC,EAAG,EAAG,GACtD6iB,WAAYvB,EAAQuB,aAAc,EAClCzB,MAAOE,EAAQF,OAASA,EACxB0B,SAAUxB,EAAQwB,UAAY,GAC9BC,WAAYzB,EAAQyB,aAAc,EAClCC,YAAa1B,EAAQ0B,cAAe,EACpCC,UAAW3B,EAAQ2B,YAAa,EAChCC,aAAc5B,EAAQ4B,eAAgB,EACtCC,sBAAuB7B,EAAQ6B,wBAAyB,EACxDC,OAAQ9B,EAAQ8B,QAAU,GAC1BC,aAAc/B,EAAQ+B,cAAgB,IAGxC1iB,KAAK6gB,KAAO7gB,KAAK2gB,QAAQE,KAGrB7gB,KAAK2gB,QAAQuB,YACfliB,KAAK2iB,oBAIP,MAAMC,GAAM,IAAInT,EAAIA,MAAGC,cAAc1P,KAAKygB,OAC1CzgB,KAAK6iB,YAAcD,EAAIE,UAAU,IAAIzjB,EAAAA,SACrC,MAAMsQ,EAASiT,EAAI/S,kBAAkB,IAAID,EAAAA,QACzC5P,KAAKuhB,YAAc5R,EAAOI,QAAU,EAGpC/P,KAAK+iB,uBAAuB/iB,KAAKygB,OAGjCzgB,KAAKgjB,uBACN,CAMO,iBAAAL,GACN,MAEMzY,GAFM,IAAIuF,EAAIA,MAAGC,cAAc1P,KAAKygB,OAEzBwC,QAAQ,IAAI5jB,EAAAA,SACvB6jB,EAASvZ,KAAKC,IAAIM,EAAK1L,EAAG0L,EAAKzL,EAAGyL,EAAKmB,GAE7C,GAAI6X,EAAS,EAAG,CAEd,MAAM7Y,EAAQ6R,EAAmBU,mBAAqBsG,EACtDljB,KAAKygB,MAAMpW,MAAMc,eAAed,GAGhC,MACM8Y,GADS,IAAI1T,EAAIA,MAAGC,cAAc1P,KAAKygB,OACpBqC,UAAU,IAAIzjB,EAAAA,SAGvCW,KAAKygB,MAAMnW,SAASW,IAAIkY,EACzB,CACF,CAOO,qBAAAH,GAEN,MAAMI,EAAe,IAAIC,EAAAA,aAAa,SAAUnH,EAAmBc,OAAOO,SAASL,SACnFld,KAAKF,MAAMkG,IAAIod,GACfpjB,KAAK0hB,eAAenT,KAAK6U,GAGzB,MAAME,EAAkB,IAAIC,EAAeA,gBAAC,SAAU,QAAUrH,EAAmBc,OAAOO,SAASJ,YACnGnd,KAAKF,MAAMkG,IAAIsd,GACftjB,KAAK0hB,eAAenT,KAAK+U,GAIzB,MAAME,EAAa,IAAIC,EAAAA,SACvBzjB,KAAKrB,OAAOqH,IAAIwd,GAMhB,IAAK,IAAI9V,EAAI,EAAGA,EAHF,EAGaA,IAAK,CAE9B,MAAMlE,EAASkE,EALH,EAKgB/D,KAAKmF,GAAK,EAChCtQ,EALO,EAKHmL,KAAKgW,IAAInW,GACb/K,EANO,EAMHkL,KAAKiW,IAAIpW,GAEbka,EAAQ,IAAIC,EAAAA,iBAAiB,SAAUzH,EAAmBc,OAAOO,SAASC,aAGhFkG,EAAMpZ,SAASyL,IAAIvX,EAAGC,EAAG,GAEzB,MAAMwB,EAAS,IAAIwjB,EAAAA,SACnBxjB,EAAOqK,SAASyL,IAAI,EAAG,GAAI,GAC3ByN,EAAWxd,IAAI/F,GACfyjB,EAAMzjB,OAASA,EAEfujB,EAAWxd,IAAI0d,GACf1jB,KAAK0hB,eAAenT,KAAKmV,EAC1B,CAGD,MAAME,EAAsE,GAAjD1H,EAAmBc,OAAOO,SAASC,YACxDqG,EAAe,IAAIF,EAAAA,iBAAiB,SAAUC,GAEpDC,EAAavZ,SAASyL,IAAI,EAAG,EAAG,GAChC,MAAM+N,EAAa,IAAIL,EAAAA,SACvBK,EAAWxZ,SAASyL,IAAI,EAAG,GAAI,GAC/ByN,EAAWxd,IAAI8d,GACfD,EAAa5jB,OAAS6jB,EACtBN,EAAWxd,IAAI6d,GACf7jB,KAAK0hB,eAAenT,KAAKsV,EAI1B,CAMM,0BAAAE,CAA2BlQ,GAChC7T,KAAK0hB,eAAesC,QAAQN,IAC1BA,EAAM7P,QAAUA,IAId7T,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMM,2BAAAulB,CAA4BC,GACjCnkB,KAAK0hB,eAAesC,QAAQN,IACtBA,aAAiBL,EAAAA,aACnBK,EAAMU,UAAYlI,EAAmBc,OAAOO,SAASL,QAAUiH,EACtDT,aAAiBH,EAAAA,gBAC1BG,EAAMU,UAAYlI,EAAmBc,OAAOO,SAASJ,WAAagH,EACzDT,aAAiBC,EAAAA,mBAC1BD,EAAMU,UAAYlI,EAAmBc,OAAOO,SAASC,YAAc2G,KAKnEnkB,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMO,uBAAA0lB,GACN,MAAMC,EAAWtkB,KAAK2gB,QAAQsB,YAAY9Q,QAAQjG,YAG5C0X,GAAM,IAAInT,EAAIA,MAAGC,cAAc1P,KAAKygB,OACpC3U,EAAM8W,EAAI9W,IAAIyY,IAAID,GAClB1a,EAAMgZ,EAAIhZ,IAAI2a,IAAID,GAClBE,EAAY7a,KAAK6B,IAAI5B,EAAMkC,GAI3BzB,EAAQma,EAAY,KAAS,EAAIA,EAAY,EAEnD,IAAK,MAAMC,KAAQzkB,KAAKyhB,iBAAkB,CACxC,MAAMiD,EAAmB1kB,KAAK+gB,kBAAkB4D,IAAIF,GACpD,GAAIC,EAAkB,CAEpB,MACME,EADcF,EAAiBvT,QAAQlG,IAAIjL,KAAK6iB,aAC7B0B,IAAID,GAI7BtkB,KAAKohB,eAAerL,IAAI0O,EAAMG,EAAOva,EACtC,CACF,CACF,CAMO,sBAAA0Y,CAAuBva,GAE7BxI,KAAK6kB,gBAAgBrc,GAGrBxI,KAAKqkB,0BAELrkB,KAAK8kB,uBAEL9kB,KAAK+kB,6BACN,CAMO,2BAAAA,GACN,IAAIC,EAAW,EACf,MAAMC,EAAS,IAAIjE,IAEnB,IAAK,MAAMyD,KAAQzkB,KAAKyhB,iBAAkB,CACxC,IAAIyD,EAAQ,EACRrF,EAAS4E,EAAK5E,OAElB,KAAOA,GAAUA,IAAW7f,KAAKygB,OAC/ByE,IACArF,EAASA,EAAOA,OAElBoF,EAAOlP,IAAI0O,EAAMS,GACjBF,EAAWrb,KAAKC,IAAIob,EAAUE,EAC/B,CAKD,MAAM7a,EAAQ2a,EAAW,EAAI,EAAIA,EAAW,EAC5C,IAAK,MAAOP,EAAMS,KAAUD,EAE1BjlB,KAAKshB,mBAAmBvL,IAAI0O,EAAMvI,EAAmBW,QAAQC,KAAQoI,EAAQ7a,EAAS6R,EAAmBW,QAAQpf,MAEpH,CAMO,oBAAAqnB,GACN,IAAIK,EAAY,EAChB,MAAMC,EAAU,IAAIpE,IAEpB,IAAK,MAAMyD,KAAQzkB,KAAKyhB,iBACtB,GAAIgD,aAAgBY,EAAAA,KAAM,CACxB,MAAM/Q,EAAWmQ,EAAKnQ,SACjBA,EAASgR,aACZhR,EAASiR,qBAEX,MAAM3C,EAAMtO,EAASgR,YACrB,GAAI1C,EAAK,CACP,MAAM1Y,EAAO,IAAI7K,EAAAA,QACjBujB,EAAIK,QAAQ/Y,GAEZ,MAAMsb,EAAStb,EAAK1L,EAAI0L,EAAKzL,EAAIyL,EAAKmB,EACtC+Z,EAAQrP,IAAI0O,EAAMe,GAClBL,EAAYxb,KAAKC,IAAIub,EAAWK,EACjC,CACF,CAMH,MAAMnb,EAAQ8a,EAAY,EAAI,EAAIA,EAAY,EAC9C,IAAK,MAAOV,EAAMgB,KAAQL,EAExBplB,KAAKqhB,YAAYtL,IAAI0O,EAAMvI,EAAmBW,QAAQC,KAAQ2I,EAAMpb,EAAS6R,EAAmBW,QAAQpf,MAE3G,CAMO,eAAAonB,CAAgBrc,GAEtB,IAAKA,EAAOqL,QACV,OAIF,MAAMvJ,EAAW,IAAIjL,EAAAA,QAcrB,GAbAmJ,EAAO4W,iBAAiB9U,GACxBtK,KAAK+gB,kBAAkBhL,IAAIvN,EAAQ8B,EAAS6G,SAGxC3I,EAAOwM,UACThV,KAAKihB,kBAAkBlL,IAAIvN,EAAQA,EAAOwM,SAAS7D,SAGjD3I,EAAO6B,OACTrK,KAAKkhB,eAAenL,IAAIvN,EAAQA,EAAO6B,MAAM8G,SAI3C,WAAY3I,IAA+B,IAArBA,EAAe,OAAY,CACnDxI,KAAKyhB,iBAAiBlT,KAAK/F,GAG3B,MAAM6W,EAAYrf,KAAK2gB,QAAQqB,kBAAkBxZ,EAAQxI,KAAK6iB,aAC9D7iB,KAAKmhB,kBAAkBpL,IAAIvN,EAAQ6W,EACpC,CAGD7W,EAAOkK,SAASsR,QAAQ0B,IACtB1lB,KAAK6kB,gBAAgBa,IAExB,CAMM,QAAAC,CAASlF,GAEdzgB,KAAKiW,QAGLjW,KAAKygB,MAAQA,EAGTzgB,KAAK2gB,QAAQuB,YACfliB,KAAK2iB,oBAIP,MAAMC,GAAM,IAAInT,EAAIA,MAAGC,cAAc1P,KAAKygB,OAC1CzgB,KAAK6iB,YAAcD,EAAIE,UAAU,IAAIzjB,EAAAA,SACrC,MAAMsQ,EAASiT,EAAI/S,kBAAkB,IAAID,EAAAA,QACzC5P,KAAKuhB,YAAc5R,EAAOI,QAAU,EAGpC/P,KAAK+gB,kBAAkBzL,QACvBtV,KAAKihB,kBAAkB3L,QACvBtV,KAAKkhB,eAAe5L,QACpBtV,KAAKmhB,kBAAkB7L,QACvBtV,KAAKqhB,YAAY/L,QACjBtV,KAAKohB,eAAe9L,QACpBtV,KAAKshB,mBAAmBhM,QACxBtV,KAAKyhB,iBAAmB,GAGxBzhB,KAAK+iB,uBAAuB/iB,KAAKygB,OAGjCzgB,KAAK4lB,yBAGD5lB,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMO,sBAAAinB,GACN,MAAMC,EAA+B,EAAnB7lB,KAAKuhB,YACjBuE,EAAa,CACjB,CAAC,EAAG,EAAG,GAAI,EAAE,EAAG,EAAG,GACnB,CAAC,EAAG,EAAG,GAAI,CAAC,GAAI,EAAG,GACnB,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,GAAI,IAIfC,EAAY/lB,KAAK0hB,eAAesE,OAAOpN,GAAKA,aAAa+K,EAAAA,kBAE3DoC,EAAUtY,SAAWqY,EAAWrY,OAElCsY,EAAU/B,QAAQ,CAACN,EAAOhW,KACxB,MAAOlP,EAAGC,EAAG4M,GAAKya,EAAWpY,GAC7BgW,EAAMpZ,SAASyL,IACb/V,KAAK6iB,YAAYrkB,EAAIA,EAAIqnB,EACzB7lB,KAAK6iB,YAAYpkB,EAAIA,EAAIonB,EACzB7lB,KAAK6iB,YAAYxX,EAAIA,EAAIwa,GAE3BnC,EAAMzjB,OAASD,KAAKygB,SAItBzgB,KAAK0hB,eAAesC,QAAQN,IAC1B1jB,KAAKF,MAAMwS,OAAOoR,GACdA,EAAMrR,SAASqR,EAAMrR,YAE3BrS,KAAK0hB,eAAiB,GACtB1hB,KAAKgjB,wBAER,CAOM,WAAAiD,CAAYrF,GAEjB5gB,KAAK4gB,SAAWnW,EAAMmW,EAAU1E,EAAmBC,SAASE,IAAKH,EAAmBC,SAASG,KAG7Ftc,KAAKkmB,0BAGDlmB,KAAKwhB,0BACPxhB,KAAKwhB,yBAAyBxhB,KAAK4gB,UAIrC5gB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OACvC,CAMO,uBAAAunB,GAEN,IAAK,MAAMzB,KAAQzkB,KAAKyhB,iBAAkB,CACxC,MAAMiD,EAAmB1kB,KAAK+gB,kBAAkB4D,IAAIF,GAC9CpF,EAAYrf,KAAKmhB,kBAAkBwD,IAAIF,GAE7C,GAAIC,GAAoBrF,EAAW,CAIjC,MAAM8G,EAAenmB,KAAKuhB,YAAcvhB,KAAK2gB,QAAQlb,YAAczF,KAAK4gB,SAAW5gB,KAAK2R,WAElFyU,EAAsB1B,EAAiBvT,QAG7C,OAAQnR,KAAK6gB,MACX,KAAKzF,EAAc0F,OAEjBsF,EAAoBpgB,IAAIqZ,EAAUlO,QAAQhG,eAAegb,IACzD,MAEF,KAAK/K,EAAciL,MAAO,CAExB,MAAMC,EAAgBtmB,KAAKohB,eAAeuD,IAAIF,IAAS,EACjDH,EAAWtkB,KAAK2gB,QAAQsB,YAAY9Q,QAAQjG,YAGlDkb,EAAoBpgB,IAAIse,EAASnZ,eAAemb,EAAgBtmB,KAAKuhB,YAAcvhB,KAAK2gB,QAAQlb,YAAczF,KAAK4gB,SAAW5gB,KAAK2R,aACnI,KACD,CAED,KAAKyJ,EAAcmL,kBAAmB,CAGpC,MAAMC,EAAc9B,EAAiBvT,QAAQlG,IAAIjL,KAAK6iB,aAGtDuD,EAAoBpgB,IAAIwgB,EAAYrb,eAAenL,KAAK2gB,QAAQlb,YAAczF,KAAK4gB,SAAW5gB,KAAK2R,aACnG,KACD,CAED,KAAKyJ,EAAcqL,cAAe,CAEhC,MAAMC,EAAS1mB,KAAKqhB,YAAYsD,IAAIF,IAAS,EAE7C2B,EAAoBpgB,IAAIqZ,EAAUlO,QAAQhG,eAAegb,EAAeO,IACxE,KACD,CAED,KAAKtL,EAAcuL,aAAc,CAE/B,MAAMC,EAAc5mB,KAAKshB,mBAAmBqD,IAAIF,IAAS,EAEzD2B,EAAoBpgB,IAAIqZ,EAAUlO,QAAQhG,eAAegb,EAAeS,IACxE,KACD,CAED,KAAKxL,EAAcyL,YAAa,CAE9B,MAAMC,EAAc9mB,KAAK+gB,kBAAkB4D,IAAIF,GAC/C,GAAIqC,EAAa,CACf,MAIMC,EAAiB,GAJHD,EAAY3V,QAAQlG,IAAIjL,KAAK6iB,aAC3BpV,SACJzN,KAAKuhB,YAEerF,EAAmBW,QAAQE,oBACjEqJ,EAAoBpgB,IAAIqZ,EAAUlO,QAAQhG,eAAegb,EAAeY,GACzE,CACD,KACD,EAICtC,EAAK5E,QACP4E,EAAK5E,OAAOmH,aAAaZ,GAI3B3B,EAAKna,SAAShC,KAAK8d,EACpB,CACF,CACF,CAMM,OAAAa,CAAQpG,GACb7gB,KAAK6gB,KAAOA,EACZ7gB,KAAKkmB,0BACDlmB,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMM,OAAAuoB,GACL,OAAOlnB,KAAK6gB,IACb,CAMM,cAAAsG,CAAeC,GACpBpnB,KAAK2gB,QAAQsB,YAAY3Z,KAAK8e,GAE9BpnB,KAAKqkB,0BAELrkB,KAAKkmB,0BACDlmB,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMM,cAAA0oB,GACL,OAAOrnB,KAAK2gB,QAAQsB,WACrB,CAKM,KAAAhM,GACLjW,KAAK4gB,SAAW,EAGhB5gB,KAAKsnB,2BAGDtnB,KAAKwhB,0BACPxhB,KAAKwhB,yBAAyBxhB,KAAK4gB,SAEtC,CAMO,wBAAA0G,GAEN,IAAK,MAAM7C,KAAQzkB,KAAKyhB,iBAAkB,CACxC,MAAMiD,EAAmB1kB,KAAK+gB,kBAAkB4D,IAAIF,GAC9C8C,EAAmBvnB,KAAKihB,kBAAkB0D,IAAIF,GAC9C+C,EAAgBxnB,KAAKkhB,eAAeyD,IAAIF,GAE9C,GAAIC,EAAkB,CAEpB,MAAM+C,EAAiB/C,EAAiBvT,QACpCsT,EAAK5E,QACP4E,EAAK5E,OAAOmH,aAAaS,GAE3BhD,EAAKna,SAAShC,KAAKmf,EACpB,CAEGF,GAAoB9C,EAAKzP,UAC3ByP,EAAKzP,SAASe,IAAIwR,EAAiB/oB,EAAG+oB,EAAiB9oB,EAAG8oB,EAAiBlc,GAGzEmc,GAAiB/C,EAAKpa,OACxBoa,EAAKpa,MAAM0L,IAAIyR,EAAchpB,EAAGgpB,EAAc/oB,EAAG+oB,EAAcnc,EAElE,CACF,CAMM,yBAAAqc,CAA0BC,GAC/B3nB,KAAKwhB,yBAA2BmG,CACjC,CAOM,aAAAC,CAAcjW,GACnB3R,KAAK2R,WAAalH,EAAMkH,EAAYuK,EAAmBM,WAAWH,IAAKH,EAAmBM,WAAWF,KAGrGtc,KAAKkmB,0BAGDlmB,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAMM,aAAAkpB,GACL,OAAO7nB,KAAK2R,UACb,CAMM,WAAAmW,GACL,OAAO9nB,KAAK4gB,QACb,CAMM,cAAAmH,GACL,OAAO/nB,KAAK6iB,YAAY1R,OACzB,CAMM,UAAA6W,GACL,OAAOhoB,KAAK2gB,OACb,CAKM,OAAAtO,GAELrS,KAAK0hB,eAAesC,QAAQN,IAC1B1jB,KAAKF,MAAMwS,OAAOoR,GACdA,EAAMrR,SACRqR,EAAMrR,YAGVrS,KAAK0hB,eAAiB,GAGtB1hB,KAAKiW,QAGLjW,KAAK+gB,kBAAkBzL,QACvBtV,KAAKihB,kBAAkB3L,QACvBtV,KAAKkhB,eAAe5L,QACpBtV,KAAKmhB,kBAAkB7L,QACvBtV,KAAKqhB,YAAY/L,QACjBtV,KAAKohB,eAAe9L,QACpBtV,KAAKshB,mBAAmBhM,QACxBtV,KAAKyhB,iBAAmB,GAGxBzhB,KAAKwhB,yBAA2B,IACjC,ECjuBH,SAASyG,EAAWlP,EAAWC,EAAWrN,GAExC,OADAA,EAAIhC,KAAKC,IAAI,EAAGD,KAAKmC,IAAI,GAAIH,EAAIoN,IAAMC,EAAID,MAChCpN,GAAK,EAAI,EAAIA,EAC1B,CAMA,SAASuc,EAAe1pB,EAAWC,EAAWsT,EAAeE,EAAgBlC,GAC3E,MAAMoY,EAAKxe,KAAK6B,IAAIhN,GAAKuT,EAAQhC,EAC3BqY,EAAKze,KAAK6B,IAAI/M,GAAKwT,EAASlC,EAClC,OAAOpG,KAAKmC,IAAInC,KAAKC,IAAIue,EAAIC,GAAK,GAPpC,SAAgB5pB,EAAWC,GACzB,OAAOkL,KAAKkH,KAAKrS,EAAIA,EAAIC,EAAIA,EAC/B,CAKyCgP,CAAO9D,KAAKC,IAAIue,EAAI,GAAIxe,KAAKC,IAAIwe,EAAI,IAAMrY,CACpF,OAUasY,EAgBX,WAAAzoB,CAAY0oB,EAA4B3H,GAJhC3gB,KAAKiO,MAAG,CAAEzP,EAAG,EAAGC,EAAG,GACnBuB,KAASuoB,WAAG,EACZvoB,KAAAwoB,UAAYnhB,OAAOC,kBAAoB,EAG7CtH,KAAKyoB,GApBA,MAAQ9e,KAAK+e,SAASC,SAAS,IAAIC,OAAO,EAAG,GAqBlD5oB,KAAK+R,MAAQ4O,EAAQ5O,MACrB/R,KAAKiS,OAAS0O,EAAQ1O,OACtBjS,KAAK6oB,SAAWlI,EAAQkI,UAAQ,CAAMC,IACpC,MAAMC,EAAKD,EAAGtqB,EAAI,GACZwqB,EAAKF,EAAGrqB,EAAI,GAQZwqB,EAAehB,EAAW,GAAK,EAPdC,EACrBa,EACAC,EACA,GACA,GACA,IAEuD,IACnDE,EAASjB,EAAW,EAAG,EAAGgB,GAChC,MAvCG,CAAElqB,KAAM,IAAKP,EAuCDuqB,EAAKG,EAAS,GAvCVzqB,EAuCeuqB,EAAKE,EAAS,GACjD,GAEDlpB,KAAKmpB,KAAKb,EACX,CAEO,IAAAa,CAAKlpB,GAEXD,KAAKopB,IAAM5N,SAAS6N,gBAAgB,6BAA8B,OAClErpB,KAAKopB,IAAIE,aAAa,QAAS,8DAE/B,MAAMC,EAAO/N,SAAS6N,gBAAgB,6BAA8B,QAC9DrD,EAASxK,SAAS6N,gBAAgB,6BAA8B,UACtErD,EAAOsD,aAAa,KAAM,GAAGtpB,KAAKyoB,aAClCzC,EAAOsD,aAAa,cAAe,kBACnCtD,EAAOsD,aAAa,4BAA6B,QACjDtD,EAAOsD,aAAa,IAAK,KACzBtD,EAAOsD,aAAa,IAAK,KACzBtD,EAAOsD,aAAa,QAAStpB,KAAK+R,MAAM4W,YACxC3C,EAAOsD,aAAa,SAAUtpB,KAAKiS,OAAO0W,YAE1C3oB,KAAKwpB,QAAUhO,SAAS6N,gBAAgB,6BAA8B,WACtErpB,KAAKwpB,QAAQF,aAAa,KAAM,GAAGtpB,KAAKyoB,UACxCzoB,KAAKwpB,QAAQF,aAAa,SAAU,OACpCtpB,KAAKwpB,QAAQF,aAAa,QAAStpB,KAAK+R,MAAM4W,YAC9C3oB,KAAKwpB,QAAQF,aAAa,SAAUtpB,KAAKiS,OAAO0W,YAEhD3oB,KAAKypB,kBAAoBjO,SAAS6N,gBAAgB,6BAA8B,qBAChFrpB,KAAKypB,kBAAkBH,aAAa,KAAM,iBAC1CtpB,KAAKypB,kBAAkBH,aAAa,MAAO,OAC3CtpB,KAAKypB,kBAAkBH,aAAa,mBAAoB,KACxDtpB,KAAKypB,kBAAkBH,aAAa,mBAAoB,KAExDtD,EAAOlK,YAAY9b,KAAKwpB,SACxBxD,EAAOlK,YAAY9b,KAAKypB,mBACxBF,EAAKzN,YAAYkK,GACjBhmB,KAAKopB,IAAItN,YAAYyN,GACrB/N,SAASsG,KAAKhG,YAAY9b,KAAKopB,KAG/BppB,KAAKkT,OAASsI,SAASG,cAAc,UACrC3b,KAAK0pB,QAAU1pB,KAAKkT,OAAOiL,WAAW,MACtCne,KAAK2pB,WAAW3pB,KAAK+R,MAAO/R,KAAKiS,QAGhChS,EAAOkH,MAAcyiB,eAAiB,QAAQ5pB,KAAKyoB,uEACnDxoB,EAAOkH,MAAc0iB,qBAAuB,QAAQ7pB,KAAKyoB,uEAG1DzoB,KAAKikB,SAGLhkB,EAAOsH,iBAAiB,YAAcuiB,IACpC,MAAMC,EAAO9pB,EAAOmT,wBACpBpT,KAAKiO,MAAMzP,GAAKsrB,EAAE7hB,QAAU8hB,EAAK/X,MAAQ+X,EAAKhY,MAC9C/R,KAAKiO,MAAMxP,GAAKqrB,EAAE5hB,QAAU6hB,EAAKxY,KAAOwY,EAAK9X,OACzCjS,KAAKuoB,WAAWvoB,KAAKikB,UAE5B,CAEM,UAAA0F,CAAW5X,EAAeE,GAC/BjS,KAAK+R,MAAQA,EACb/R,KAAKiS,OAASA,EACdjS,KAAKkT,OAAOnB,MAAQA,EAAQ/R,KAAKwoB,UACjCxoB,KAAKkT,OAAOjB,OAASA,EAASjS,KAAKwoB,UACnCxoB,KAAKikB,QACN,CAEO,MAAAA,GACN,MAAM1Y,EAAIvL,KAAKkT,OAAOnB,MAChB4G,EAAI3Y,KAAKkT,OAAOjB,OACtB,GAAI1G,GAAK,GAAKoN,GAAK,EAAG,OAEtB,MAAMqR,EAAa,IAAIC,MAAMjqB,KAAKiO,MAAO,CACvC0W,IAAK,CAAC1kB,EAAQiqB,KACZlqB,KAAKuoB,WAAY,EACVtoB,EAAOiqB,MAIlBlqB,KAAKuoB,WAAY,EACjB,MAAM4B,EAAO,IAAIC,kBAAkB7e,EAAIoN,EAAI,GAE3C,IAAI0R,EAAW,EACf,MAAMC,EAAY,GAElB,IAAK,IAAI5c,EAAI,EAAGA,EAAIyc,EAAK1c,OAAQC,GAAK,EAAG,CACvC,MAAMlP,EAAKkP,EAAI,EAAKnC,EACd9M,EAAIkL,KAAK4gB,MAAM7c,EAAI,EAAInC,GACvBiM,EAAMxX,KAAK6oB,SACf,CAAErqB,EAAGA,EAAI+M,EAAG9M,EAAGA,EAAIka,GACnBqR,GAEIQ,EAAKhT,EAAIhZ,EAAI+M,EAAI/M,EACjBisB,EAAKjT,EAAI/Y,EAAIka,EAAIla,EACvB4rB,EAAW1gB,KAAKC,IAAIygB,EAAU1gB,KAAK6B,IAAIgf,GAAK7gB,KAAK6B,IAAIif,IACrDH,EAAU/b,KAAKic,EAAIC,EACpB,CAEDJ,GAAY,GACRA,EAAW,IAAGA,EAAW,GAE7B,IAAIvK,EAAQ,EACZ,IAAK,IAAIpS,EAAI,EAAGA,EAAIyc,EAAK1c,OAAQC,GAAK,EAAG,CACvC,MAAMgd,EAAIJ,EAAUxK,KAAWuK,EAAW,GACpCM,EAAIL,EAAUxK,KAAWuK,EAAW,GAC1CF,EAAKzc,GAAS,IAAJgd,EACVP,EAAKzc,EAAI,GAAS,IAAJid,EACdR,EAAKzc,EAAI,GAAK,EACdyc,EAAKzc,EAAI,GAAK,GACf,CAED1N,KAAK0pB,QAAQkB,aAAa,IAAIC,UAAUV,EAAM5e,EAAGoN,GAAI,EAAG,GACxD3Y,KAAKwpB,QAAQsB,eAAe,+BAAgC,OAAQ9qB,KAAKkT,OAAO6X,aAChF/qB,KAAKypB,kBAAkBH,aAAa,SAAUe,EAAWrqB,KAAKwoB,WAAWG,WAC1E,CAEM,OAAAtW,GACLrS,KAAKopB,IAAI9W,SACTtS,KAAKkT,OAAOZ,QACb,QCjLU0Y,EAwBX,WAAAprB,CACEqrB,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAAoBvP,EAAmBM,WAAWJ,QAClDsP,EAAkBxP,EAAmBO,SAASL,QAC9CuP,EAAcvQ,EAAc0F,OAC5B8K,EAAe,IAAIvsB,EAAOA,QAAC,EAAG,EAAG,GACjCwsB,GAAuB,EACvBpJ,EAAmC,GACnCC,EACAvb,EAAkC,CAAA,EAClCib,GAAa,EACbC,GAAc,GApCRriB,KAAA8rB,YAA+C,IAAI9K,IAsCzDhhB,KAAKkrB,mBAAqBA,EAC1BlrB,KAAKmrB,iBAAmBA,EACxBnrB,KAAKorB,aAAeA,EACpBprB,KAAKqrB,cAAgBA,EACrBrrB,KAAKsrB,cAAgBA,EACrBtrB,KAAKurB,yBAA2BA,EAChCvrB,KAAKwrB,QAAUA,EACfxrB,KAAK+rB,OCpDA,CACLd,UAAW,scAiBXe,QAAS,+EAKTC,cAAe,wGAMfC,MAAO,qMAQPC,eAAgB,kGAKhBC,MAAO,mKAOPxY,MAAO,iJAMPyY,OAAQ,6BAGRC,KAAM,mGAKNC,KAAM,8FAKNC,OAAQ,2rBAgBRC,YAAa,sZAiBbC,iBAAkB,yEAIlBC,kBAAmB,wCAGnBC,cAAe,4UAYfC,WAAY,maAeZC,gBAAiB,kLAMjBC,iBAAkB,oGDtFlB/sB,KAAKkH,QAAUsU,SAASG,cAAc,SACtC3b,KAAKkH,QAAQ8lB,UAAY,oDACzBhtB,KAAKitB,WAAWjtB,KAAKkH,QAASlH,KAAK+rB,OAAOd,WAG1C,MAAMiC,EAAS1R,SAASG,cAAc,OACtC3b,KAAKitB,WAAWC,EAAQltB,KAAK+rB,OAAOE,eACpCiB,EAAOC,UAAY,6yBAKJntB,KAAK+rB,OAAOG,2BAE3BlsB,KAAKkH,QAAQ4U,YAAYoR,GAEzB,MAAME,EAAiB5R,SAASG,cAAc,OAC9C3b,KAAKitB,WAAWG,EAAgB,8DAChCptB,KAAKkH,QAAQ4U,YAAYsR,GAGzB,MAAMC,EAAY5K,GAAUA,EAAOhV,OAAS,EAG5C,GAFyB4f,GAAajL,EAEhB,CACpB,MAAMkL,EAAettB,KAAKutB,cAAc,OAAQF,EAAY,cAAgB,kBAE5E,GAAIA,EAAW,CACb,MAAMb,EAAShR,SAASG,cAAc,UACtC3b,KAAKwtB,YAAchB,EACnBA,EAAOQ,UAAY,kBACnBhtB,KAAKitB,WAAWT,EAAQxsB,KAAK+rB,OAAOS,QAEpC/J,EAAOuB,QAAQvD,IACb,MAAMgN,EAASjS,SAASG,cAAc,UAChC+R,EAA6B,iBAAVjN,EAAqBA,EAAQA,EAAM7M,MAC5D6Z,EAAO7Z,MAAQ8Z,EACfD,EAAOE,YAA+B,iBAAVlN,EAAsBA,EAAMN,MAAM,KAAKyN,OAASnN,EAASA,EAAM2L,MACvFsB,IAAchL,IAAc+K,EAAOI,UAAW,GAClDrB,EAAO1Q,YAAY2R,KAErBH,EAAaxR,YAAY0Q,EAC1B,CAGD,GAAIpK,EAAY,CACd,MAAM0L,EAAYtS,SAASG,cAAc,OACzC3b,KAAKitB,WAAWa,EAAW,2BACXT,EAAY,MAAQ,gWAYpCS,EAAUX,UAAY,+bAKtB,MAAMY,EAAYD,EAAUE,cAAc,SAC1CF,EAAUG,QAAU,IAAMF,EAAUG,QACpCH,EAAUI,SAAYrE,IACpB,MAAMsE,EAAQtE,EAAE7pB,OAA4BouB,QAAQ,GACpD,GAAID,EAAM,CACR,MAAME,EAAMC,IAAIC,gBAAgBJ,GAEhCpuB,KAAKsrB,gBAAgBgD,EACtB,GAGHhB,EAAaxR,YAAYgS,EAC1B,CACDV,EAAetR,YAAYwR,EAC5B,CAGD,MAAMmB,EAAoBzuB,KAAKutB,cAAc,GAAI,iBAC3CmB,EAAsB1uB,KAAK2uB,mBAAmB,cACpD3uB,KAAK4uB,kBAAoBpT,SAASG,cAAc,QAChD3b,KAAK4uB,kBAAkB5B,UAAY,iBACnChtB,KAAKitB,WAAWjtB,KAAK4uB,kBAAmB5uB,KAAK+rB,OAAOnY,OACpD5T,KAAK4uB,kBAAkBjB,YAAc,GAAGlC,EAAkBoD,QAAQ,MAClEH,EAAoB5S,YAAY9b,KAAK4uB,mBACrCH,EAAkB5S,aAAa6S,EAAqBD,EAAkB7S,YAEtE5b,KAAK8uB,iBAAmBtT,SAASG,cAAc,SAC/C3b,KAAK8uB,iBAAiB/vB,KAAO,QAC7BiB,KAAK8uB,iBAAiB9B,UAAY,kBAClChtB,KAAK8uB,iBAAiBhjB,IAAMoQ,EAAmBM,WAAWH,IAAIsM,WAC9D3oB,KAAK8uB,iBAAiBllB,IAAMsS,EAAmBM,WAAWF,IAAIqM,WAC9D3oB,KAAK8uB,iBAAiBC,KAAO7S,EAAmBM,WAAWD,KAAKoM,WAChE3oB,KAAK8uB,iBAAiBlb,MAAQ6X,EAAkB9C,WAChD3oB,KAAKitB,WAAWjtB,KAAK8uB,iBAAkB9uB,KAAK+rB,OAAOM,QACnDoC,EAAkB3S,YAAY9b,KAAK8uB,kBACnC1B,EAAetR,YAAY2S,GAG3B,MAAMO,EAAkBhvB,KAAKutB,cAAc,GAAI,iBACzC0B,EAAoBjvB,KAAK2uB,mBAAmB,QAClD3uB,KAAKkvB,gBAAkB1T,SAASG,cAAc,QAC9C3b,KAAKkvB,gBAAgBlC,UAAY,iBACjChtB,KAAKitB,WAAWjtB,KAAKkvB,gBAAiBlvB,KAAK+rB,OAAOnY,OAClD5T,KAAKkvB,gBAAgBvB,YAAcjC,EAAgBmD,QAAQ,GAC3DI,EAAkBnT,YAAY9b,KAAKkvB,iBACnCF,EAAgBnT,aAAaoT,EAAmBD,EAAgBpT,YAEhE5b,KAAKmvB,eAAiB3T,SAASG,cAAc,SAC7C3b,KAAKmvB,eAAepwB,KAAO,QAC3BiB,KAAKmvB,eAAenC,UAAY,kBAChChtB,KAAKmvB,eAAerjB,IAAMoQ,EAAmBO,SAASJ,IAAIsM,WAC1D3oB,KAAKmvB,eAAevlB,IAAMsS,EAAmBO,SAASH,IAAIqM,WAC1D3oB,KAAKmvB,eAAeJ,KAAO7S,EAAmBO,SAASF,KAAKoM,WAC5D3oB,KAAKmvB,eAAevb,MAAQ8X,EAAgB/C,WAC5C3oB,KAAKitB,WAAWjtB,KAAKmvB,eAAgBnvB,KAAK+rB,OAAOM,QACjD2C,EAAgBlT,YAAY9b,KAAKmvB,gBACjC/B,EAAetR,YAAYkT,GAG3B,MAAMI,EAAcpvB,KAAKutB,cAAc,OAAQ,eACzC8B,EAAW7T,SAASG,cAAc,OACxC3b,KAAKitB,WAAWoC,EAAUrvB,KAAK+rB,OAAOQ,MA4CtC,GA1Cc,CACZ,CAAE9D,GAAIrN,EAAc0F,OAAQsL,MAAO,OAAQkD,KAAM,iGACjD,CAAE7G,GAAIrN,EAAcmL,kBAAmB6F,MAAO,QAASkD,KAAM,6DAC7D,CAAE7G,GAAIrN,EAAciL,MAAO+F,MAAO,OAAQkD,KAAM,2BAChD,CAAE7G,GAAIrN,EAAcyL,YAAauF,MAAO,MAAOkD,KAAM,yFACrD,CAAE7G,GAAIrN,EAAcqL,cAAe2F,MAAO,OAAQkD,KAAM,2BACxD,CAAE7G,GAAIrN,EAAcuL,aAAcyF,MAAO,OAAQkD,KAAM,uDAGnDtL,QAAQnL,IACZ,MAAM0W,EAAM/T,SAASG,cAAc,OACnC4T,EAAIvC,UAAY,sBAAqBrB,IAAgB9S,EAAE4P,GAAK,SAAW,IACvE8G,EAAIpC,UAAY,wKAC+ItU,EAAEyW,gCACvJzW,EAAEuT,uBAEZmD,EAAItB,QAAU,IAAMjuB,KAAKwvB,gBAAgB3W,EAAE4P,IAC3C4G,EAASvT,YAAYyT,GACrBvvB,KAAK8rB,YAAY/V,IAAI8C,EAAE4P,GAAI8G,KAE7BH,EAAYtT,YAAYuT,GAGxBrvB,KAAKyvB,eAAiBjU,SAASG,cAAc,OAC7C3b,KAAKitB,WAAWjtB,KAAKyvB,eAAgB,8BAA6B9D,IAAgBvQ,EAAciL,MAAQ,QAAU,SAClHrmB,KAAK0vB,YAAclU,SAASG,cAAc,UAC1C3b,KAAKitB,WAAWjtB,KAAK0vB,YAAa1vB,KAAK+rB,OAAOS,QAC9C,CACE,CAAEmD,EAAG,QAAS/W,EAAG,YACjB,CAAE+W,EAAG,QAAS/W,EAAG,YACjB,CAAE+W,EAAG,QAAS/W,EAAG,aACjBoL,QAAQjL,IACR,MAAM6W,EAAMpU,SAASG,cAAc,UACnCiU,EAAIhc,MAAQmF,EAAE4W,EAAGC,EAAIjC,YAAc5U,EAAEH,EACjCG,EAAE4W,IAAM,GAAG/D,EAAaptB,KAAKotB,EAAantB,KAAKmtB,EAAavgB,MAAKukB,EAAI/B,UAAW,GACpF7tB,KAAK0vB,YAAY5T,YAAY8T,KAE/B5vB,KAAKyvB,eAAe3T,YAAY9b,KAAK0vB,aACrCN,EAAYtT,YAAY9b,KAAKyvB,gBAC7BrC,EAAetR,YAAYsT,GAGvB/M,EAAa,CACf,MAAMwN,EAAgB7vB,KAAKutB,cAAc,OAAQ,eAC3CuC,EAAYtU,SAASG,cAAc,SACzC3b,KAAKitB,WAAW6C,EAAW,sFAC3B9vB,KAAK+vB,aAAevU,SAASG,cAAc,SAC3C3b,KAAK+vB,aAAahxB,KAAO,WACzBiB,KAAK+vB,aAAaC,QAAUnE,EAC5B7rB,KAAK+vB,aAAa5oB,MAAM4K,MAAQ,OAChC/R,KAAK+vB,aAAa5oB,MAAM8K,OAAS,OACjCjS,KAAK+vB,aAAa5oB,MAAM8oB,YAAc,yBACtCH,EAAUhU,YAAY9b,KAAK+vB,cAC3B,MAAMG,EAAa1U,SAASG,cAAc,QAC1CuU,EAAWvC,YAAc,aACzB3tB,KAAKitB,WAAWiD,EAAY,uEAC5BJ,EAAUhU,YAAYoU,GACtBL,EAAc/T,YAAYgU,GAC1B1C,EAAetR,YAAY+T,EAC5B,CAGD,MAAMM,EAAS3U,SAASG,cAAc,OACtC3b,KAAKitB,WAAWkD,EAAQ,uCACxBnwB,KAAKowB,YAAc5U,SAASG,cAAc,UAC1C3b,KAAKowB,YAAYpD,UAAY,wBAC7BhtB,KAAKitB,WAAWjtB,KAAKowB,YAAapwB,KAAK+rB,OAAOU,aAC9CzsB,KAAKowB,YAAYjD,UAAY,mWAM7BntB,KAAKowB,YAAYC,aAAe,IAAMrwB,KAAKitB,WAAWjtB,KAAKowB,YAAapwB,KAAK+rB,OAAOU,YAAczsB,KAAK+rB,OAAOW,kBAC9G1sB,KAAKowB,YAAYE,aAAe,IAAMtwB,KAAKitB,WAAWjtB,KAAKowB,YAAapwB,KAAK+rB,OAAOU,aACpFzsB,KAAKowB,YAAYG,YAAc,IAAMvwB,KAAKitB,WAAWjtB,KAAKowB,YAAapwB,KAAK+rB,OAAOU,YAAczsB,KAAK+rB,OAAOY,mBAC7G3sB,KAAKowB,YAAYI,UAAY,IAAMxwB,KAAKitB,WAAWjtB,KAAKowB,YAAapwB,KAAK+rB,OAAOU,YAAczsB,KAAK+rB,OAAOW,kBAE3GyD,EAAOrU,YAAY9b,KAAKowB,aACxBpwB,KAAKkH,QAAQ4U,YAAYqU,GAGzBnwB,KAAK8uB,iBAAiB2B,QAAW3G,IAC/B,MAAM6F,EAAIe,WAAY5G,EAAE7pB,OAA4B2T,OACpD5T,KAAK2wB,iBAAiBhB,GACtB3vB,KAAKkrB,mBAAmByE,IAE1B3vB,KAAKmvB,eAAesB,QAAW3G,IAC7B,MAAM6F,EAAIe,WAAY5G,EAAE7pB,OAA4B2T,OACpD5T,KAAK4wB,eAAejB,GACpB3vB,KAAKmrB,mBAAmBwE,IAEtB3vB,KAAKwtB,cAAaxtB,KAAKwtB,YAAYW,SAAYrE,GAAM9pB,KAAKsrB,gBAAiBxB,EAAE7pB,OAA6B2T,QAC9G5T,KAAK0vB,YAAYvB,SAAYrE,IAC3B,MAAOtrB,EAAGC,EAAG4M,GAAMye,EAAE7pB,OAA6B2T,MAAMuM,MAAM,KAAKpB,IAAI8R,QACvE7wB,KAAKqrB,gBAAgB,IAAIhsB,EAAOA,QAACb,EAAGC,EAAG4M,KAErCrL,KAAK+vB,eACP/vB,KAAK+vB,aAAa5B,SAAYrE,GAAM9pB,KAAKurB,2BAA4BzB,EAAE7pB,OAA4B+vB,UAErGhwB,KAAKowB,YAAYnC,QAAU,KACzBjuB,KAAKwrB,aAcP,KAVoC,iBAAdP,EAAyBzP,SAASwS,cAAc/C,GAAaA,IACxEzP,SAASsG,MAAMhG,YAAY9b,KAAKkH,SAG3ClH,KAAK8wB,YAAc,IAAIzI,EAAYroB,KAAKkH,QAAS,CAC/C6K,MAAO,IACPE,OAAQjS,KAAKkH,QAAQ6pB,cAAgB,MAInC1pB,OAAO2pB,eAAgB,CACd,IAAIA,eAAe,KACxBhxB,KAAK8wB,aACP9wB,KAAK8wB,YAAYnH,WAAW,IAAK3pB,KAAKkH,QAAQ6pB,gBAG/CE,QAAQjxB,KAAKkH,QACjB,CACF,CAEO,aAAAqmB,CAAcrB,EAAgBI,GACpC,MAAM4E,EAAM1V,SAASG,cAAc,WAGnC,GAFA3b,KAAKitB,WAAWiE,EAAKlxB,KAAK+rB,OAAOC,SAE7BE,EAAO,CACT,MAAME,EAAQ5Q,SAASG,cAAc,SACrC3b,KAAKitB,WAAWb,EAAOpsB,KAAK+rB,OAAOK,OACnCA,EAAMuB,YAAczB,EACpBgF,EAAIpV,YAAYsQ,EACjB,CAED,GAAIE,EAAM,CACR,MAAM6E,EAAS3V,SAASG,cAAc,KACtC3b,KAAKitB,WAAWkE,EAAQnxB,KAAK+rB,OAAOO,MACpC6E,EAAOxD,YAAcrB,EACrB4E,EAAIpV,YAAYqV,EACjB,CAED,OAAOD,CACR,CAEO,kBAAAvC,CAAmB1Q,GACzB,MAAMmT,EAAO5V,SAASG,cAAc,OACpC3b,KAAKitB,WAAWmE,EAAMpxB,KAAK+rB,OAAOI,gBAClC,MAAMC,EAAQ5Q,SAASG,cAAc,QAIrC,OAHA3b,KAAKitB,WAAWb,EAAOpsB,KAAK+rB,OAAOK,OACnCA,EAAMuB,YAAc1P,EACpBmT,EAAKtV,YAAYsQ,GACVgF,CACR,CAEO,eAAA5B,CAAgB3O,GACtB7gB,KAAKqxB,WAAWxQ,GAChB7gB,KAAKorB,eAAevK,EACrB,CAEO,UAAAoM,CAAWqE,EAAiBnqB,GAClC,MAAMoqB,EAAWD,EAAGE,aAAa,UAAY,GAC7CF,EAAGhI,aAAa,QAASiI,EAAWpqB,EACrC,CAEM,IAAAsqB,GAAezxB,KAAKkH,QAAQC,MAAMuqB,QAAU,MAAS,CACrD,IAAAC,GAAe3xB,KAAKkH,QAAQC,MAAMuqB,QAAU,MAAS,CAErD,MAAAjhB,CAAOmhB,GAEb,CAEM,gBAAAjB,CAAiBhf,GACtB3R,KAAK8uB,iBAAiBlb,MAAQjC,EAAWgX,WACzC3oB,KAAK4uB,kBAAkBjB,YAAc,GAAGhc,EAAWkd,QAAQ,KAC5D,CAEM,cAAA+B,CAAezM,GACpBnkB,KAAKmvB,eAAevb,MAAQuQ,EAASwE,WACrC3oB,KAAKkvB,gBAAgBvB,YAAcxJ,EAAS0K,QAAQ,EACrD,CAEM,UAAAwC,CAAWxQ,GAChB7gB,KAAK8rB,YAAY9H,QAAQ,CAACuL,EAAK9G,KACzBA,IAAO5H,EAAM0O,EAAIsC,UAAU7rB,IAAI,UAC9BupB,EAAIsC,UAAUvf,OAAO,YAExBtS,KAAKyvB,iBACPzvB,KAAKyvB,eAAetoB,MAAMuqB,QAAU7Q,IAASzF,EAAciL,MAAQ,QAAU,OAEhF,CAEM,sBAAAyL,CAAuBje,GACxB7T,KAAK+vB,eAAc/vB,KAAK+vB,aAAaC,QAAUnc,EACpD,CAEM,iBAAAke,CAAkB3K,GACnBpnB,KAAK0vB,cAAa1vB,KAAK0vB,YAAY9b,MAAQ,GAAGwT,EAAO5oB,KAAK4oB,EAAO3oB,KAAK2oB,EAAO/b,IAClF,CAEM,OAAAgH,GACLrS,KAAK8wB,aAAaze,UACdrS,KAAKkH,QAAQ8qB,YAAYhyB,KAAKkH,QAAQ8qB,WAAWC,YAAYjyB,KAAKkH,QACvE,QEpYUgrB,EAOX,WAAAtyB,CACEqrB,EACAkH,EACAC,EAAkBlW,EAAmBC,SAASC,SAE9Cpc,KAAKmyB,iBAAmBA,EAGxBnyB,KAAKkH,QAAUsU,SAASG,cAAc,OACtC3b,KAAKkH,QAAQ8lB,UAAY,oBACzBhtB,KAAKitB,WAAWjtB,KAAKkH,QAAS,8MAY9B,MAAMmrB,EAAO7W,SAASG,cAAc,OACpC0W,EAAKrF,UAAY,gBACjBhtB,KAAKitB,WAAWoF,EAAM,6RAUtBryB,KAAKkH,QAAQ4U,YAAYuW,GAGzB,MAAMC,EAAoB9W,SAASG,cAAc,OACjD3b,KAAKitB,WAAWqF,EAAmB,gGAMnCD,EAAKvW,YAAYwW,GAGjB,MAAMpF,EAAS1R,SAASG,cAAc,OACtC3b,KAAKitB,WAAWC,EAAQ,mGAMxB,MAAMd,EAAQ5Q,SAASG,cAAc,QACrCyQ,EAAMuB,YAAc,SACpB3tB,KAAKitB,WAAWb,EAAO,oKAQvBpsB,KAAKuyB,aAAe/W,SAASG,cAAc,QAC3C3b,KAAKuyB,aAAa5E,YAAc,GAAGhkB,KAAK6oB,MAAwB,IAAlBJ,MAC9CpyB,KAAKitB,WAAWjtB,KAAKuyB,aAAc,iGAMnCrF,EAAOpR,YAAYsQ,GACnBc,EAAOpR,YAAY9b,KAAKuyB,cACxBD,EAAkBxW,YAAYoR,GAG9BltB,KAAKqsB,OAAS7Q,SAASG,cAAc,SACrC3b,KAAKqsB,OAAOttB,KAAO,QACnBiB,KAAKqsB,OAAOW,UAAY,kBACxBhtB,KAAKqsB,OAAOvgB,IAAMoQ,EAAmBC,SAASE,IAAIsM,WAClD3oB,KAAKqsB,OAAOziB,IAAMsS,EAAmBC,SAASG,IAAIqM,WAClD3oB,KAAKqsB,OAAO0C,KAAO7S,EAAmBC,SAASI,KAAKoM,WACpD3oB,KAAKqsB,OAAOzY,MAAQwe,EAAgBzJ,WACpC3oB,KAAKitB,WAAWjtB,KAAKqsB,OAAQ,0EAK7BiG,EAAkBxW,YAAY9b,KAAKqsB,QAGnCrsB,KAAKqsB,OAAOoE,QAAW3G,IACrB,MAAM6F,EAAIe,WAAY5G,EAAE7pB,OAA4B2T,OACpD5T,KAAKyQ,OAAOkf,GACZ3vB,KAAKmyB,iBAAiBxC,MAIY,iBAAd1E,EAAyBzP,SAASwS,cAAc/C,GAAaA,IACxEzP,SAASsG,MAAMhG,YAAY9b,KAAKkH,SAG3ClH,KAAK8wB,YAAc,IAAIzI,EAAYgK,EAAM,CACvCtgB,MAAO,IACPE,OAAQ,IAEX,CAEM,MAAAxB,CAAOmQ,GACZ5gB,KAAKqsB,OAAOzY,MAAQgN,EAAS+H,WAC7B3oB,KAAKuyB,aAAa5E,YAAc,GAAGhkB,KAAK6oB,MAAiB,IAAX5R,KAC/C,CAEM,IAAA6Q,GACLzxB,KAAKkH,QAAQC,MAAMuqB,QAAU,OAC9B,CAEM,IAAAC,GACL3xB,KAAKkH,QAAQC,MAAMuqB,QAAU,MAC9B,CAEM,OAAArf,GACLrS,KAAK8wB,aAAaze,UACdrS,KAAKkH,QAAQ8qB,YACfhyB,KAAKkH,QAAQ8qB,WAAWC,YAAYjyB,KAAKkH,QAE5C,CAEO,UAAA+lB,CAAWqE,EAAiBnqB,GAClC,MAAMsrB,EAAMnB,EAAGE,aAAa,UAAY,GACxCF,EAAGhI,aAAa,QAASmJ,EAAMtrB,EAChC,QC5IUurB,EAOX,WAAA9yB,CAAYqrB,EAAiC0H,EAA2B,SAAUC,EAA2B,GAE3G5yB,KAAKkH,QAAUsU,SAASG,cAAc,OACtC3b,KAAKkH,QAAQ8lB,UAAY,oBACzBhtB,KAAKitB,WAAWjtB,KAAKkH,QAAS,mMAY9B,MAAM2rB,EAAWrX,SAASG,cAAc,OACxCkX,EAAS7F,UAAY,gBACrBhtB,KAAKitB,WAAW4F,EAAU,wTAa1B,MAAMvD,EAAO9T,SAASG,cAAc,OACpC3b,KAAKitB,WAAWqC,EAAM,wPAWtBA,EAAKnC,UAAY,4XAGjB,MAAM2F,EAAUtX,SAASG,cAAc,OACvC3b,KAAKitB,WAAW6F,EAAS,+DAKzB9yB,KAAK+yB,iBAAmBvX,SAASG,cAAc,QAC/C3b,KAAK+yB,iBAAiBpF,YAAcgF,EACpC3yB,KAAKitB,WAAWjtB,KAAK+yB,iBAAkB,2OAWvC/yB,KAAKgzB,iBAAmBxX,SAASG,cAAc,QAC/C3b,KAAKgzB,iBAAiBrF,YAAc,OAAOiF,EAAiBK,mBAC5DjzB,KAAKitB,WAAWjtB,KAAKgzB,iBAAkB,8LASvCF,EAAQhX,YAAY9b,KAAK+yB,kBACzBD,EAAQhX,YAAY9b,KAAKgzB,kBACzBH,EAAS/W,YAAYwT,GACrBuD,EAAS/W,YAAYgX,GACrB9yB,KAAKkH,QAAQ4U,YAAY+W,GAGzB,MAAMK,EAAc1X,SAASG,cAAc,OAC3C3b,KAAKitB,WAAWiG,EAAa,wVAa7B,MAAM3O,EAAM/I,SAASG,cAAc,QACnC4I,EAAIyI,UAAY,6CAEhB,MAAMmG,EAAa3X,SAASG,cAAc,QAC1CwX,EAAWxF,YAAc,oBACzB3tB,KAAKitB,WAAWkG,EAAY,oKAQ5BD,EAAYpX,YAAYyI,GACxB2O,EAAYpX,YAAYqX,GACxBnzB,KAAKkH,QAAQ4U,YAAYoX,KAGW,iBAAdjI,EAAyBzP,SAASwS,cAAc/C,GAAaA,IACxEzP,SAASsG,MAAMhG,YAAY9b,KAAKkH,SAG3ClH,KAAKozB,aAAe,IAAI/K,EAAYwK,EAAU,CAAE9gB,MAAO,IAAKE,OAAQ,KACpEjS,KAAKqzB,aAAe,IAAIhL,EAAY6K,EAAa,CAAEnhB,MAAO,IAAKE,OAAQ,IACxE,CAEM,MAAAxB,CAAO6iB,EAAcC,GAC1BvzB,KAAK+yB,iBAAiBpF,YAAc2F,EACpCtzB,KAAKgzB,iBAAiBrF,YAAc,OAAO4F,EAAUN,kBACtD,CAEM,YAAAO,CAAaF,GAClBtzB,KAAK+yB,iBAAiBpF,YAAc2F,CACrC,CAEM,YAAAG,CAAaC,GAClB1zB,KAAKgzB,iBAAiBrF,YAAc,OAAO+F,EAAMT,kBAClD,CAEM,IAAAxB,GACLzxB,KAAKkH,QAAQC,MAAMuqB,QAAU,MAC9B,CAEM,IAAAC,GACL3xB,KAAKkH,QAAQC,MAAMuqB,QAAU,MAC9B,CAEM,OAAArf,GACLrS,KAAKozB,cAAc/gB,UACnBrS,KAAKqzB,cAAchhB,UACfrS,KAAKkH,QAAQ8qB,YACfhyB,KAAKkH,QAAQ8qB,WAAWC,YAAYjyB,KAAKkH,QAE5C,CAEO,UAAA+lB,CAAWqE,EAAiBnqB,GAClC,MAAMsrB,EAAMnB,EAAGE,aAAa,UAAY,GACxCF,EAAGhI,aAAa,QAASmJ,EAAMtrB,EAChC,EC9JH,MAAMwsB,EAQJ,WAAA/zB,CACEqrB,EACAkH,EACAjH,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA4G,EAAkBlW,EAAmBC,SAASC,QAC9CqP,EAAoBvP,EAAmBM,WAAWJ,QAClDsP,EAAkBxP,EAAmBO,SAASL,QAC9CuP,EAAcvQ,EAAc0F,OAC5B8K,EAAe,IAAIvsB,UAAQ,EAAG,EAAG,GACjCwsB,GAAuB,EACvBpJ,EACAC,EACAvb,EACAib,GAAa,EACbC,GAAc,EACduR,EAAoB,OACpBL,EAAoB,EACpBjR,GAAY,EACZC,GAAe,GAGfviB,KAAKkH,QAAU+jB,EAGX3I,IACFtiB,KAAK6zB,MAAQ,IAAI7I,EACfC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACApJ,EACAC,EACAvb,EACAib,EACAC,IAKAE,IACFviB,KAAK8zB,IAAM,IAAI5B,EACbjH,EACAkH,EACAC,IAKA9P,IACFtiB,KAAK+zB,QAAU,IAAIrB,EAAgBzH,EAAW2I,EAAWL,IAI3DvzB,KAAKg0B,kBAAkB/I,GAGvBjrB,KAAKi0B,wBAGLj0B,KAAKk0B,cAAgBl0B,KAAKi0B,sBAAsB7tB,KAAKpG,MACrDqH,OAAOE,iBAAiB,SAAUvH,KAAKk0B,cACxC,CAMO,iBAAAF,CAAkB/I,GACxBjrB,KAAKm0B,YAAc3Y,SAASG,cAAc,OAC1C3b,KAAKm0B,YAAYnH,UAAY,wBAG7B,MAAMpO,EAAUpD,SAASG,cAAc,OACvCiD,EAAQoO,UAAY,0BACpB,IAAK,IAAItf,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MAAM6W,EAAM/I,SAASG,cAAc,OACnC4I,EAAIyI,UAAY,sBAChBpO,EAAQ9C,YAAYyI,EACrB,CAED,MAAM6H,EAAQ5Q,SAASG,cAAc,OACrCyQ,EAAMY,UAAY,8BAClBZ,EAAMgI,UAAY,OAElBp0B,KAAKm0B,YAAYrY,YAAY8C,GAC7B5e,KAAKm0B,YAAYrY,YAAYsQ,GAC7BnB,EAAUnP,YAAY9b,KAAKm0B,aAG3Bn0B,KAAKm0B,YAAY5sB,iBAAiB,aAAeuiB,IAC/CA,EAAEuK,mBACD,CAAE7sB,SAAS,IAEdxH,KAAKm0B,YAAY5sB,iBAAiB,YAAcuiB,IAC9CA,EAAEuK,mBACD,CAAE7sB,SAAS,GACf,CAKO,qBAAAysB,GACS7T,KAGbpgB,KAAK6zB,OAAOlC,OACZ3xB,KAAK+zB,SAASpC,SAEd3xB,KAAK6zB,OAAOpC,OACZzxB,KAAK+zB,SAAStC,OAEjB,CAED,IAAAA,GACOrR,MACHpgB,KAAK6zB,OAAOpC,OACZzxB,KAAK+zB,SAAStC,QAEhBzxB,KAAK8zB,KAAKrC,MACX,CAED,IAAAE,GACE3xB,KAAK6zB,OAAOlC,OACZ3xB,KAAK8zB,KAAKnC,OACV3xB,KAAK+zB,SAASpC,MACf,CAED,MAAAlhB,CAAOmQ,GACL5gB,KAAK6zB,OAAOpjB,OAAOmQ,GACnB5gB,KAAK8zB,KAAKrjB,OAAOmQ,EAClB,CAED,gBAAA+P,CAAiBhf,GACf3R,KAAK6zB,OAAOlD,iBAAiBhf,EAC9B,CAED,cAAAif,CAAezM,GACbnkB,KAAK6zB,OAAOjD,eAAezM,EAC5B,CAED,UAAAkN,CAAWxQ,GACT7gB,KAAK6zB,OAAOxC,WAAWxQ,EACxB,CAED,iBAAAkR,CAAkB3K,GAChBpnB,KAAK6zB,OAAO9B,kBAAkB3K,EAC/B,CAED,sBAAA0K,CAAuBje,GACrB7T,KAAK6zB,OAAO/B,uBAAuBje,EACpC,CAED,WAAAygB,CAAY5G,GAEN1tB,KAAK6zB,OAAU7zB,KAAK6zB,MAAcS,aACnCt0B,KAAK6zB,MAAcS,YAAY5G,EAEnC,CAED,UAAA6G,CAAWjB,EAAcC,GACvBvzB,KAAK+zB,SAAStjB,OAAO6iB,EAAMC,EAC5B,CAED,KAAAtd,GACEjW,KAAK6zB,OAAOlD,iBAAiBzU,EAAmBM,WAAWJ,SAC3Dpc,KAAK6zB,OAAOjD,eAAe1U,EAAmBO,SAASL,SACvDpc,KAAK6zB,OAAOxC,WAAWjW,EAAc0F,QACrC9gB,KAAK6zB,OAAO9B,kBAAkB,IAAI1yB,EAAAA,QAAQ,EAAG,EAAG,IAChDW,KAAK6zB,OAAO/B,wBAAuB,GACnC9xB,KAAK8zB,KAAKrjB,OAAOyL,EAAmBC,SAASC,QAC9C,CAED,OAAA/J,GACEhL,OAAOK,oBAAoB,SAAU1H,KAAKk0B,eAC1Cl0B,KAAK6zB,OAAOxhB,UACZrS,KAAK8zB,KAAKzhB,UACVrS,KAAK+zB,SAAS1hB,SACf,EAqBa,SAAAuP,EACdjB,EACAwR,EACAjH,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA4G,EAAkBlW,EAAmBC,SAASC,QAC9CqP,EAAoBvP,EAAmBM,WAAWJ,QAClDsP,EAAkBxP,EAAmBO,SAASL,QAC9CuP,EAAcvQ,EAAc0F,OAC5B8K,EAAe,IAAIvsB,EAAOA,QAAC,EAAG,EAAG,GACjCwsB,GAAuB,EACvB+H,EAAoB,OACpBL,EAAoB,GAGpB,IAAyB,IAArB5S,EAAQiB,SACV,OAAO,KAIT,MAAMC,EAAWlB,EAAQkB,SPzJrB,SAAuBoJ,GAC3B,GAAyB,iBAAdA,EAAwB,CACjC,MAAM/jB,EAAUsU,SAASwS,cAAc/C,GACvC,IAAK/jB,EACH,MAAM,IAAIstB,MAAM,YAAYvJ,KAE9B,OAAO/jB,CACR,CACD,OAAO+jB,CACT,COgJsCwJ,CAAa9T,EAAQkB,UAAY,KAC/DoJ,EAAYpJ,GAAYrG,SAASsG,KAGvC,GAAImJ,aAAqByJ,YAAa,CAEb,WADTrtB,OAAOstB,iBAAiB1J,GAC5B3gB,WACR2gB,EAAU9jB,MAAMmD,SAAW,WAE9B,CAED,OAAO,IAAIqpB,EACT1I,EACAkH,EACAjH,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA4G,EACA3G,EACAC,EACAC,EACAC,EACAC,EACAlL,EAAQ8B,OACR9B,EAAQ+B,eAA0C,iBAAlB/B,EAAQF,MAAqBE,EAAQF,MAAQ,IAC7EE,EAAQoB,QACRpB,EAAQyB,WACRzB,EAAQ0B,YACRuR,EACAL,EACA5S,EAAQ2B,YAAa,EACrB3B,EAAQ4B,eAAgB,EAE5B,OC/RaqS,EAMX,WAAAh1B,CAAYigB,EAAqBgV,EAAe9I,GAHxC/rB,KAAW8wB,YAAuB,KAClC9wB,KAAA80B,SAAmB,GAGzB90B,KAAK60B,SAAWA,EAGhB70B,KAAKirB,UAAYzP,SAASG,cAAc,OACxC3b,KAAKirB,UAAU+B,UAAY,yBAC3BhtB,KAAKirB,UAAU3B,aAAa,QAASyC,EAAOa,eAG5C,MAAMmI,EAAYvZ,SAASG,cAAc,UACzCoZ,EAAU/H,UAAY,uBACtB+H,EAAUzL,aAAa,QAASyC,EAAOc,YACvCkI,EAAU5H,UAAY,+RAMtB4H,EAAU9G,QAAU,IAAMjuB,KAAK8M,KAAK9M,KAAK80B,UAGzC,MAAME,EAAaxZ,SAASG,cAAc,UAC1CqZ,EAAWhI,UAAY,uBACvBgI,EAAW1L,aAAa,QAASyC,EAAOc,YACxCmI,EAAW7H,UAAY,yOAKvB6H,EAAW/G,QAAU,IAAMjuB,KAAK8M,KAAK,EAAI9M,KAAK80B,UAE9C90B,KAAKirB,UAAUnP,YAAYiZ,GAC3B/0B,KAAKirB,UAAUnP,YAAYkZ,GAC3BnV,EAAO/D,YAAY9b,KAAKirB,WAGxBjrB,KAAKi1B,mBAGLj1B,KAAKk1B,gBAAgBH,EAAWhJ,GAChC/rB,KAAKk1B,gBAAgBF,EAAYjJ,EAClC,CAMO,IAAAjf,CAAKqoB,GACX,MAAMx2B,EAASqB,KAAK60B,SAASrsB,OACvBvI,EAASD,KAAK60B,SAAS50B,OAIvB8K,EADWpM,EAAO2L,SAASf,WAAWtJ,GACbk1B,EAG/B,GAAIpqB,EAAc,GAAK,OAGvB,MAAMsU,EAAY1gB,EAAO2L,SAAS6G,QAAQlG,IAAIhL,GAAQiL,YACtDvM,EAAO2L,SAAShC,KAAKrI,GAAQ+F,IAAIqZ,EAAUlU,eAAeJ,IAE1D/K,KAAK60B,SAASpkB,QACf,CAKO,eAAAykB,CAAgB3F,EAAkBxD,GACxCwD,EAAIc,aAAe,KACjB,MAAM+E,EAAe7F,EAAIiC,aAAa,UAAY,GAClDjC,EAAIjG,aAAa,QAAS8L,EAAerJ,EAAOe,kBAElDyC,EAAIe,aAAe,KACjBf,EAAIjG,aAAa,QAASyC,EAAOc,aAEnC0C,EAAIgB,YAAc,KAChB,MAAM6E,EAAe7F,EAAIiC,aAAa,UAAY,GAClDjC,EAAIjG,aAAa,QAAS8L,EAAerJ,EAAOgB,mBAElDwC,EAAIiB,UAAY,KACd,MAAM4E,EAAe7F,EAAIiC,aAAa,UAAY,GAClDjC,EAAIjG,aAAa,QAAS8L,EAAaC,QAAQtJ,EAAOgB,iBAAkB,KAE3E,CAKO,gBAAAkI,GACNj1B,KAAK8wB,YAAc,IAAIzI,EAAYroB,KAAKirB,UAAW,CACjDlZ,MAAO,IACPE,OAAQ,IAEX,CAKM,OAAAI,GACDrS,KAAK8wB,aACP9wB,KAAK8wB,YAAYze,UAEfrS,KAAKirB,UAAU+G,YACjBhyB,KAAKirB,UAAU+G,WAAWC,YAAYjyB,KAAKirB,UAE9C,6BC/ED,WAAArrB,CACE01B,EACAx1B,EACAnB,EACA+hB,EACAC,EAA2B,IA5BrB3gB,KAAIu1B,KAAwB,KAC5Bv1B,KAAEw1B,GAAsB,KACxBx1B,KAAQ0gB,SAAyB,KACjC1gB,KAAKF,MAAiB,KACtBE,KAAMrB,OAAkB,KACxBqB,KAAQ60B,SAA2B,KACnC70B,KAASirB,UAAuB,KAChCjrB,KAAUy1B,WAAsB,KAChCz1B,KAAU01B,WAAsB,KAChC11B,KAAU21B,WAAsC,KAChD31B,KAAY41B,aAAgC,KAC5C51B,KAAY61B,aAAyC,KAmBvDP,aAAgB7R,EAAQA,UAAI3jB,GAASnB,GAAU+hB,GAEjD1gB,KAAK2gB,QAAUA,EACf3gB,KAAK0gB,SAAWA,EAChB1gB,KAAKF,MAAQA,EACbE,KAAKrB,OAASA,EACdqB,KAAK81B,SAASR,EAAMx1B,EAAOnB,EAAQ+hB,EAAUC,KAG7C3gB,KAAK2gB,QAAU2U,EACft1B,KAAK+1B,qBAER,CAKO,wBAAMA,GACZ,MAAMlU,SAAEA,EAAQpB,MAAEA,EAAK0B,SAAEA,GAAaniB,KAAK2gB,QAGrCqV,EAAuC,iBAAbnU,EAAwBrG,SAASwS,cAAcnM,GAA2BA,EAC1G7hB,KAAKirB,UAAY+K,EAEZh2B,KAAKirB,YACRgL,QAAQC,KAAK,oDACbl2B,KAAKirB,UAAYzP,SAASsG,MAI5B9hB,KAAKF,MAAQ,IAAIq2B,EAAAA,MACjBn2B,KAAKF,MAAMs2B,WAAa,IAAIC,EAAKA,MAAC,UAElCr2B,KAAKrB,OAAS,IAAI23B,oBAChB,GACAt2B,KAAKirB,UAAUsL,YAAcv2B,KAAKirB,UAAUuL,aAC5C,GACA,KAEFx2B,KAAKrB,OAAO2L,SAASyL,IAAI,EAAG,EAAG,GAC/B/V,KAAKrB,OAAO4U,OAAO,EAAG,EAAG,GAEzBvT,KAAK0gB,SAAW,IAAI+V,gBAAc,CAChCC,WAAW,EACXC,OAAO,EACPC,wBAAwB,IAE1B52B,KAAK0gB,SAASmW,QAAQ72B,KAAKirB,UAAUsL,YAAav2B,KAAKirB,UAAUuL,cACjEx2B,KAAK0gB,SAASoW,cAAczvB,OAAOC,kBACnCtH,KAAK0gB,SAASqW,YAAcC,wBAC5Bh3B,KAAK0gB,SAASuW,oBAAsB/a,EAAmBO,SAASL,QAGhEpc,KAAK0gB,SAASwW,UAAUpvB,SAAU,EAElC9H,KAAKirB,UAAUnP,YAAY9b,KAAK0gB,SAAS7gB,YAEzCG,KAAK60B,SAAW,IAAIn1B,EAAgBM,KAAKrB,OAAQqB,KAAK0gB,SAAS7gB,WAAYG,KAAKF,OAGhFE,KAAK60B,SAASzvB,cAAe,EAC7BpF,KAAK60B,SAASxvB,YAAa,EAC3BrF,KAAK60B,SAAS1vB,WAAY,EAC1BnF,KAAK60B,SAASlhB,kBAAiB,GAC/B3T,KAAK60B,SAAS9vB,YAAa,EAGvB/E,KAAK2gB,QAAQ6B,wBACfxiB,KAAK60B,SAASxvB,YAAa,GAK7BrF,KAAKF,MAAMkG,IAAI,IAAIqd,EAAYA,aAAC,SAAU,KAG1C,MAAM8T,EAAmB,IAAI1T,EAAAA,SAC7BzjB,KAAKrB,OAAOqH,IAAImxB,GAChBn3B,KAAKF,MAAMkG,IAAIhG,KAAKrB,QAGpB,MAAMy4B,EAAU,IAAIzT,EAAAA,iBAAiB,SAAU,IAC/CyT,EAAQ9sB,SAASyL,IAAI,EAAG,EAAG,GAC3BqhB,EAAQC,YAAa,EAGrB,MAAMC,EAAa,IAAI7T,EAAAA,SACvB6T,EAAWhtB,SAASyL,IAAI,EAAG,GAAI,GAC/BohB,EAAiBnxB,IAAIsxB,GACrBF,EAAQn3B,OAASq3B,EACjBH,EAAiBnxB,IAAIoxB,GAKrB,IAAK,IAAI1pB,EAAI,EAAGA,EAFE,EAEaA,IAAK,CAClC,MAAMlE,EAASkE,EAHC,EAGgB/D,KAAKmF,GAAK,EACpCyoB,EAAY,IAAI5T,EAAAA,iBAAiB,SAAU,IACjD4T,EAAUjtB,SAASyL,IAJF,EAIMpM,KAAKgW,IAAInW,GAJf,EAIoCG,KAAKiW,IAAIpW,GAAqB,GAEnF,MAAMvJ,EAAS,IAAIwjB,EAAAA,SACnBxjB,EAAOqK,SAASyL,IAAI,EAAG,GAAI,GAC3BohB,EAAiBnxB,IAAI/F,GACrBs3B,EAAUt3B,OAASA,EAEnBk3B,EAAiBnxB,IAAIuxB,EACtB,CAGD,MAAMC,EAAiB,IAAI7T,EAAAA,iBAAiB,SAAU,KAEtD6T,EAAeltB,SAASyL,IAAI,EAAG,EAAG,GAClC,MAAM0hB,EAAc,IAAIhU,EAAAA,SACxBgU,EAAYntB,SAASyL,IAAI,EAAG,GAAI,GAChCohB,EAAiBnxB,IAAIyxB,GACrBD,EAAev3B,OAASw3B,EACxBN,EAAiBnxB,IAAIwxB,GAGrBx3B,KAAKy1B,WAAa,IAAItjB,EAAUA,WAAC,GAAI,GAAI,SAAU,SACnDnS,KAAK01B,WAAa,IAAIgC,EAAUA,WAAC,GAEjC13B,KAAKy1B,WAAW5hB,SAAU,EAC1B7T,KAAK01B,WAAW7hB,SAAU,EAC1B7T,KAAKF,MAAMkG,IAAIhG,KAAKy1B,YACpBz1B,KAAKF,MAAMkG,IAAIhG,KAAK01B,YAGpB,MAAMiC,EAAS3Z,EAAiB,IAAK,WAC/B4Z,EAAS5Z,EAAiB,IAAK,WAC/B6Z,EAAS7Z,EAAiB,IAAK,WAGrC2Z,EAAO9jB,SAAU,EACjB+jB,EAAO/jB,SAAU,EACjBgkB,EAAOhkB,SAAU,EACjB8jB,EAAOrtB,SAASyL,IAAI,IAAK,EAAG,GAC5B6hB,EAAOttB,SAASyL,IAAI,EAAG,IAAK,GAC5B8hB,EAAOvtB,SAASyL,IAAI,EAAG,EAAG,KAE1B/V,KAAK21B,WAAa,CAAEn3B,EAAGm5B,EAAQl5B,EAAGm5B,EAAQvsB,EAAGwsB,GAC7C73B,KAAKF,MAAMkG,IAAI2xB,EAAQC,EAAQC,GAI/B,MAAMC,EAAW3V,IAA8B,iBAAV1B,EAAqBA,EAAQ,MAElE,GAAIqX,EAAU,EACG,IAAIC,EAAAA,YACZC,KAAKF,EAAWG,IACrB,MAAMC,EAAcD,EAAKn4B,MAGzBo4B,EAAY9iB,SAAU+iB,IACfA,EAAaC,SAChBD,EAAKd,YAAa,EAClBc,EAAKE,eAAgB,KAIzBr4B,KAAKF,OAAOkG,IAAIkyB,GAChBl4B,KAAK81B,SAASoC,EAAal4B,KAAKF,MAAQE,KAAKrB,OAASqB,KAAK0gB,SAAW1gB,KAAK2gB,UAE9E,MAAUF,aAAiBgD,EAAAA,WAE1BhD,EAAMrL,SAAU+iB,IACTA,EAAaC,SAChBD,EAAKd,YAAa,EAClBc,EAAKE,eAAgB,KAIzBr4B,KAAKF,MAAMkG,IAAIya,GACfzgB,KAAK81B,SAASrV,EAAOzgB,KAAKF,MAAOE,KAAKrB,OAAQqB,KAAK0gB,SAAU1gB,KAAK2gB,UAIpE3gB,KAAKs4B,UAGLjxB,OAAOE,iBAAiB,SAAUvH,KAAKu4B,SAASnyB,KAAKpG,MACtD,CAEO,QAAAu4B,GACN,IAAKv4B,KAAKirB,YAAcjrB,KAAKrB,SAAWqB,KAAK0gB,SAAU,OACvD,MAAM3O,EAAQ/R,KAAKirB,UAAUsL,YACvBtkB,EAASjS,KAAKirB,UAAUuL,aAE1Bx2B,KAAKrB,kBAAkB23B,sBACzBt2B,KAAKrB,OAAO65B,OAASzmB,EAAQE,EAC7BjS,KAAKrB,OAAO6R,0BAEdxQ,KAAK0gB,SAASmW,QAAQ9kB,EAAOE,EAC9B,CAEO,OAAAqmB,GACN5sB,sBAAsB1L,KAAKs4B,QAAQlyB,KAAKpG,OACpCA,KAAK60B,UAAU70B,KAAK60B,SAASpkB,SAC7BzQ,KAAK0gB,UAAY1gB,KAAKF,OAASE,KAAKrB,QACtCqB,KAAK0gB,SAASuD,OAAOjkB,KAAKF,MAAOE,KAAKrB,OAEzC,CAKO,QAAAm3B,CAASrV,EAAiB3gB,EAAcnB,EAAgB+hB,EAAyBC,GAEnF3gB,KAAKu1B,MACPv1B,KAAKu1B,KAAKljB,UAGZrS,KAAKu1B,KAAO,IAAI/U,EAAaC,EAAO3gB,EAAOnB,EAAQ+hB,EAAUC,GAG7D,MAAM4S,ETnIJ,SAA6B9S,GACjC,IAAIiT,EAAQ,EAWZ,OAVAjT,EAAMrL,SAAUsQ,IACd,GAAIA,EAAM0S,QAAU1S,EAAMpR,SAAU,CAClC,MAAMA,EAAWoR,EAAMpR,SACnBA,EAASwL,MACX4T,GAASpf,EAASwL,MAAM4T,MAAQ,EACvBpf,EAASmkB,WAAWnuB,WAC7BopB,GAASpf,EAASmkB,WAAWnuB,SAASopB,MAAQ,EAEjD,IAEI/pB,KAAK4gB,MAAMmJ,EACpB,CSsHsBgF,CAAmBjY,GACrC,IAAImT,EAAY,gBAuChB,GAtCI5zB,KAAK2gB,QAAQwB,SACfyR,EAAY5T,EAAYhgB,KAAK2gB,QAAQwB,UACH,iBAAlBxB,EAAQF,MACxBmT,EAAY5T,EAAYW,EAAQF,OACvBA,EAAM6S,OACfM,EAAYnT,EAAM6S,OAIK,IAArB3S,EAAQiB,UAAuB5hB,KAAKw1B,GAoB7Bx1B,KAAKw1B,KAEdx1B,KAAKw1B,GAAG/kB,OAAOyL,EAAmBC,SAASC,SACvCpc,KAAKw1B,GAAGjB,YACVv0B,KAAKw1B,GAAGjB,WAAWX,EAAWL,IAvBhCvzB,KAAKw1B,GAAK5T,EACRjB,EACA3gB,KAAKimB,YAAY7f,KAAKpG,MACtBA,KAAK4nB,cAAcxhB,KAAKpG,MACxBA,KAAK24B,YAAYvyB,KAAKpG,MACtBA,KAAKinB,QAAQ7gB,KAAKpG,MAClBA,KAAKmnB,eAAe/gB,KAAKpG,MACzBA,KAAK44B,kBAAkBxyB,KAAKpG,MAC5BA,KAAK64B,6BAA6BzyB,KAAKpG,MACvCA,KAAKiW,MAAM7P,KAAKpG,MAChBkc,EAAmBC,SAASC,QAC5BF,EAAmBM,WAAWJ,QAC9BsE,EAASuW,oBACTj3B,KAAKu1B,KAAKrO,UACVlnB,KAAKu1B,KAAKlO,kBACV,EACAuM,EACAL,GAWAvzB,KAAKirB,WAAajrB,KAAK60B,WAAa70B,KAAK41B,aAAc,CACzD,MAAM7J,GAAsBpL,EAAQoB,QLtSjC,CACLkJ,UAAW,scAiBXe,QAAS,+EAKTC,cAAe,wGAMfC,MAAO,qMAQPC,eAAgB,kGAKhBC,MAAO,mKAOPxY,MAAO,iJAMPyY,OAAQ,6BAGRC,KAAM,mGAKNC,KAAM,8FAKNC,OAAQ,2rBAgBRC,YAAa,sZAiBbC,iBAAkB,yEAIlBC,kBAAmB,wCAGnBC,cAAe,4UAYfC,WAAY,maAeZC,gBAAiB,kLAMjBC,iBAAkB,qGK0JhB/sB,KAAK41B,aAAe,IAAIhB,EAAqB50B,KAAKirB,UAAWjrB,KAAK60B,SAAU9I,EAC7E,CAGG/rB,KAAK2gB,QAAQ6B,uBAAyBxiB,KAAK0gB,WACxC1gB,KAAK61B,eACR71B,KAAK61B,aAAe71B,KAAKsG,QAAQF,KAAKpG,OAGxCA,KAAK0gB,SAAS7gB,WAAW6H,oBAAoB,QAAS1H,KAAK61B,cAC3D71B,KAAK0gB,SAAS7gB,WAAW0H,iBAAiB,QAASvH,KAAK61B,aAAc,CAAEruB,SAAS,IAEpF,CAKO,OAAAlB,CAAQsB,GACd,IAAK5H,KAAKu1B,KAAM,OAGhB3tB,EAAMsS,iBAEN,MAAMhB,EAAQtR,EAAMsT,OAAS,EAAI,KAAQ,IACnC4d,EAAkB94B,KAAKu1B,KAAKzN,cAC5BiR,EAAcpvB,KAAKmC,IAAI,EAAGnC,KAAKC,IAAI,EAAGkvB,EAAkB5f,IAE9DlZ,KAAKimB,YAAY8S,EAClB,CAMO,iBAAAH,CAAkBlL,GACpB1tB,KAAKg5B,sBACPh5B,KAAKg5B,sBAAsBtL,GAClB1tB,KAAKirB,WAAajrB,KAAKF,OAEhCE,KAAKi5B,cAAcvL,EAEtB,CAKO,aAAAuL,CAAcvL,GACpB,IAAK1tB,KAAKF,MAAO,QAEF,IAAIi4B,EAAAA,YACZC,KAAKtK,EAAYuK,IAEtB,GAAIj4B,KAAKu1B,KAAM,CACb,MAAM2D,EAAYl5B,KAAKu1B,KAAa9U,MAChCyY,GAAUl5B,KAAKF,OAAOwS,OAAO4mB,GACjCl5B,KAAKu1B,KAAKljB,SACX,CAGD,MAAM8mB,EAAWlB,EAAKn4B,MACtBE,KAAKF,OAAOkG,IAAImzB,GAGhBn5B,KAAK81B,SAASqD,EAAUn5B,KAAKF,MAAQE,KAAKrB,OAASqB,KAAK0gB,SAAW1gB,KAAK2gB,SAGpE3gB,KAAKw1B,IAAMx1B,KAAKw1B,GAAGlB,aACrBt0B,KAAKw1B,GAAGlB,YAAY5G,GAIlBA,EAAU0L,WAAW,UAEvBC,WAAW,IAAM9K,IAAI+K,gBAAgB5L,GAAY,MAGtD,CAMO,4BAAAmL,CAA6BhlB,GAC/B7T,KAAKu5B,kCACPv5B,KAAKu5B,iCAAiC1lB,GAIpC7T,KAAKy1B,aAAYz1B,KAAKy1B,WAAW5hB,QAAUA,GAC3C7T,KAAK01B,aAAY11B,KAAK01B,WAAW7hB,QAAUA,GAC3C7T,KAAK21B,aACP31B,KAAK21B,WAAWn3B,EAAEqV,QAAUA,EAC5B7T,KAAK21B,WAAWl3B,EAAEoV,QAAUA,EAC5B7T,KAAK21B,WAAWtqB,EAAEwI,QAAUA,EAE/B,CAMM,sBAAA2lB,CAAuB7R,GAC5B3nB,KAAKg5B,sBAAwBrR,CAC9B,CAMM,iCAAA8R,CAAkC9R,GACvC3nB,KAAKu5B,iCAAmC5R,CACzC,CAMM,QAAAhC,CAASlF,GACdzgB,KAAKu1B,MAAM5P,SAASlF,EACrB,CAMM,mBAAAiZ,CAAoB7lB,GACzB7T,KAAK64B,6BAA6BhlB,GAE9B7T,KAAKw1B,IAAMx1B,KAAKw1B,GAAG1D,wBACrB9xB,KAAKw1B,GAAG1D,uBAAuBje,EAElC,CAMM,0BAAAkQ,CAA2BlQ,GAChC7T,KAAKu1B,MAAMxR,2BAA2BlQ,GAClC7T,KAAKw1B,IAAMx1B,KAAKw1B,GAAG1D,wBACrB9xB,KAAKw1B,GAAG1D,uBAAuBje,EAElC,CAMM,WAAAoS,CAAYrF,GACjB5gB,KAAKu1B,MAAMtP,YAAYrF,GAGnB5gB,KAAKw1B,IACPx1B,KAAKw1B,GAAG/kB,OAAOmQ,EAElB,CAMM,aAAAgH,CAAcjW,GACnB3R,KAAKu1B,MAAM3N,cAAcjW,GAGrB3R,KAAKw1B,IAAMx1B,KAAKw1B,GAAG7E,kBACrB3wB,KAAKw1B,GAAG7E,iBAAiBhf,EAE5B,CAMM,WAAAgnB,CAAYxU,GACbnkB,KAAK0gB,WAE2B,IAA9B1gB,KAAK0gB,SAASqW,cAChB/2B,KAAK0gB,SAASqW,YAAc,GAE9B/2B,KAAK0gB,SAASuW,oBAAsB9S,EAGpCnkB,KAAKu1B,MAAMrR,4BAA4BC,GAGnCnkB,KAAKw1B,IAAMx1B,KAAKw1B,GAAG5E,gBACrB5wB,KAAKw1B,GAAG5E,eAAezM,GAG5B,CAMM,OAAA8C,CAAQpG,GACb7gB,KAAKu1B,MAAMtO,QAAQpG,GAGf7gB,KAAKw1B,IAAMx1B,KAAKw1B,GAAGnE,YACrBrxB,KAAKw1B,GAAGnE,WAAWxQ,EAEtB,CAMM,cAAAsG,CAAeC,GACpBpnB,KAAKu1B,MAAMpO,eAAeC,GAGtBpnB,KAAKw1B,IAAMx1B,KAAKw1B,GAAGzD,mBACrB/xB,KAAKw1B,GAAGzD,kBAAkB3K,EAE7B,CAKM,KAAAnR,GAKL,GAHAjW,KAAKu1B,MAAMtf,QAGPjW,KAAK60B,UAAY70B,KAAKrB,QAAUqB,KAAK2gB,QAAQuB,aAC/CliB,KAAK60B,SAAS5e,QAEVjW,KAAKu1B,MAAM,CACEv1B,KAAKu1B,KAAa9U,QAG/BzgB,KAAKrB,OAAO2L,SAASyL,IAAI,EAAG,EAAG,GAC/B/V,KAAKrB,OAAO4U,OAAO,EAAG,EAAG,GACzBvT,KAAK60B,SAAS50B,OAAO8V,IAAI,EAAG,EAAG,GAC/B/V,KAAK60B,SAASpkB,SAEjB,CAIHzQ,KAAK24B,YAAYzc,EAAmBO,SAASL,SAGzCpc,KAAKw1B,KACPx1B,KAAKw1B,GAAGvf,UAERjW,KAAKw1B,GAAG/kB,OAAOyL,EAAmBC,SAASC,SAC3Cpc,KAAKw1B,GAAG7E,mBAAmBzU,EAAmBM,WAAWJ,SACzDpc,KAAKw1B,GAAG5E,iBAAiB1U,EAAmBO,SAASL,SACrDpc,KAAKw1B,GAAGnE,aAAajW,EAAc0F,QACnC9gB,KAAKw1B,GAAGzD,oBAAoB,IAAI1yB,EAAAA,QAAQ,EAAG,EAAG,IAC9CW,KAAKw1B,GAAG1D,0BAAyB,GAEjC9xB,KAAK64B,8BAA6B,GAErC,CAMM,yBAAAnR,CAA0BC,GAC/B3nB,KAAKu1B,MAAM7N,0BAA0BC,EACtC,CAMM,WAAAG,GACL,OAAO9nB,KAAKu1B,MAAMzN,eAAiB,CACpC,CAKM,MAAA6R,GACD35B,KAAKw1B,IACPx1B,KAAKw1B,GAAG/D,MAEX,CAKM,MAAAmI,GACD55B,KAAKw1B,IACPx1B,KAAKw1B,GAAG7D,MAEX,CAKM,OAAAtf,GAkCL,GAjCIrS,KAAKw1B,KACPx1B,KAAKw1B,GAAGnjB,UACRrS,KAAKw1B,GAAK,MAGRx1B,KAAK41B,eACP51B,KAAK41B,aAAavjB,UAClBrS,KAAK41B,aAAe,MAIlB51B,KAAKy1B,aACPz1B,KAAKF,OAAOwS,OAAOtS,KAAKy1B,YACxBz1B,KAAKy1B,WAAWnhB,SAASjC,UACrBwnB,MAAMC,QAAQ95B,KAAKy1B,WAAW5iB,UAChC7S,KAAKy1B,WAAW5iB,SAASmR,QAAQnL,GAAKA,EAAExG,WAExCrS,KAAKy1B,WAAW5iB,SAASR,UAE3BrS,KAAKy1B,WAAa,MAEhBz1B,KAAK01B,aACP11B,KAAKF,OAAOwS,OAAOtS,KAAK01B,YACxB11B,KAAK01B,WAAWphB,SAASjC,UACrBwnB,MAAMC,QAAQ95B,KAAK01B,WAAW7iB,UAChC7S,KAAK01B,WAAW7iB,SAASmR,QAAQnL,GAAKA,EAAExG,WAExCrS,KAAK01B,WAAW7iB,SAASR,UAE3BrS,KAAK01B,WAAa,MAIhB11B,KAAK21B,WAAY,CACnB,MAAMn3B,EAAEA,EAACC,EAAEA,EAAC4M,EAAEA,GAAMrL,KAAK21B,WACzB,CAACn3B,EAAGC,EAAG4M,GAAG2Y,QAAQoI,IAChBpsB,KAAKF,OAAOwS,OAAO8Z,GACnBA,EAAM9X,SAASjC,UACXwnB,MAAMC,QAAQ1N,EAAMvZ,UACtBuZ,EAAMvZ,SAASmR,QAASnL,GAAWA,EAAExG,WAErC+Z,EAAMvZ,SAASR,UAEb+Z,EAAMvZ,SAASkM,KAAKqN,EAAMvZ,SAASkM,IAAI1M,YAE7CrS,KAAK21B,WAAa,IACnB,CAED31B,KAAKu1B,MAAMljB,SACZ"}